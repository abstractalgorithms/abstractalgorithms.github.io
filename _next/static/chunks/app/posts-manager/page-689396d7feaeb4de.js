(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4203],{30613:function(e,t,s){Promise.resolve().then(s.bind(s,79668))},79668:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return e5}});var r=s(57437),a=s(2265),l=s(15863),n=s(48736),i=s(82431),o=s(28124),d=s(71769),c=s(58896),x=s(73247),m=s(41473),g=s(7586),u=s(18930),p=s(99397),h=s(82023),b=s(40875),y=s(46221),f=s(65302),j=s(2207),v=s(50091),N=s(33245),w=s(98728),k=s(68919),S=s(27648);function C(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}var D=s(25846),E=s(32489),T=s(30401),P=s(22252),Z=s(91723),A=s(33954),I=s(11239),O=s(42820),M=s(78867),L=s(83229),R=s(53113),F=s(17689);function _(e){let{postSlug:t,onImageUploaded:s,onCoverImageSet:n,className:i=""}=e,[o,d]=(0,a.useState)([]),[c,x]=(0,a.useState)(!1),[m,g]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),h=(0,a.useRef)(null),b=async e=>{let r=e.target.files;if(!r||0===r.length)return;let a=r[0];if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(a.type)){g("Invalid file type. Only JPEG, PNG, GIF, and WebP images are allowed.");return}if(a.size>2097152){g("File size must be less than 2MB");return}g(""),x(!0);try{let e=new FormData;e.append("image",a),e.append("postSlug",t);let r=await fetch("/api/posts/upload-image",{method:"POST",body:e}),l=await r.json();if(l.success){let e={name:a.name,path:l.imagePath,absolutePath:l.absolutePath,fullPath:l.fullPath,altText:""};d(t=>[...t,e]),s&&s(l.imagePath)}else g(l.error||"Upload failed")}catch(e){console.error("Upload error:",e),g("Failed to upload image")}finally{x(!1),h.current&&(h.current.value="")}},y=e=>{d(t=>t.filter((t,s)=>s!==e))},f=(e,t)=>{d(s=>s.map((s,r)=>r===e?{...s,altText:t}:s))},j=e=>'<img src="'.concat(e.path,'" alt="').concat(e.altText||e.name,'" className="w-full my-8 rounded-lg shadow-sm" />'),v=(e,t)=>{navigator.clipboard.writeText(e),p(t),setTimeout(()=>p(""),2e3)};return(0,r.jsxs)("div",{className:"space-y-4 ".concat(i),children:[(0,r.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(R.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{htmlFor:"image-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.Z,{className:"w-4 h-4 mr-2"}),"Upload Image"]})}),(0,r.jsx)("input",{ref:h,id:"image-upload",type:"file",className:"hidden",accept:"image/*",onChange:b,disabled:c})]}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"PNG, JPG, GIF, WebP up to 2MB"})]})}),m&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm",children:m}),o.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Uploaded Images"}),o.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(R.Z,{className:"w-5 h-5 text-gray-400"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 font-mono",children:e.path})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Alt Text (for accessibility)"}),(0,r.jsx)("input",{type:"text",value:e.altText,onChange:e=>f(t,e.target.value),placeholder:"Describe the image...",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>v(j(e),"html-".concat(t)),className:"text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 flex items-center",title:"Copy HTML tag",children:u==="html-".concat(t)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.Z,{className:"w-3 h-3 mr-1"}),"Copied HTML"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.Z,{className:"w-3 h-3 mr-1"}),"Copy HTML"]})}),(0,r.jsx)("button",{onClick:()=>v(e.path,"path-".concat(t)),className:"text-xs bg-gray-200 text-gray-700 px-3 py-1 rounded hover:bg-gray-300 flex items-center",title:"Copy path only",children:u==="path-".concat(t)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.Z,{className:"w-3 h-3 mr-1"}),"Copied"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.Z,{className:"w-3 h-3 mr-1"}),"Path"]})}),n&&(0,r.jsxs)("button",{onClick:()=>n(e.path),className:"text-xs bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 flex items-center",title:"Set as cover image",children:[(0,r.jsx)(R.Z,{className:"w-3 h-3 mr-1"}),"Cover"]})]}),(0,r.jsx)("button",{onClick:()=>y(t),className:"text-red-600 hover:text-red-800 p-1",title:"Remove from list",children:(0,r.jsx)(E.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"bg-white border rounded p-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Generated HTML:"}),(0,r.jsx)("code",{className:"text-xs bg-gray-100 p-1 rounded block overflow-x-auto",children:j(e)})]})]},t))]})]})}function U(e){let{isOpen:t,onClose:s,onSave:o}=e,[x,m]=(0,a.useState)(1),[g,u]=(0,a.useState)(!1),[p,b]=(0,a.useState)({topic:"",context:"",tone:"professional",contentType:"tutorial",length:"medium",keywords:[]}),[y,j]=(0,a.useState)({}),[v,N]=(0,a.useState)({title:"pending",outline:"pending",content:"pending",excerpt:"pending",tags:"pending"}),[w,k]=(0,a.useState)({slug:"",id:"",title:"",excerpt:"",content:"",author:"Abstract Algorithms",tags:[],categories:[],readingTime:"5 min read",date:new Date().toISOString().split("T")[0],status:"draft"}),[S,R]=(0,a.useState)(""),[F,U]=(0,a.useState)(""),[B,V]=(0,a.useState)(""),J=[{id:1,title:"Topic & Context",icon:D.Z},{id:2,title:"AI Generation",icon:h.Z},{id:3,title:"Review & Edit",icon:n.Z},{id:4,title:"Finalize",icon:f.Z}],q=e=>new Promise(t=>setTimeout(t,e)),G=()=>{S.trim()&&!p.keywords.includes(S.trim())&&(b(e=>({...e,keywords:[...e.keywords,S.trim()]})),R(""))},z=e=>{b(t=>({...t,keywords:t.keywords.filter(t=>t!==e)}))},W=async()=>{if(!p.topic.trim()){U("Please enter a topic");return}u(!0),U(""),N({title:"pending",outline:"pending",content:"pending",excerpt:"pending",tags:"pending"});try{await X()}catch(e){console.error("Error in generation process:",e),U("AI service may be unavailable. You can retry failed generations or edit the content manually.")}finally{u(!1)}},X=async()=>{await H(),await q(1e3);try{await K()}catch(e){console.warn("Outline generation failed, continuing with fallback")}await q(1e3),await Y(),await q(1e3);try{await Q()}catch(t){console.warn("Excerpt generation failed, using fallback");let e="A comprehensive guide to ".concat(w.title||p.topic);j(t=>({...t,excerpt:e})),k(t=>({...t,excerpt:e})),N(e=>({...e,excerpt:"success"}))}await q(1e3);try{await $()}catch(t){console.warn("Tags generation failed, using fallback");let e=[p.topic,p.contentType].filter(Boolean);j(t=>({...t,tags:e})),k(t=>({...t,tags:e})),N(e=>({...e,tags:"success"}))}},H=async()=>{if("success"!==v.title){N(e=>({...e,title:"generating"}));try{let e;let t=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"title",topic:p.topic,context:p.context,tone:p.tone,length:"short"})});if(!t.ok){let e=(await t.json()).error||"Failed to generate title";throw Error("AI Service Error: ".concat(e))}let s=await t.json();if(console.log("AI Response data:",s),console.log("Expected content field:",s.content),console.log("All response fields:",Object.keys(s)),Array.isArray(s.content)?(e=s.content[0],console.log("AI returned multiple title options:",s.content),console.log("Selected first option:",e)):e=s.content||s.text||s.result||s.title||s.generated_text,!e||"string"!=typeof e||!e.trim())throw console.error("Invalid response structure:",s),Error("Invalid title response from AI. Received: ".concat(JSON.stringify(s)));console.log("Successfully extracted title:",e),j(t=>({...t,title:e,titleOptions:Array.isArray(s.content)?s.content:[e]})),N(e=>({...e,title:"success"})),k(t=>({...t,title:e,slug:C(e)}))}catch(t){console.error("Error generating title:",t),N(e=>({...e,title:"error"}));let e=p.topic.trim()||"Untitled Post";j(t=>({...t,title:e})),k(t=>({...t,title:e,slug:C(e)})),U("Title generation failed: ".concat(t.message,". Using fallback title based on topic."))}}},K=async()=>{if("success"!==v.outline){N(e=>({...e,outline:"generating"}));try{let e=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"outline",topic:p.topic,context:p.context,contentType:p.contentType,length:p.length})});if(!e.ok)throw Error("Failed to generate outline");let t=await e.json();if(!t||"string"!=typeof t.content||!t.content.trim())throw Error("Invalid outline response from AI");j(e=>({...e,outline:t.content})),N(e=>({...e,outline:"success"}))}catch(e){console.error("Error generating outline:",e),N(e=>({...e,outline:"error"}))}}},Y=async()=>{if("success"!==v.content){N(e=>({...e,content:"generating"}));try{let e;let t=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"content",topic:p.topic,context:p.context,tone:p.tone,contentType:p.contentType,length:p.length,outline:y.outline||""})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to generate content")}let s=await t.json();if(Array.isArray(s.content)?(e=s.content[0],console.log("AI returned multiple content options, using first one")):e=s.content,!e||"string"!=typeof e||!e.trim())throw Error("Invalid content response from AI");j(t=>({...t,content:e})),N(e=>({...e,content:"success"})),k(t=>({...t,content:e}))}catch(t){console.error("Error generating content:",t),N(e=>({...e,content:"error"}));let e="# ".concat(w.title||p.topic,"\n\n## Introduction\n\nThis post covers ").concat(p.topic,".\n\n").concat(p.context?"## Context\n\n".concat(p.context):"","\n\n## Content\n\nPlease edit this section to add your content.\n\n## Conclusion\n\nThis concludes our discussion on ").concat(p.topic,".");j(t=>({...t,content:e})),k(t=>({...t,content:e})),U("Content generation failed: ".concat(t.message,". Using fallback content structure."))}}},Q=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||"success"!==v.excerpt){N(e=>({...e,excerpt:"generating"}));try{let e=y.content||w.content||"";console.log("Generating excerpt with content length:",e.length),console.log("Topic:",p.topic);let t=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"excerpt",topic:p.topic,content:e,length:"short"})});if(!t.ok){let e=await t.json();throw Error("Failed to generate excerpt: ".concat(e.error||t.statusText))}let s=await t.json();if(console.log("Excerpt API response:",s),!s||"string"!=typeof s.content||!s.content.trim())throw Error("Invalid excerpt response from AI");j(e=>({...e,excerpt:s.content})),N(e=>({...e,excerpt:"success"})),k(e=>({...e,excerpt:s.content}))}catch(t){console.error("Error generating excerpt:",t),N(e=>({...e,excerpt:"error"}));let e="Explore ".concat(p.topic," in this comprehensive guide covering key concepts, practical examples, and best practices.");j(t=>({...t,excerpt:e})),k(t=>({...t,excerpt:e})),t.message.includes("Invalid excerpt response")?U("Excerpt generation failed: AI returned invalid response. Using fallback excerpt. You can retry for AI-generated content."):U("Excerpt generation failed: ".concat(t.message,". Using fallback excerpt. You can retry for AI-generated content."))}}},$=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||"success"!==v.tags){N(e=>({...e,tags:"generating"}));try{let e=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"tags",topic:p.topic,content:y.content||w.content||"",keywords:p.keywords})});if(!e.ok)throw Error("Failed to generate tags");let t=await e.json();if(!t||!Array.isArray(t.content))throw Error("Invalid tags response from AI");j(e=>({...e,tags:t.content||[]})),N(e=>({...e,tags:"success"})),k(e=>({...e,tags:t.content||[]}))}catch(t){console.error("Error generating tags:",t),N(e=>({...e,tags:"error"}));let e=p.keywords.length>0?p.keywords:[p.topic.toLowerCase().replace(/\s+/g,"-"),"tutorial","guide"];j(t=>({...t,tags:e})),k(t=>({...t,tags:e})),U("Tags generation failed: ".concat(t.message,". Using fallback tags. You can retry for AI-generated tags."))}}},ee=async e=>{switch(U(""),N(t=>({...t,[e]:"pending"})),await q(500),e){case"title":await H();break;case"outline":await K();break;case"content":await Y();break;case"excerpt":await Q(!0);break;case"tags":await $(!0)}},et=async()=>{U("");let e=Object.entries(v).filter(e=>{let[t,s]=e;return"error"===s}).map(e=>{let[t,s]=e;return t}),t=["title","outline","content","excerpt","tags"],s=e.sort((e,s)=>t.indexOf(e)-t.indexOf(s));for(let e of s)await ee(e),s.indexOf(e)<s.length-1&&await q(1e3)},es=async e=>{for(let t of(U(""),({title:[],outline:["title"],content:["title","outline"],excerpt:["title","content"],tags:["title","content"]})[e]))"success"!==v[t]&&(await ee(t),await q(1e3));await ee(e)},er=()=>"success"===v.title&&"success"===v.content,ea=(e,t)=>{navigator.clipboard.writeText(e),V(t),setTimeout(()=>V(""),2e3)};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-xl shadow-2xl max-w-7xl w-full max-h-[95vh] flex flex-col border border-white/20 dark:border-gray-700/30",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-t-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"bg-white/20 p-2 rounded-lg",children:(0,r.jsx)(h.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"AI Post Creator"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Create high-quality content with AI assistance"})]})]}),(0,r.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,r.jsx)(E.Z,{className:"w-6 h-6"})})]}),(0,r.jsx)("div",{className:"mt-6 flex items-center justify-between",children:J.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full transition-all ".concat(x>=e.id?"bg-white text-purple-600 shadow-lg":"bg-white/20 text-white hover:bg-white/30"),children:x>e.id?(0,r.jsx)(T.Z,{className:"w-5 h-5"}):(0,r.jsx)(e.icon,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("div",{className:"font-medium transition-colors ".concat(x>=e.id?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"),children:e.title}),x===e.id&&(0,r.jsx)("div",{className:"text-purple-400 text-xs mt-1",children:"Current Step"})]}),t<J.length-1&&(0,r.jsx)("div",{className:"w-16 h-0.5 mx-4 transition-all ".concat(x>e.id?"bg-white shadow-sm":"bg-white/20")})]},e.id))})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 min-h-0",children:[F&&(0,r.jsxs)("div",{className:"mb-4 p-4 border rounded-lg flex items-center ".concat(F.includes("AI service may be unavailable")?"bg-amber-50 dark:bg-amber-900/30 border-amber-200 dark:border-amber-700":"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700"),children:[(0,r.jsx)(P.Z,{className:"w-5 h-5 mr-3 ".concat(F.includes("AI service may be unavailable")?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400")}),(0,r.jsx)("span",{className:"".concat(F.includes("AI service may be unavailable")?"text-amber-700 dark:text-amber-300":"text-red-700 dark:text-red-300"),children:F})]}),1===x&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Topic *"}),(0,r.jsx)("input",{type:"text",value:p.topic,onChange:e=>b(t=>({...t,topic:e.target.value})),className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"e.g., Machine Learning with Python"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Context & Background"}),(0,r.jsx)("textarea",{value:p.context,onChange:e=>b(t=>({...t,context:e.target.value})),rows:4,className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Provide additional context, target audience, specific requirements..."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content Type"}),(0,r.jsx)("select",{value:p.contentType,onChange:e=>b(t=>({...t,contentType:e.target.value})),className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[{value:"tutorial",label:"Tutorial",description:"Step-by-step guide"},{value:"guide",label:"Guide",description:"Comprehensive overview"},{value:"analysis",label:"Analysis",description:"Deep technical analysis"},{value:"news",label:"News",description:"Latest developments"},{value:"opinion",label:"Opinion",description:"Thought leadership"}].map(e=>(0,r.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tone"}),(0,r.jsx)("select",{value:p.tone,onChange:e=>b(t=>({...t,tone:e.target.value})),className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[{value:"professional",label:"Professional",description:"Formal and authoritative"},{value:"casual",label:"Casual",description:"Conversational and friendly"},{value:"technical",label:"Technical",description:"Detailed and precise"}].map(e=>(0,r.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Length"}),(0,r.jsx)("select",{value:p.length,onChange:e=>b(t=>({...t,length:e.target.value})),className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[{value:"short",label:"Short",description:"500-1000 words"},{value:"medium",label:"Medium",description:"1000-2000 words"},{value:"long",label:"Long",description:"2000+ words"}].map(e=>(0,r.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Keywords"}),(0,r.jsxs)("div",{className:"flex space-x-2 mb-2",children:[(0,r.jsx)("input",{type:"text",value:S,onChange:e=>R(e.target.value),onKeyPress:e=>"Enter"===e.key&&G(),className:"flex-1 px-4 py-2 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Add keyword..."}),(0,r.jsx)("button",{onClick:G,className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg shadow-purple-500/25",children:"Add"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:p.keywords.map(e=>(0,r.jsxs)("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-3 py-1 rounded-full text-sm flex items-center",children:[e,(0,r.jsx)("button",{onClick:()=>z(e),className:"ml-2 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",children:(0,r.jsx)(E.Z,{className:"w-4 h-4"})})]},e))})]})]}),2===x&&(0,r.jsx)("div",{className:"space-y-6",children:g?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,r.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900 p-4 rounded-full",children:(0,r.jsx)(l.Z,{className:"w-12 h-12 text-purple-600 dark:text-purple-400 animate-spin"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Generating your content..."}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Our AI is creating high-quality content based on your specifications."})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 rounded-lg p-6 border border-purple-100 dark:border-purple-800/30",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(n.Z,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Title"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:["generating"===v.title&&(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin text-purple-600 dark:text-purple-400"}),"success"===v.title&&(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"error"===v.title&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),(0,r.jsx)("button",{onClick:()=>ee("title"),className:"text-xs bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 px-2 py-1 rounded hover:bg-red-200 dark:hover:bg-red-800",children:"Retry"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Outline"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:["generating"===v.outline&&(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin text-purple-600 dark:text-purple-400"}),"success"===v.outline&&(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"error"===v.outline&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),(0,r.jsx)("button",{onClick:()=>ee("outline"),className:"text-xs bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 px-2 py-1 rounded hover:bg-red-200 dark:hover:bg-red-800",children:"Retry"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Content"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:["generating"===v.content&&(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin text-purple-600 dark:text-purple-400"}),"success"===v.content&&(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"error"===v.content&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),(0,r.jsx)("button",{onClick:()=>ee("content"),className:"text-xs bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 px-2 py-1 rounded hover:bg-red-200 dark:hover:bg-red-800",children:"Retry"}),(0,r.jsx)("button",{onClick:()=>es("content"),className:"text-xs bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300 px-2 py-1 rounded hover:bg-amber-200 dark:hover:bg-amber-800",title:"Retry with dependencies (title, outline)",children:"Smart Retry"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(Z.Z,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Excerpt"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:["generating"===v.excerpt&&(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin text-purple-600 dark:text-purple-400"}),"success"===v.excerpt&&(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"error"===v.excerpt&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),(0,r.jsx)("button",{onClick:()=>ee("excerpt"),className:"text-xs bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 px-2 py-1 rounded hover:bg-red-200 dark:hover:bg-red-800",children:"Retry"}),(0,r.jsx)("button",{onClick:()=>es("excerpt"),className:"text-xs bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300 px-2 py-1 rounded hover:bg-amber-200 dark:hover:bg-amber-800",title:"Retry with dependencies (title, content)",children:"Smart Retry"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(A.Z,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Tags"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:["generating"===v.tags&&(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin text-purple-600 dark:text-purple-400"}),"success"===v.tags&&(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"error"===v.tags&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),(0,r.jsx)("button",{onClick:()=>ee("tags"),className:"text-xs bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 px-2 py-1 rounded hover:bg-red-200 dark:hover:bg-red-800",children:"Retry"}),(0,r.jsx)("button",{onClick:()=>es("tags"),className:"text-xs bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300 px-2 py-1 rounded hover:bg-amber-200 dark:hover:bg-amber-800",title:"Retry with dependencies (title, content)",children:"Smart Retry"})]})]})]})]}),Object.values(v).some(e=>"error"===e)&&!g&&(0,r.jsxs)("div",{className:"flex justify-center gap-3 mt-4",children:[(0,r.jsxs)("button",{onClick:et,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"Retry All Failed"]}),(0,r.jsxs)("button",{onClick:()=>{Object.entries(v).filter(e=>{let[t,s]=e;return"error"===s}).map(e=>{let[t,s]=e;return t}).forEach(async e=>{await es(e)})},className:"flex items-center px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors",children:[(0,r.jsx)(I.Z,{className:"w-4 h-4 mr-2"}),"Smart Retry"]})]}),er()&&!g&&(0,r.jsx)("div",{className:"flex justify-center mt-4",children:(0,r.jsxs)("button",{onClick:()=>m(3),className:"flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Proceed to Review"]})}),!er()&&Object.values(v).some(e=>"success"===e)&&!g&&(0,r.jsx)("div",{className:"flex justify-center mt-4",children:(0,r.jsxs)("button",{onClick:()=>m(3),className:"flex items-center px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 mr-2"}),"Proceed Anyway"]})})]})]}):(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900 p-4 rounded-full",children:(0,r.jsx)(h.Z,{className:"w-12 h-12 text-purple-600 dark:text-purple-400"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Ready to generate content"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Click the button below to start AI content generation."})]}),(0,r.jsxs)("button",{onClick:W,className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-8 py-4 rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all font-medium text-lg shadow-lg hover:shadow-xl transform hover:scale-105",children:[(0,r.jsx)(O.Z,{className:"w-5 h-5 mr-2 inline"}),"Generate Content"]})]})}),3===x&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),(0,r.jsx)("button",{onClick:()=>ea(w.title,"title"),className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",children:"title"===B?(0,r.jsx)(T.Z,{className:"w-4 h-4"}):(0,r.jsx)(M.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)("input",{type:"text",value:w.title,onChange:e=>k(t=>({...t,title:e.target.value})),className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"}),y.titleOptions&&y.titleOptions.length>1&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Other AI-generated options:"}),(0,r.jsx)("div",{className:"space-y-1",children:y.titleOptions.slice(1).map((e,t)=>(0,r.jsx)("button",{onClick:()=>k(t=>({...t,title:e,slug:C(e)})),className:"w-full text-left p-2 text-sm bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 hover:from-purple-100 hover:to-pink-100 dark:hover:from-purple-800/40 dark:hover:to-pink-800/40 rounded border border-purple-200 dark:border-purple-700 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-200",children:e},t))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Excerpt"}),(0,r.jsx)("button",{onClick:()=>ea(w.excerpt,"excerpt"),className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",children:"excerpt"===B?(0,r.jsx)(T.Z,{className:"w-4 h-4"}):(0,r.jsx)(M.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)("textarea",{value:w.excerpt,onChange:e=>k(t=>({...t,excerpt:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:w.tags.map(e=>(0,r.jsxs)("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-3 py-1 rounded-full text-sm flex items-center",children:[e,(0,r.jsx)("button",{onClick:()=>k(t=>({...t,tags:t.tags.filter(t=>t!==e)})),className:"ml-2 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",children:(0,r.jsx)(E.Z,{className:"w-4 h-4"})})]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Content"}),(0,r.jsx)("button",{onClick:()=>ea(w.content,"content"),className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",children:"content"===B?(0,r.jsx)(T.Z,{className:"w-4 h-4"}):(0,r.jsx)(M.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)("textarea",{value:w.content,onChange:e=>k(t=>({...t,content:e.target.value})),rows:20,className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 font-mono text-sm"})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Images"}),(0,r.jsx)(_,{postSlug:w.slug||C(w.title),onImageUploaded:e=>{},onCoverImageSet:e=>{k(t=>({...t,coverImage:e}))}})]})]}),4===x&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"bg-green-100 dark:bg-green-900 p-4 rounded-full",children:(0,r.jsx)(f.Z,{className:"w-12 h-12 text-green-600 dark:text-green-400"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Content ready to save"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Your AI-generated post is ready. Review the final details and save."})]}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 p-4 rounded-lg text-left border border-purple-200 dark:border-purple-700/30",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Title:"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:w.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Words:"}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[w.content.split(" ").length," words"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Tags:"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:w.tags.join(", ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Status:"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Draft"})]})]})})]})]}),(0,r.jsx)("div",{className:"border-t border-purple-200 dark:border-purple-700/30 p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:x>1&&(0,r.jsx)("button",{onClick:()=>m(x-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Back"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:s,className:"px-6 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),x<4?(0,r.jsx)("button",{onClick:()=>{1===x?m(2):2===x?er()?m(3):W():3===x&&m(4)},disabled:1===x&&!p.topic.trim()||2===x&&g,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg shadow-purple-500/25 disabled:opacity-50 disabled:cursor-not-allowed",children:2===x?er()?"Continue to Review":"Generate":"Next"}):(0,r.jsxs)("button",{onClick:()=>{if(!w.title.trim()||!w.content.trim()){U("Title and content are required");return}o({...w,id:"",slug:w.slug||C(w.title),author:w.author||"Abstract Algorithms",excerpt:w.excerpt||"A comprehensive guide to ".concat(w.title),tags:w.tags||[],categories:w.categories||[],readingTime:w.readingTime||"5 min read",status:"draft",type:"post",date:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),s()},className:"flex items-center px-6 py-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg hover:from-emerald-600 hover:to-teal-600 transition-all duration-200 shadow-lg shadow-emerald-500/25",children:[(0,r.jsx)(L.Z,{className:"w-4 h-4 mr-2"}),"Save Post"]})]})]})})]})}):null}var B=s(94467),V=s(42208),J=s(70525),q=s(31047),G=s(84603),z=s(31444);function W(){let{user:e}=(0,G.a)(),[t,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(0),[i,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[x,m]=(0,a.useState)(null),[g,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e&&p(),h()},[e]);let p=async()=>{try{if(o(!0),c(null),console.log("\uD83D\uDD04 Loading views data from server..."),e){let t=await e.getIdToken(),r=await z.H.getAllViews(t);if(r.success)console.log("✅ Loaded views data from server:",r),s(r.posts||[]),n(r.totalViews||0);else throw Error(r.error||"Failed to load views data")}}catch(e){console.error("❌ Error loading views data:",e),c(e instanceof Error?e.message:"Failed to load views data")}finally{o(!1)}},h=async()=>{try{m({fileBasedDataExists:!0,fileBasedPostsCount:0,firestorePostsCount:0,migrationNeeded:!0})}catch(e){console.error("Error checking migration status:",e)}},b=async()=>{try{u(!0);let e=await z.H.migrateViews({});e.success?(alert("Migration completed! ".concat(e.message||"Views data migrated successfully.")),await h(),window.location.reload()):alert("Migration failed: ".concat(e.error))}catch(e){console.error("Migration error:",e),alert("Migration failed. Check console for details.")}finally{u(!1)}};if(i)return(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4 w-48"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsx)("div",{className:"h-20 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]}),(0,r.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"h-12 bg-gray-200 rounded"},e))})]})});if(d)return(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:(0,r.jsxs)("div",{className:"text-center text-gray-500",children:[(0,r.jsx)(V.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,r.jsx)("p",{children:"Unable to load analytics"}),(0,r.jsx)("p",{className:"text-sm text-red-500 mt-2",children:d})]})});let y=[...t].sort((e,t)=>t.views-e.views).slice(0,10),f=t.length>0?Math.round(l/t.length):0,j=t.filter(e=>e.views>0).length;return(0,r.jsxs)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm",children:[(null==x?void 0:x.migrationNeeded)&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(P.Z,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Migration Available"}),(0,r.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:["Found ",x.fileBasedPostsCount," posts with views data in file storage. Migrate to Firestore for better performance and reliability."]}),(0,r.jsx)("button",{onClick:b,disabled:g,className:"mt-3 px-4 py-2 bg-gradient-to-r from-yellow-500 to-amber-500 text-white text-sm rounded-md hover:from-yellow-600 hover:to-amber-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:g?"Migrating...":"Migrate to Firestore"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent flex items-center",children:[(0,r.jsx)(J.Z,{className:"w-5 h-5 mr-2 text-blue-600"}),"Views Analytics"]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),x?"Firestore (".concat(x.firestorePostsCount," posts)"):"Real-time data"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,r.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Total Views"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:l.toLocaleString()})]}),(0,r.jsx)(V.Z,{className:"w-8 h-8 text-blue-500"})]})}),(0,r.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Posts with Views"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:j})]}),(0,r.jsx)(J.Z,{className:"w-8 h-8 text-green-500"})]})}),(0,r.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Average Views"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:f})]}),(0,r.jsx)(q.Z,{className:"w-8 h-8 text-purple-500"})]})}),(0,r.jsx)("div",{className:"bg-orange-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-orange-600",children:"Total Posts"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:t.length})]}),(0,r.jsx)(Z.Z,{className:"w-8 h-8 text-orange-500"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Posts"}),0===y.length?(0,r.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,r.jsx)(V.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"No views recorded yet"}),(0,r.jsx)("p",{className:"text-sm",children:"Views will appear here once visitors start reading your posts."})]}):(0,r.jsx)("div",{className:"space-y-3",children:y.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"\n                    flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold\n                    ".concat(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-200 text-gray-700":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800","\n                  "),children:t+1}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.id.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.id}),e.lastViewed&&(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["Last viewed: ",new Date(e.lastViewed).toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.views.toLocaleString()}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"views"})]}),(0,r.jsx)(V.Z,{className:"w-4 h-4 text-gray-400"})]})]},e.id))})]}),t.length>0&&(0,r.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"View Distribution"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>0===e.views).length}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"No Views"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>e.views>0&&e.views<100).length}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"1-99 Views"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>e.views>=100).length}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"100+ Views"})]})]})]})]})}var X=s(89345),H=s(92735),K=s(95805),Y=s(62189);function Q(){let{user:e}=(0,G.a)(),[t,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(0),[o,d]=(0,a.useState)(!0),[c,x]=(0,a.useState)(null),[m,g]=(0,a.useState)(null),[u,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e&&(h(),b())},[e]);let h=async()=>{try{if(d(!0),x(null),console.log("\uD83D\uDD04 Loading subscribers from server..."),e){let t=await e.getIdToken(),r=await Y.A.getSubscribers(t);if(r.success)console.log("✅ Loaded subscribers from server:",r),s(r.subscribers||[]),n(r.totalCount||0);else throw Error(r.error||"Failed to load subscribers")}}catch(e){console.error("❌ Error loading subscribers:",e),x(e instanceof Error?e.message:"Failed to load subscribers")}finally{d(!1)}},b=async()=>{p(!0);try{if(console.log("\uD83D\uDCCA Loading subscription analytics from server..."),e){let t=await e.getIdToken(),s=await Y.A.getSubscriptionAnalytics(t);if(s.success)console.log("✅ Loaded analytics from server:",s),g(s.analytics);else throw Error(s.error||"Failed to load analytics")}}catch(e){console.error("❌ Error fetching analytics:",e)}finally{p(!1)}},y=()=>{h(),b()};return o&&!t.length?(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-8 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)(i.Z,{className:"h-5 w-5 animate-spin text-purple-400"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Loading subscription data..."})]})}):c?(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-8 shadow-sm",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-red-600 mb-4",children:[(0,r.jsx)(X.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{className:"font-medium",children:"Error Loading Subscriptions"})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,r.jsx)("button",{onClick:y,className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-all duration-200 shadow-sm hover:shadow-md",children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Subscription Analytics"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your email subscribers and track growth"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{onClick:y,disabled:o||u,className:"flex items-center space-x-2 px-4 py-2 bg-white/80 border border-gray-300 rounded-lg hover:bg-white hover:shadow-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 transition-all duration-200",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 ".concat(o||u?"animate-spin":"")}),(0,r.jsx)("span",{children:"Refresh"})]}),(0,r.jsxs)("button",{onClick:()=>{if(0===t.length)return;let e=new Blob([[["Email","Status","Subscribed At","Source"],...t.map(e=>[e.email,e.status,new Date(e.subscribedAt).toLocaleDateString(),e.source||"unknown"])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download="subscribers-".concat(new Date().toISOString().split("T")[0],".csv"),r.click(),window.URL.revokeObjectURL(s)},disabled:0===t.length,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,r.jsx)(H.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Export CSV"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Subscribers"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:l})]}),(0,r.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-100 to-cyan-100 rounded-full",children:(0,r.jsx)(K.Z,{className:"h-6 w-6 text-blue-600"})})]})}),(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Subscribers"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:t.filter(e=>"active"===e.status).length})]}),(0,r.jsx)("div",{className:"p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full",children:(0,r.jsx)(X.Z,{className:"h-6 w-6 text-green-600"})})]})}),(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==m?void 0:m.recentSubscriptions)||0})]}),(0,r.jsx)("div",{className:"p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full",children:(0,r.jsx)(q.Z,{className:"h-6 w-6 text-purple-600"})})]})}),(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Growth Rate"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==m?void 0:m.growthRate)?"".concat(m.growthRate,"%"):"0%"})]}),(0,r.jsx)("div",{className:"p-3 bg-gradient-to-r from-yellow-100 to-amber-100 rounded-full",children:(0,r.jsx)(J.Z,{className:"h-6 w-6 text-yellow-600"})})]})})]}),(0,r.jsxs)("div",{className:"bg-white/80 border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Subscribers"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscribed"})]})}),(0,r.jsx)("tbody",{className:"bg-white/50 divide-y divide-gray-200",children:t.length>0?t.slice(0,10).map((e,t)=>(0,r.jsxs)("tr",{className:"hover:bg-white/80 transition-colors duration-150",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.source||"website"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(e.subscribedAt).toLocaleDateString()})]},t)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No subscribers found"})})})]})}),t.length>10&&(0,r.jsx)("div",{className:"px-6 py-3 bg-gradient-to-r from-gray-50 to-gray-100 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing 10 of ",t.length," subscribers"]})})]}),(null==m?void 0:m.topSources)&&m.topSources.length>0&&(0,r.jsxs)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Subscription Sources"}),(0,r.jsx)("div",{className:"space-y-3",children:m.topSources.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:e.source}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"bg-gray-200 rounded-full h-2 w-24",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.count/Math.max(...m.topSources.map(e=>e.count))*100,"%")}})}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:e.count})]})]},t))})]})]})}var $=s(5978),ee=s(46410);class et{async getPostViews(e){try{let s=(0,$.JU)(ee.db,this.COLLECTION_NAME,e),r=await (0,$.QT)(s);if(!r.exists())return{slug:e,views:0,lastViewed:new Date().toISOString(),dailyViews:{}};{var t;let s=r.data();return{slug:e,views:s.count||0,lastViewed:(null===(t=s.lastViewed)||void 0===t?void 0:t.toDate().toISOString())||new Date().toISOString(),dailyViews:s.dailyViews||{}}}}catch(e){throw console.error("Error getting post views:",e),Error("Failed to get post views")}}async getAllPostViews(){try{let e=(0,$.IO)((0,$.hJ)(ee.db,this.COLLECTION_NAME),(0,$.Xo)("count","desc")),t=await (0,$.PL)(e),s=[],r=0;return t.forEach(e=>{var t;let a=e.data(),l={slug:e.id,views:a.count||0,lastViewed:(null===(t=a.lastViewed)||void 0===t?void 0:t.toDate().toISOString())||new Date().toISOString(),dailyViews:a.dailyViews||{}};s.push(l),r+=l.views}),{posts:s,totalViews:r}}catch(e){throw console.error("Error getting all post views:",e),Error("Failed to get all post views")}}async incrementPostViews(e){try{let t=(0,$.JU)(ee.db,this.COLLECTION_NAME,e),s=$.EK.now(),r=new Date().toISOString().split("T")[0],a=await (0,$.QT)(t);if(a.exists()){let l=a.data(),n=l.dailyViews||{};n[r]=(n[r]||0)+1;let i=new Date;i.setDate(i.getDate()-30);let o=i.toISOString().split("T")[0];return Object.keys(n).forEach(e=>{e<o&&delete n[e]}),await (0,$.r7)(t,{count:(0,$.nP)(1),lastViewed:s,dailyViews:n,updatedAt:s}),{slug:e,views:(l.count||0)+1,lastViewed:s.toDate().toISOString(),dailyViews:n}}{let a={[r]:1};return await (0,$.pl)(t,{count:1,lastViewed:s,dailyViews:a,createdAt:s,updatedAt:s}),{slug:e,views:1,lastViewed:s.toDate().toISOString(),dailyViews:a}}}catch(e){throw console.error("Error incrementing post views:",e),Error("Failed to increment post views")}}async getAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;try{let{posts:t,totalViews:s}=await this.getAllPostViews(),r=new Date().toISOString().split("T")[0],a=0,l={};t.forEach(e=>{e.dailyViews&&(a+=e.dailyViews[r]||0,Object.entries(e.dailyViews).forEach(e=>{let[t,s]=e;l[t]=(l[t]||0)+s}))});let n=[];for(let t=e-1;t>=0;t--){let e=new Date;e.setDate(e.getDate()-t);let s=e.toISOString().split("T")[0];n.push({date:s,views:l[s]||0})}let i=t.slice(0,10);return{totalViews:s,viewsToday:a,topPosts:i,dailyTrend:n}}catch(e){throw console.error("Error getting analytics:",e),Error("Failed to get analytics")}}async migrateFromFileData(e){try{let t=[];for(let[s,r]of Object.entries(e)){let e=(0,$.JU)(ee.db,this.COLLECTION_NAME,s),a={count:r.count||0,lastViewed:r.lastViewed?$.EK.fromDate(new Date(r.lastViewed)):$.EK.now(),dailyViews:r.dailyViews||{},createdAt:$.EK.now(),updatedAt:$.EK.now()};t.push((0,$.pl)(e,a))}await Promise.all(t),console.log("Successfully migrated ".concat(t.length," posts to Firestore"))}catch(e){throw console.error("Error migrating data to Firestore:",e),Error("Failed to migrate data to Firestore")}}constructor(){this.COLLECTION_NAME="post-views"}}let es=new et;function er(e){let{localStats:t}=e,[s,l]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[c,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{m()},[]);let m=async()=>{try{d(!0),x(null);let{posts:e,totalViews:t}=await es.getAllPostViews(),s=await es.getAnalytics(7);l({totalPosts:e.length,totalViews:t,viewsToday:s.viewsToday,topPosts:s.topPosts.slice(0,5),dailyTrend:s.dailyTrend})}catch(e){console.error("Error loading Firestore stats:",e),x(e instanceof Error?e.message:"Failed to load stats"),l({totalPosts:0,totalViews:0,viewsToday:0,topPosts:[],dailyTrend:[]})}finally{d(!1)}};if(o)return(0,r.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(e=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})]},e))});if(c)return(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(n.Z,{className:"w-5 h-5 text-red-600 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-900",children:"Stats Error"})]}),(0,r.jsx)("p",{className:"text-red-700 mb-4",children:c}),(0,r.jsx)("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Retry"})]});let g=(null==s?void 0:s.dailyTrend.reduce((e,t)=>e+t.views,0))||0;return(0,r.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Content Analytics"}),(0,r.jsxs)("div",{className:"ml-2 flex items-center text-sm text-gray-500",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4 mr-1"}),"Local files + Firestore views"]})]}),(0,r.jsxs)("button",{onClick:m,disabled:o,className:"flex items-center px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 mr-2 ".concat(o?"animate-spin":"")}),"Refresh Stats"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t.totalPosts}),(0,r.jsx)(n.Z,{className:"w-5 h-5 text-gray-600"})]}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"Total Posts (Local)"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:t.drafts}),(0,r.jsx)(n.Z,{className:"w-5 h-5 text-amber-600"})]}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"Drafts"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.published}),(0,r.jsx)(n.Z,{className:"w-5 h-5 text-green-600"})]}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"Published"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:(null==s?void 0:s.totalPosts)||0}),(0,r.jsx)(V.Z,{className:"w-5 h-5 text-blue-600"})]}),(0,r.jsx)("div",{className:"text-blue-700 text-sm",children:"Posts in Firestore"})]})]}),s&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-emerald-50 rounded-xl p-6 border border-emerald-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-emerald-900",children:s.totalViews.toLocaleString()}),(0,r.jsx)(J.Z,{className:"w-5 h-5 text-emerald-600"})]}),(0,r.jsx)("div",{className:"text-emerald-700 text-sm",children:"Total Views"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-xl p-6 border border-purple-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:s.viewsToday.toLocaleString()}),(0,r.jsx)(q.Z,{className:"w-5 h-5 text-purple-600"})]}),(0,r.jsx)("div",{className:"text-purple-700 text-sm",children:"Views Today"})]}),(0,r.jsxs)("div",{className:"bg-orange-50 rounded-xl p-6 border border-orange-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-900",children:Math.round(g/7).toLocaleString()}),(0,r.jsx)(J.Z,{className:"w-5 h-5 text-orange-600"})]}),(0,r.jsx)("div",{className:"text-orange-700 text-sm",children:"Avg Views/Day (7d)"})]})]}),s&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4 mr-2 text-gray-600"}),"Data Source Comparison"]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Local Files"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-700 mt-1",children:t.totalPosts}),(0,r.jsx)("div",{className:"text-gray-500",children:"Posts Scanned"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Firestore"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-700 mt-1",children:s.totalPosts}),(0,r.jsx)("div",{className:"text-gray-500",children:"Posts with Views"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Coverage"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-emerald-700 mt-1",children:[t.totalPosts>0?Math.round(s.totalPosts/t.totalPosts*100):0,"%"]}),(0,r.jsx)("div",{className:"text-gray-500",children:"Tracked Posts"})]})]})]}),s&&s.topPosts.length>0&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)(J.Z,{className:"w-5 h-5 mr-2 text-gray-600"}),"Top Posts by Views"]}),(0,r.jsx)("div",{className:"space-y-3",children:s.topPosts.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-xs font-medium text-gray-600 mr-3",children:t+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 truncate max-w-xs",children:e.slug.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Last viewed: ",new Date(e.lastViewed).toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900",children:e.views.toLocaleString()}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"views"})]})]},e.slug))})]}),s&&s.dailyTrend.length>0&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)(q.Z,{className:"w-5 h-5 mr-2 text-gray-600"}),"7-Day Views Trend"]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-2",children:s.dailyTrend.map(e=>{let t=Math.max(...s.dailyTrend.map(e=>e.views)),a=t>0?Math.max(e.views/t*100,5):5;return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)("div",{className:"bg-blue-200 rounded-t mx-auto",style:{height:"".concat(a,"px"),width:"24px"},title:"".concat(e.views," views on ").concat(e.date)})}),(0,r.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:e.views}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.date).toLocaleDateString("en",{weekday:"short"})})]},e.date)})})]})]})}var ea=s(40257);function el(){return(0,a.useEffect)(()=>{let e;console.log("\uD83D\uDD0D Environment Debug Info:"),console.log("NODE_ENV:","production"),console.log("NEXT_PUBLIC_SERVER_URL:",ea.env.NEXT_PUBLIC_SERVER_URL);let t=ea.env.NEXT_PUBLIC_SERVER_URL;console.log("Resolved Server URL:",e=t?t.includes("/.netlify/functions")?t.replace("/.netlify/functions",""):t:"https://abstractalgorithms-server.netlify.app"),console.log("Final API URL would be:","".concat(e,"/.netlify/functions/save-views"))},[]),null}var en=s(40257);function ei(){let[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)("");return(0,a.useEffect)(()=>{l(en.env.NEXT_PUBLIC_SERVER_URL||"NOT_SET"),t((()=>{let e=en.env.NEXT_PUBLIC_SERVER_URL;return e?e.includes("/.netlify/functions")?e.replace("/.netlify/functions",""):e:"https://abstractalgorithms-server.netlify.app"})())},[]),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded-xl mb-4 shadow-sm",children:[(0,r.jsx)("strong",{children:"\uD83D\uDD0D Server URL Debug:"}),(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Raw ENV Variable:"})," ",s,(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Resolved Server URL:"})," ",e,(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"NODE_ENV:"})," ","production",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Final API URL would be:"})," ",e,"/.netlify/functions/save-views"]})}var eo=s(76858),ed=s(62720),ec=s(96362),ex=s(10407),em=s(48664),eg=s(98646);function eu(){let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)(!0),[i,x]=(0,a.useState)("30d");(0,a.useEffect)(()=>{m()},[i]);let m=async()=>{try{l(!0);let e=Object.values(eg.R0),s=e.length,r=e.filter(e=>"published"===e.status).length,a=e.filter(e=>"draft"===e.status).length,n=e.filter(e=>e.parts&&e.parts.length===e.total).length,i=e.reduce((e,t)=>e+t.total,0),o={};e.forEach(e=>{var t;let s=(null===(t=e.parts)||void 0===t?void 0:t.length)||0,r=e.total;o[e.id]={completed:s,total:r,percentage:r>0?Math.round(s/r*100):0}});let d=e.slice(0,5).map(e=>({name:e.name,views:Math.floor(1e4*Math.random())+1e3,engagement:Math.floor(80*Math.random())+20}));t({totalSeries:s,publishedSeries:r,draftSeries:a,completedSeries:n,totalParts:i,averagePartsPerSeries:s>0?Math.round(i/s*10)/10:0,seriesCompletionRate:s>0?Math.round(n/s*100):0,recentSeriesActivity:[{seriesName:"AI Agent Development",action:"updated",date:"2025-01-01"},{seriesName:"System Design Blueprint",action:"created",date:"2024-12-30"},{seriesName:"Database Mastery",action:"published",date:"2024-12-28"}],topPerformingSeries:d,seriesProgress:o})}catch(e){console.error("Error loading series analytics:",e)}finally{l(!1)}};return s||!e?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading analytics..."})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,r.jsx)(y.Z,{className:"w-7 h-7 mr-3 text-blue-600"}),"Series Analytics"]}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Insights and performance metrics for your content series"})]}),(0,r.jsxs)("select",{value:i,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[(0,r.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,r.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,r.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,r.jsx)("option",{value:"all",children:"All time"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(ep,{title:"Total Series",value:e.totalSeries,icon:o.Z,color:"blue",trend:"+2 this month"}),(0,r.jsx)(ep,{title:"Published Series",value:e.publishedSeries,icon:f.Z,color:"green",trend:"".concat(Math.round(e.publishedSeries/e.totalSeries*100),"% of total")}),(0,r.jsx)(ep,{title:"Total Parts",value:e.totalParts,icon:n.Z,color:"purple",trend:"".concat(e.averagePartsPerSeries," avg per series")}),(0,r.jsx)(ep,{title:"Completion Rate",value:"".concat(e.seriesCompletionRate,"%"),icon:c.Z,color:"orange",trend:"".concat(e.completedSeries," completed")})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Series Progress Overview"}),(0,r.jsx)("div",{className:"space-y-4",children:Object.entries(e.seriesProgress).map(e=>{let[t,s]=e,a=Object.values(eg.R0).find(e=>e.id===t);return a?(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[s.completed," of ",s.total," parts completed"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-32",children:(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(100===s.percentage?"bg-green-500":s.percentage>=50?"bg-blue-500":"bg-yellow-500"),style:{width:"".concat(s.percentage,"%")}})})}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700 w-12 text-right",children:[s.percentage,"%"]})]})]},t):null})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)(J.Z,{className:"w-5 h-5 mr-2 text-green-600"}),"Top Performing Series"]}),(0,r.jsx)("div",{className:"space-y-4",children:e.topPerformingSeries.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm font-semibold text-green-600",children:t+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.views.toLocaleString()," views"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.engagement,"%"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"engagement"})]})]},e.name))})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)(Z.Z,{className:"w-5 h-5 mr-2 text-blue-600"}),"Recent Activity"]}),(0,r.jsx)("div",{className:"space-y-4",children:e.recentSeriesActivity.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("created"===e.action?"bg-blue-100 text-blue-600":"published"===e.action?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"),children:["created"===e.action&&(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"published"===e.action&&(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"updated"===e.action&&(0,r.jsx)(n.Z,{className:"w-4 h-4"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:['Series "',e.seriesName,'" was ',e.action]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]})]},t))})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)(em.Z,{className:"w-5 h-5 mr-2 text-purple-600"}),"Series Status Distribution"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)(eh,{title:"Published",count:e.publishedSeries,percentage:Math.round(e.publishedSeries/e.totalSeries*100),color:"green"}),(0,r.jsx)(eh,{title:"Draft",count:e.draftSeries,percentage:Math.round(e.draftSeries/e.totalSeries*100),color:"yellow"}),(0,r.jsx)(eh,{title:"Completed",count:e.completedSeries,percentage:Math.round(e.completedSeries/e.totalSeries*100),color:"blue"})]})]})]})}function ep(e){let{title:t,value:s,icon:a,color:l,trend:n}=e;return(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat({blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"}[l]),children:(0,r.jsx)(a,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s}),n&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:n})]})]})})}function eh(e){let{title:t,count:s,percentage:a,color:l}=e;return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full ".concat({green:"bg-green-500",yellow:"bg-yellow-500",blue:"bg-blue-500"}[l]," mx-auto mb-4 flex items-center justify-center"),children:(0,r.jsx)("span",{className:"text-2xl font-bold text-white",children:s})}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:t}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[a,"% of total"]})]})}var eb=s(64972),ey=s(22135),ef=s(20265),ej=s(92451),ev=s(34423),eN=s(41217);function ew(e){let{post:t,series:s,isOpen:n,onClose:i,onSave:o,onNavigate:d}=e,[c,m]=(0,a.useState)("content"),[g,u]=(0,a.useState)(t),[p,b]=(0,a.useState)(!1),[y,f]=(0,a.useState)(!1),j=s.modules.find(e=>e.posts.some(e=>e.id===t.id)),v=s.modules.flatMap(e=>e.posts).sort((e,t)=>e.order-t.order),N=v.findIndex(e=>e.id===t.id),w=N>0?v[N-1]:null,k=N<v.length-1?v[N+1]:null;(0,a.useEffect)(()=>{u(t),f(!1)},[t]);let S=e=>{u(t=>({...t,...e})),f(!0)},C=async()=>{b(!0);try{await o(g),f(!1)}catch(e){console.error("Error saving post:",e)}finally{b(!1)}};return n?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-7xl w-full max-h-[95vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:["Edit Post: ",g.title]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:["Series: ",s.name]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["Module: ",(null==j?void 0:j.name)||"No Module"]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["Post ",t.order," of ",s.totalPosts]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>null==d?void 0:d("prev"),disabled:!w,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous Post",children:(0,r.jsx)(ej.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[N+1," / ",v.length]}),(0,r.jsx)("button",{onClick:()=>null==d?void 0:d("next"),disabled:!k,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next Post",children:(0,r.jsx)(ex.Z,{className:"w-5 h-5"})})]}),y&&(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"Unsaved changes"]}),(0,r.jsxs)("button",{onClick:C,disabled:p||!y,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:[p?(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(L.Z,{className:"w-4 h-4"}),p?"Saving...":"Save Post"]}),(0,r.jsx)("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-6",children:[(0,r.jsxs)("button",{onClick:()=>m("content"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat("content"===c?"bg-purple-100 text-purple-700 border-2 border-purple-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(ev.Z,{className:"w-4 h-4"}),"Content"]}),(0,r.jsxs)("button",{onClick:()=>m("ai-assist"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat("ai-assist"===c?"bg-pink-100 text-pink-700 border-2 border-pink-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),"AI Assist"]}),(0,r.jsxs)("button",{onClick:()=>m("seo"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat("seo"===c?"bg-green-100 text-green-700 border-2 border-green-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"SEO & Meta"]}),(0,r.jsxs)("button",{onClick:()=>m("preview"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat("preview"===c?"bg-blue-100 text-blue-700 border-2 border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(V.Z,{className:"w-4 h-4"}),"Preview"]})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["content"===c&&(0,r.jsx)(ek,{post:g,onChange:S}),"ai-assist"===c&&(0,r.jsx)(eS,{post:g,series:s,onChange:S}),"seo"===c&&(0,r.jsx)(eC,{post:g,onChange:S}),"preview"===c&&(0,r.jsx)(eD,{post:g,series:s})]}),y&&(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 bg-yellow-50 flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-yellow-800",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"You have unsaved changes"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>{u(t),f(!1)},className:"px-3 py-1 text-gray-600 hover:text-gray-800 transition-colors",children:"Discard"}),(0,r.jsxs)("button",{onClick:C,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:[p?(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(L.Z,{className:"w-4 h-4"}),"Save Changes"]})]})]})})]})}):null}function ek(e){let{post:t,onChange:s}=e,a=(e,r)=>{let a=[...t.tags];a[e]=r,s({tags:a})},l=e=>{s({tags:t.tags.filter((t,s)=>s!==e)})};return(0,r.jsxs)("div",{className:"max-w-5xl space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Basic Information"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Post Title *"}),(0,r.jsx)("input",{type:"text",value:t.title||"",onChange:e=>s({title:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg",placeholder:"Enter post title"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Excerpt / Summary"}),(0,r.jsx)("textarea",{value:t.excerpt||"",onChange:e=>s({excerpt:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Brief description of this post"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:t.status||"draft",onChange:e=>s({status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"draft",children:"Draft"}),(0,r.jsx)("option",{value:"published",children:"Published"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Reading Time"}),(0,r.jsx)("input",{type:"text",value:t.estimatedTime||"",onChange:e=>s({estimatedTime:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., 15 min read"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Post Order"}),(0,r.jsx)("input",{type:"number",value:t.order||1,onChange:e=>s({order:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:"1"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Tags"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{s({tags:[...t.tags,""]})},className:"flex items-center gap-2 px-3 py-2 text-sm text-purple-600 hover:text-purple-700 transition-colors",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Add Tag"]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[t.tags.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(eN.Z,{className:"w-4 h-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>a(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter tag"}),(0,r.jsx)("button",{type:"button",onClick:()=>l(t),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]},t)),0===t.tags.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(A.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,r.jsx)("p",{children:'No tags added yet. Click "Add Tag" to get started.'})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Content"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Post Content (Markdown)"}),(0,r.jsx)("textarea",{value:t.content||"",onChange:e=>s({content:e.target.value}),rows:20,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm",placeholder:"Write your post content in Markdown..."}),(0,r.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Supports Markdown formatting. Use AI Assist tab for content generation help."})]})]})]})}function eS(e){let{post:t,series:s,onChange:i}=e,[o,x]=(0,a.useState)(!1),[m,g]=(0,a.useState)(null),[u,p]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),j=s.modules.find(e=>e.posts.some(e=>e.id===t.id)),v=async e=>{x(!0),g(null);try{let r="This is part ".concat(t.order," of a ").concat(s.totalPosts,'-part series: "').concat(s.name,'". \n      Module: ').concat((null==j?void 0:j.name)||"N/A","\n      Series Description: ").concat(s.description,"\n      Current Post Title: ").concat(t.title,"\n      Current Post Excerpt: ").concat(t.excerpt,"\n      ").concat(t.content?"Current Content: ".concat(t.content.substring(0,500),"..."):""),a=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,topic:t.title||"Part ".concat(t.order," of ").concat(s.name),context:r,tone:"professional",length:"content"===e?"long":"medium",seriesContext:{seriesName:s.name,partNumber:t.order,totalParts:s.totalPosts,module:null==j?void 0:j.name,difficulty:s.difficulty}})});if(!a.ok)throw Error("Failed to generate AI content");let l=await a.json();y(l.content),p(!0),setTimeout(()=>p(!1),3e3)}catch(e){g(e instanceof Error?e.message:"Failed to generate content")}finally{x(!1)}},N=e=>{b&&(i({[e]:b}),y(null))};return(0,r.jsxs)("div",{className:"max-w-5xl space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-6",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-purple-600"}),"AI Content Assistant"]}),m&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-red-500"}),(0,r.jsx)("span",{className:"text-red-700 text-sm",children:m})]}),u&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-500"}),(0,r.jsx)("span",{className:"text-green-700 text-sm",children:"Content generated successfully!"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>v("title"),disabled:o,className:"flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-all duration-200 disabled:opacity-50",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-purple-600"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Generate Title"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"AI-powered post title"})]})]}),(0,r.jsxs)("button",{onClick:()=>v("excerpt"),disabled:o,className:"flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-all duration-200 disabled:opacity-50",children:[(0,r.jsx)(n.Z,{className:"w-5 h-5 text-purple-600"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Generate Excerpt"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Compelling summary"})]})]}),(0,r.jsxs)("button",{onClick:()=>v("outline"),disabled:o,className:"flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-all duration-200 disabled:opacity-50",children:[(0,r.jsx)(eN.Z,{className:"w-5 h-5 text-purple-600"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Generate Outline"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Content structure"})]})]}),(0,r.jsxs)("button",{onClick:()=>v("content"),disabled:o,className:"flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-all duration-200 disabled:opacity-50",children:[(0,r.jsx)(ev.Z,{className:"w-5 h-5 text-purple-600"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Generate Content"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Full post content"})]})]}),(0,r.jsxs)("button",{onClick:()=>v("tags"),disabled:o,className:"flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-all duration-200 disabled:opacity-50",children:[(0,r.jsx)(A.Z,{className:"w-5 h-5 text-purple-600"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Generate Tags"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Relevant keywords"})]})]})]}),o&&(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-center p-8",children:[(0,r.jsx)(l.Z,{className:"w-6 h-6 animate-spin text-purple-600 mr-3"}),(0,r.jsx)("span",{className:"text-purple-700",children:"Generating AI content..."})]})]}),b&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generated Suggestion"}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:b})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>N("title"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Apply to Title"}),(0,r.jsx)("button",{onClick:()=>N("excerpt"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Apply to Excerpt"}),(0,r.jsx)("button",{onClick:()=>N("content"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Apply to Content"}),(0,r.jsx)("button",{onClick:()=>y(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Dismiss"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"}),"Series Context"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"font-medium text-gray-700",children:"Series:"}),(0,r.jsx)("p",{className:"text-gray-600",children:s.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"font-medium text-gray-700",children:"Module:"}),(0,r.jsx)("p",{className:"text-gray-600",children:(null==j?void 0:j.name)||"No Module"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"font-medium text-gray-700",children:"Post Position:"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Part ",t.order," of ",s.totalPosts]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"font-medium text-gray-700",children:"Difficulty:"}),(0,r.jsx)("p",{className:"text-gray-600 capitalize",children:s.difficulty})]})]})]})]})}function eC(e){var t;let{post:s,onChange:a}=e;return(0,r.jsxs)("div",{className:"max-w-5xl space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:"SEO & Metadata"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug"}),(0,r.jsx)("input",{type:"text",value:s.slug||"",onChange:e=>a({slug:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"url-friendly-slug"}),(0,r.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"URL-friendly version of the title (lowercase, hyphens only)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),(0,r.jsx)("textarea",{value:s.excerpt||"",onChange:e=>a({excerpt:e.target.value}),rows:3,maxLength:160,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Brief description for search engines (max 160 characters)"}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[(null===(t=s.excerpt)||void 0===t?void 0:t.length)||0,"/160 characters"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Focus Keywords (Tags)"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.tags.map((e,t)=>(0,r.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:["#",e]},t))}),(0,r.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"Manage tags in the Content tab"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Search Engine Preview"}),(0,r.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-blue-600 text-lg hover:underline cursor-pointer",children:s.title||"Post Title"}),(0,r.jsxs)("div",{className:"text-green-600 text-sm",children:["https://abstractalgorithms.com/posts/",s.slug||"post-slug"]}),(0,r.jsx)("div",{className:"text-gray-600 text-sm mt-1",children:s.excerpt||"Post excerpt will appear here..."})]})]})]})}function eD(e){let{post:t,series:s}=e,a=s.modules.find(e=>e.posts.some(e=>e.id===t.id));return(0,r.jsx)("div",{className:"max-w-4xl",children:(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4",children:[(0,r.jsx)("span",{children:s.name}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:(null==a?void 0:a.name)||"No Module"}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["Part ",t.order]})]}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title||"Post Title"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-6",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(Z.Z,{className:"w-4 h-4"}),t.estimatedTime||"Reading time not set"]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("published"===t.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.status})]}),t.excerpt&&(0,r.jsx)("div",{className:"text-lg text-gray-600 italic border-l-4 border-purple-500 pl-4 mb-6",children:t.excerpt}),t.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:["#",e]},t))})]}),(0,r.jsx)("div",{className:"prose prose-lg max-w-none",children:t.content?(0,r.jsx)("div",{className:"whitespace-pre-wrap",children:t.content}):(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,r.jsx)(n.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,r.jsx)("p",{children:"No content available. Add content in the Content tab."})]})})]})})}function eE(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}function eT(e){let{onSeriesSelect:t,onPostEdit:s}=e,[n,i]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[m,g]=(0,a.useState)(""),[u,b]=(0,a.useState)(null),[y,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),[C,D]=(0,a.useState)(!1),[E,T]=(0,a.useState)("overview"),[P,Z]=(0,a.useState)(null),[A,I]=(0,a.useState)(null),[O,M]=(0,a.useState)(new Set),[L,R]=(0,a.useState)(!1),[F,_]=(0,a.useState)(null),[U,B]=(0,a.useState)(null),[V,J]=(0,a.useState)(""),[q,G]=(0,a.useState)({targetAudience:"beginners",contentType:"tutorial",difficulty:"beginner",estimatedDuration:"4-6 weeks"});(0,a.useEffect)(()=>{z()},[]);let z=async()=>{try{c(!0);let e=await fetch("/api/series/list");if(e.ok){let t=((await e.json()).series||[]).map(e=>{if(e.modules&&e.modules.length>0)e.modules=e.modules.map((e,t)=>({id:e.slug||"module-".concat(t),name:e.name,slug:e.slug,description:e.description||"".concat(e.name," module content"),order:t+1,posts:(e.parts||[]).map((t,s)=>({id:t.slug||"".concat(e.slug,"-part-").concat(t.order),title:t.title,slug:t.slug,excerpt:t.description||"",content:"",order:t.order||s+1,module:e.slug,moduleOrder:s+1,status:"draft",estimatedTime:t.estimated_reading_time||"15 min read",tags:[],isPlaceholder:!1}))}));else if(e.parts&&e.parts.length>0){let t={id:"main",name:"Main Content",slug:"main",description:"Core content of the series",order:1,posts:e.parts.map((e,t)=>({id:e.slug||"part-".concat(e.order),title:e.title,slug:e.slug||"part-".concat(e.order),excerpt:e.description||"",content:"",order:e.order||t+1,module:"main",moduleOrder:t+1,status:"draft",estimatedTime:e.estimated_reading_time||"10 min read",tags:[],isPlaceholder:!0}))};e.modules=[t]}else e.modules=[];return e});i(t)}}catch(e){console.error("Error loading series:",e)}finally{c(!1)}},W=async()=>{if(V.trim()){D(!0);try{let e=await fetch("/api/ai/series-plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:V,context:q})});if(e.ok){let t=await e.json();S(t.seriesPlan)}else{let t=await e.json();console.error("Error generating AI series plan:",t)}}catch(e){console.error("Error generating AI series plan:",e)}finally{D(!1)}}},X=async e=>{try{let t={name:e.name,description:e.description,author:"AI Assistant",difficulty:e.difficulty,estimatedTime:e.estimatedTime,prerequisites:e.prerequisites,learningOutcomes:e.learningOutcomes,tags:e.tags,status:"draft",modules:e.modules.map((e,t)=>({name:e.name,slug:eE(e.name),description:e.description,parts:e.posts.map((e,t)=>({order:t+1,title:e.title,slug:eE(e.title),excerpt:e.description,content:"# ".concat(e.title,"\n\n").concat(e.description,"\n\n*This is a placeholder. Content will be generated or written here.*"),estimatedTime:e.estimatedTime}))})),parts:[]},s=await fetch("/api/series/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok){let e=await s.json();return await z(),S(null),f(!1),J(""),e}}catch(e){console.error("Error creating series from AI:",e)}},H=n.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.description.toLowerCase().includes(m.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(m.toLowerCase()))),K=(e,t)=>{_(e),B(t),R(!0),null==s||s(e,t)},Y=async e=>{if(U)try{if((await fetch("/api/series/".concat(U.slug,"/posts/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(await z(),R(!1),_(null),B(null),(null==u?void 0:u.id)===U.id)){let e=n.find(e=>e.id===U.id);e&&b(e)}}catch(e){console.error("Error saving post:",e)}},Q=async e=>{try{let t={name:e.name,slug:e.slug,description:e.description,author:e.author,tags:e.tags,coverImage:e.coverImage,difficulty:e.difficulty,estimatedTime:e.estimatedTime,prerequisites:e.prerequisites,learningOutcomes:e.learningOutcomes,status:e.status,modules:e.modules.map(e=>({name:e.name,slug:e.slug,description:e.description,parts:e.posts.map(e=>({order:e.order||1,title:e.title,slug:e.slug,excerpt:e.excerpt,content:e.content,estimatedTime:e.estimatedTime}))})),parts:e.modules.flatMap(e=>e.posts.map(e=>({order:e.order||1,title:e.title,slug:e.slug,excerpt:e.excerpt,content:e.content,estimatedTime:e.estimatedTime})))},s=await fetch("/api/series/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to update series")}let r=await s.json();if(r.success)i(t=>t.map(t=>t.id===e.id?e:t)),await z(),v(!1),B(null),b(null),console.log("Series updated successfully");else throw Error(r.error||"Failed to update series")}catch(e){console.error("Error updating series:",e),alert("Failed to update series: ".concat(e instanceof Error?e.message:"Unknown error"))}};return(0,r.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-br from-purple-50 via-pink-50 to-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(d.Z,{className:"w-6 h-6 text-gray-700"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Series Manager"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),"AI Series Planner"]}),(0,r.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Create Series"]})]})]}),(0,r.jsxs)("div",{className:"relative mb-6",children:[(0,r.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search series...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white/80",value:m,onChange:e=>g(e.target.value)})]}),o?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)(l.Z,{className:"w-6 h-6 animate-spin text-gray-500"}),(0,r.jsx)("span",{className:"ml-2 text-gray-500",children:"Loading series..."})]}):0===H.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-white/80 border border-gray-200 rounded-xl",children:[(0,r.jsx)(d.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No series found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:m?"Try adjusting your search terms.":"Create your first series to get started."}),(0,r.jsxs)("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),"Let AI Plan Your Series"]})]}):(0,r.jsx)("div",{className:"grid gap-6",children:H.map(e=>(0,r.jsx)(eP,{series:e,onSelect:()=>{b(e),null==t||t(e)},onEdit:()=>{b(e),v(!0)}},e.id))}),y&&(0,r.jsx)(eZ,{isOpen:y,onClose:()=>f(!1),aiPrompt:V,setAiPrompt:J,aiContext:q,setAiContext:G,generating:C,onGenerate:W,suggestion:k,onCreateSeries:X}),u&&(0,r.jsx)(eI,{series:u,isOpen:!!u,onClose:()=>b(null),onPostEdit:K,onModuleEdit:()=>w(!0)}),L&&F&&U&&(0,r.jsx)(ew,{isOpen:L,onClose:()=>{R(!1),_(null)},post:F,series:U,onSave:Y,onNavigate:e=>{if(!F||!U)return;let t=U.modules.flatMap(e=>e.posts).sort((e,t)=>e.order-t.order),s=t.findIndex(e=>e.id===F.id),r=null;"prev"===e&&s>0?r=t[s-1]:"next"===e&&s<t.length-1&&(r=t[s+1]),r&&_(r)}}),j&&u&&(0,r.jsx)(eR,{isOpen:j,onClose:()=>{v(!1),B(null),b(null)},series:u,onSave:Q,onPostEdit:K})]})}function eP(e){let{series:t,onSelect:s,onEdit:a}=e,l=t.totalPosts>0?t.completedPosts/t.totalPosts*100:0;return(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-gray-300 transition-colors bg-white/80",children:(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.name}),(0,r.jsx)("p",{className:"text-gray-600 mb-3 line-clamp-2",children:t.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(Z.Z,{className:"w-4 h-4"}),t.estimatedTime]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),t.totalPosts," posts"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),t.modules.length," modules"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("beginner"===t.difficulty?"bg-green-100 text-green-800":"intermediate"===t.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t.difficulty}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("published"===t.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:t.status})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(l,"%")}})}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[t.completedPosts,"/",t.totalPosts]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["#",e]},t)),t.tags.length>3&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",t.tags.length-3," more"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,r.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"View Series",children:(0,r.jsx)(V.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit Series",children:(0,r.jsx)(j.Z,{className:"w-4 h-4"})})]})]})})}function eZ(e){let{isOpen:t,onClose:s,aiPrompt:a,setAiPrompt:n,aiContext:i,setAiContext:o,generating:d,onGenerate:c,suggestion:x,onCreateSeries:m}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-white/20 dark:border-gray-700/30",children:[(0,r.jsx)("div",{className:"p-6 border-b border-purple-200 dark:border-purple-700/30 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg",children:(0,r.jsx)(h.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"AI Series Planner"})]}),(0,r.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]})}),(0,r.jsx)("div",{className:"p-6 bg-gradient-to-br from-purple-50/50 to-pink-50/50 dark:from-purple-900/20 dark:to-pink-900/20",children:x?(0,r.jsx)(eA,{suggestion:x,onAccept:()=>m(x),onReject:()=>{n("")}}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Describe your series idea"}),(0,r.jsx)("textarea",{value:a,onChange:e=>n(e.target.value),placeholder:"e.g., Create a comprehensive JavaScript tutorial series for beginners who want to learn web development...",className:"w-full h-32 p-3 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-purple-200 dark:border-purple-700/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Audience"}),(0,r.jsxs)("select",{value:i.targetAudience,onChange:e=>o({...i,targetAudience:e.target.value}),className:"w-full p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-purple-200 dark:border-purple-700/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"beginners",children:"Beginners"}),(0,r.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,r.jsx)("option",{value:"advanced",children:"Advanced"}),(0,r.jsx)("option",{value:"mixed",children:"Mixed Levels"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Difficulty Level"}),(0,r.jsxs)("select",{value:i.difficulty,onChange:e=>o({...i,difficulty:e.target.value}),className:"w-full p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-purple-200 dark:border-purple-700/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"beginner",children:"Beginner"}),(0,r.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,r.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content Type"}),(0,r.jsxs)("select",{value:i.contentType,onChange:e=>o({...i,contentType:e.target.value}),className:"w-full p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-purple-200 dark:border-purple-700/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"tutorial",children:"Tutorial"}),(0,r.jsx)("option",{value:"course",children:"Course"}),(0,r.jsx)("option",{value:"guide",children:"Guide"}),(0,r.jsx)("option",{value:"reference",children:"Reference"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estimated Duration"}),(0,r.jsxs)("select",{value:i.estimatedDuration,onChange:e=>o({...i,estimatedDuration:e.target.value}),className:"w-full p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-purple-200 dark:border-purple-700/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"1-2 weeks",children:"1-2 weeks"}),(0,r.jsx)("option",{value:"2-4 weeks",children:"2-4 weeks"}),(0,r.jsx)("option",{value:"4-6 weeks",children:"4-6 weeks"}),(0,r.jsx)("option",{value:"6-8 weeks",children:"6-8 weeks"}),(0,r.jsx)("option",{value:"2-3 months",children:"2-3 months"})]})]})]}),(0,r.jsx)("button",{onClick:c,disabled:!a.trim()||d,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}),"Generating Series Plan..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eb.Z,{className:"w-4 h-4"}),"Generate Series Plan"]})})]})})]})}):null}function eA(e){let{suggestion:t,onAccept:s,onReject:a}=e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium mb-4",children:[(0,r.jsx)(T.Z,{className:"w-4 h-4"}),"Series plan generated successfully!"]})}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.name}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:t.description}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:t.totalPosts}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Total Posts"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-pink-600",children:t.modules.length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Modules"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.estimatedTime}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Duration"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("beginner"===t.difficulty?"bg-green-100 text-green-800":"intermediate"===t.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t.difficulty}),t.tags.map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["#",e]},t))]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900",children:"Modules & Structure"}),t.modules.map((e,t)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("h6",{className:"font-medium text-gray-900 mb-2",children:["Module ",t+1,": ",e.name]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsx)("div",{className:"space-y-2",children:e.posts.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-xs font-medium",children:t+1}),(0,r.jsx)("span",{className:"flex-1",children:e.title}),(0,r.jsx)("span",{className:"text-gray-500",children:e.estimatedTime})]},t))})]},t))]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Generate New Plan"}),(0,r.jsxs)("button",{onClick:s,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200",children:[(0,r.jsx)(T.Z,{className:"w-4 h-4"}),"Create This Series"]})]})]})}function eI(e){let{series:t,isOpen:s,onClose:l,onPostEdit:n,onModuleEdit:i}=e,[d,c]=(0,a.useState)("overview"),[x,m]=(0,a.useState)(new Set);return s?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:t.name}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:t.description})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all duration-200",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"Manage Modules"]}),(0,r.jsx)("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-4",children:[(0,r.jsx)("button",{onClick:()=>c("overview"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("overview"===d?"bg-gray-900 text-white":"text-gray-600 hover:text-gray-900"),children:"Overview"}),(0,r.jsx)("button",{onClick:()=>c("modules"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("modules"===d?"bg-gray-900 text-white":"text-gray-600 hover:text-gray-900"),children:"Modules"}),(0,r.jsx)("button",{onClick:()=>c("posts"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("posts"===d?"bg-gray-900 text-white":"text-gray-600 hover:text-gray-900"),children:"All Posts"})]})]}),(0,r.jsxs)("div",{className:"p-6",children:["overview"===d&&(0,r.jsx)(eO,{series:t}),"modules"===d&&(0,r.jsx)(eM,{series:t,expandedModules:x,onToggleModule:e=>{let t=new Set(x);t.has(e)?t.delete(e):t.add(e),m(t)},onPostEdit:n}),"posts"===d&&(0,r.jsx)(eL,{series:t,onPostEdit:n})]})]})}):null}function eO(e){let{series:t}=e,s=t.totalPosts>0?t.completedPosts/t.totalPosts*100:0;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(n.Z,{className:"w-6 h-6"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Total Posts"})]}),(0,r.jsx)("div",{className:"text-3xl font-bold",children:t.totalPosts})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(o.Z,{className:"w-6 h-6"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Modules"})]}),(0,r.jsx)("div",{className:"text-3xl font-bold",children:t.modules.length})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(J.Z,{className:"w-6 h-6"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Progress"})]}),(0,r.jsxs)("div",{className:"text-3xl font-bold",children:[Math.round(s),"%"]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Series Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Prerequisites"}),(0,r.jsx)("ul",{className:"space-y-1",children:t.prerequisites.map((e,t)=>(0,r.jsxs)("li",{className:"text-gray-600 text-sm",children:["• ",e]},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Learning Outcomes"}),(0,r.jsx)("ul",{className:"space-y-1",children:t.learningOutcomes.map((e,t)=>(0,r.jsxs)("li",{className:"text-gray-600 text-sm",children:["• ",e]},t))})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Progress Overview"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Overall Progress"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[t.completedPosts,"/",t.totalPosts," posts"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})})]})]})]})}function eM(e){let{series:t,expandedModules:s,onToggleModule:a,onPostEdit:l}=e;return(0,r.jsx)("div",{className:"space-y-4",children:t.modules.map((e,n)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,r.jsx)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>a(e.id),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-medium text-sm",children:n+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h6",{className:"font-medium text-gray-900 mb-2",children:e.name}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[e.posts.length," posts"]}),s.has(e.id)?(0,r.jsx)(ey.Z,{className:"w-4 h-4 text-gray-400"}):(0,r.jsx)(b.Z,{className:"w-4 h-4 text-gray-400"})]})]})}),s.has(e.id)&&(0,r.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,r.jsx)("div",{className:"space-y-2",children:e.posts.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center text-xs font-medium border",children:e.order}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:e.excerpt})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status}),(0,r.jsx)("button",{onClick:()=>null==l?void 0:l(e,t),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit Post",children:(0,r.jsx)(j.Z,{className:"w-4 h-4"})})]})]},e.id))})})]},e.id))})}function eL(e){let{series:t,onPostEdit:s}=e,a=t.modules.flatMap(e=>e.posts.map(t=>({...t,module:e.name}))).sort((e,t)=>e.order-t.order);return(0,r.jsx)("div",{className:"space-y-4",children:a.map((e,a)=>(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-medium text-sm",children:e.order}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:e.excerpt}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Module: ",e.module]}),e.estimatedTime&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["• ",e.estimatedTime]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status}),(0,r.jsx)("button",{onClick:()=>null==s?void 0:s(e,t),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit Post",children:(0,r.jsx)(j.Z,{className:"w-4 h-4"})})]})]})},e.id))})}function eR(e){let{isOpen:t,onClose:s,series:i,onSave:d,onPostEdit:c}=e,[x,m]=(0,a.useState)("overview"),[g,u]=(0,a.useState)(i),[p,h]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{u(i),y(!1)},[i]);let f=e=>{u(t=>({...t,modules:e,totalPosts:e.reduce((e,t)=>e+t.posts.length,0)})),y(!0)},j=async()=>{h(!0);try{await d(g),y(!1)}catch(e){console.error("Error saving series:",e)}finally{h(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-7xl w-full max-h-[95vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:["Edit Series: ",i.name]}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Comprehensive series management"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[b&&(0,r.jsxs)("button",{onClick:j,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[p?(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(L.Z,{className:"w-4 h-4"}),p?"Saving...":"Save Changes"]}),(0,r.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-6",children:[(0,r.jsxs)("button",{onClick:()=>m("overview"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat("overview"===x?"bg-purple-100 text-purple-700 border-2 border-purple-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(w.Z,{className:"w-4 h-4"}),"Overview"]}),(0,r.jsxs)("button",{onClick:()=>m("modules"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat("modules"===x?"bg-blue-100 text-blue-700 border-2 border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"Manage Modules"]}),(0,r.jsxs)("button",{onClick:()=>m("posts"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat("posts"===x?"bg-green-100 text-green-700 border-2 border-green-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),"Manage Posts"]}),(0,r.jsxs)("button",{onClick:()=>m("preview"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat("preview"===x?"bg-orange-100 text-orange-700 border-2 border-orange-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(V.Z,{className:"w-4 h-4"}),"Preview"]})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["overview"===x&&(0,r.jsx)(eF,{series:g,onChange:e=>{u(t=>({...t,...e})),y(!0)}}),"modules"===x&&(0,r.jsx)(e_,{series:g,onUpdate:f}),"posts"===x&&(0,r.jsx)(eU,{series:g,onUpdate:f,onPostEdit:c}),"preview"===x&&(0,r.jsx)(eB,{series:g})]}),b&&(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 bg-yellow-50 flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-yellow-800",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"You have unsaved changes"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>{u(i),y(!1)},className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"Discard"}),(0,r.jsxs)("button",{onClick:j,disabled:p,className:"flex items-center gap-1 px-3 py-1 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700 transition-colors disabled:opacity-50",children:[p?(0,r.jsx)(l.Z,{className:"w-3 h-3 animate-spin"}):(0,r.jsx)(L.Z,{className:"w-3 h-3"}),"Save"]})]})]})})]})}):null}function eF(e){let{series:t,onChange:s}=e,[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(null),[c,x]=(0,a.useState)(!1),m=async()=>{if(!t.name||!t.description){d("Please provide at least a title and description before AI enhancement");return}i(!0),d(null);try{let e=await fetch("/api/ai/enhance-series",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t.name,description:t.description,currentPrerequisites:t.prerequisites||[],currentLearningOutcomes:t.learningOutcomes||[],currentTags:t.tags||[]})});if(!e.ok)throw Error("Failed to enhance series with AI");let r=await e.json();s({description:r.description||t.description,prerequisites:r.prerequisites||t.prerequisites,learningOutcomes:r.learningOutcomes||t.learningOutcomes,tags:r.tags||t.tags,difficulty:r.difficulty||t.difficulty,estimatedTime:r.estimatedTime||t.estimatedTime}),x(!0),setTimeout(()=>x(!1),3e3)}catch(e){d(e instanceof Error?e.message:"Failed to enhance series")}finally{i(!1)}},g=(e,r,a)=>{let l=[...t[e]||[]];l[r]=a,s({[e]:l})},h=e=>{let r=[...t[e]||[],""];s({[e]:r})},b=(e,r)=>{let a=(t[e]||[]).filter((e,t)=>t!==r);s({[e]:a})};return(0,r.jsxs)("div",{className:"max-w-4xl space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 border border-purple-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-semibold text-white mb-1",children:"AI Series Enhancement"}),(0,r.jsx)("p",{className:"text-sm text-purple-100",children:"Let AI improve your series description, prerequisites, learning outcomes, and tags"})]}),(0,r.jsx)("button",{onClick:m,disabled:n||!t.name||!t.description,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}),"Enhancing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{className:"w-4 h-4"}),"Enhance with AI"]})})]}),o&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-red-700 text-sm",children:o})]}),c&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[(0,r.jsx)(T.Z,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-green-700 text-sm",children:"Series enhanced successfully with AI suggestions!"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Series Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Series Name *"}),(0,r.jsx)("input",{type:"text",value:t.name||"",onChange:e=>s({name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter series name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Author"}),(0,r.jsx)("input",{type:"text",value:t.author||"",onChange:e=>s({author:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Author name"})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,r.jsx)("textarea",{value:t.description||"",onChange:e=>s({description:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe your series"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),(0,r.jsxs)("select",{value:t.difficulty||"beginner",onChange:e=>s({difficulty:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"beginner",children:"Beginner"}),(0,r.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,r.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time"}),(0,r.jsx)("input",{type:"text",value:t.estimatedTime||"",onChange:e=>s({estimatedTime:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., 8 hours, 2 weeks"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:t.status||"draft",onChange:e=>s({status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"draft",children:"Draft"}),(0,r.jsx)("option",{value:"published",children:"Published"})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image URL"}),(0,r.jsx)("input",{type:"url",value:t.coverImage||"",onChange:e=>s({coverImage:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"https://example.com/cover-image.jpg"})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Prerequisites"}),(0,r.jsxs)("button",{type:"button",onClick:()=>h("prerequisites"),className:"flex items-center gap-1 text-sm text-purple-600 hover:text-purple-700",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Add Prerequisite"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(t.prerequisites||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>g("prerequisites",t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter prerequisite"}),(0,r.jsx)("button",{type:"button",onClick:()=>b("prerequisites",t),className:"p-2 text-gray-400 hover:text-red-500",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]},t)),0===(t.prerequisites||[]).length&&(0,r.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No prerequisites added yet"})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Learning Outcomes"}),(0,r.jsxs)("button",{type:"button",onClick:()=>h("learningOutcomes"),className:"flex items-center gap-1 text-sm text-purple-600 hover:text-purple-700",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Add Outcome"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(t.learningOutcomes||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>g("learningOutcomes",t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter learning outcome"}),(0,r.jsx)("button",{type:"button",onClick:()=>b("learningOutcomes",t),className:"p-2 text-gray-400 hover:text-red-500",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]},t)),0===(t.learningOutcomes||[]).length&&(0,r.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No learning outcomes added yet"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tags"}),(0,r.jsxs)("button",{type:"button",onClick:()=>h("tags"),className:"flex items-center gap-1 text-sm text-purple-600 hover:text-purple-700",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Add Tag"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(t.tags||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>g("tags",t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter tag"}),(0,r.jsx)("button",{type:"button",onClick:()=>b("tags",t),className:"p-2 text-gray-400 hover:text-red-500",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]},t)),0===(t.tags||[]).length&&(0,r.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No tags added yet"})]})]})]})]})}function e_(e){let{series:t,onUpdate:s}=e,[l,n]=(0,a.useState)(t.modules),[i,o]=(0,a.useState)(new Set);(0,a.useEffect)(()=>{n(t.modules)},[t.modules]);let d=e=>{n(e),s(e)},c=e=>{confirm("Are you sure you want to delete this module and all its posts?")&&d(l.filter(t=>t.id!==e).map((e,t)=>({...e,order:t+1})))},x=(e,t)=>{let s=l.findIndex(t=>t.id===e);if("up"===t&&s<=0||"down"===t&&s>=l.length-1)return;let r=[...l],a="up"===t?s-1:s+1;[r[s],r[a]]=[r[a],r[s]],r.forEach((e,t)=>{e.order=t+1}),d(r)},m=e=>{let t=new Set(i);t.has(e)?t.delete(e):t.add(e),o(t)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Manage Modules"}),(0,r.jsxs)("button",{onClick:()=>{let e={id:"module-".concat(Date.now()),name:"New Module",slug:"module-".concat(l.length+1),description:"Module description",order:l.length+1,posts:[]};d([...l,e])},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Add Module"]})]}),(0,r.jsx)("div",{className:"space-y-4",children:l.map((e,t)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,r.jsx)("div",{className:"p-4 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-medium text-sm",children:e.order}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h6",{className:"font-medium text-gray-900 mb-2",children:e.name}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[e.posts.length," posts"]}),(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 rounded",children:[(0,r.jsx)("button",{onClick:()=>x(e.id,"up"),disabled:0===t,className:"p-1 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Move up",children:(0,r.jsx)(ef.Z,{className:"w-3 h-3"})}),(0,r.jsx)("button",{onClick:()=>x(e.id,"down"),disabled:t===l.length-1,className:"p-1 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Move down",children:(0,r.jsx)(b.Z,{className:"w-3 h-3"})})]}),(0,r.jsx)("button",{onClick:()=>m(e.id),className:"p-1 hover:bg-gray-100 rounded",children:i.has(e.id)?(0,r.jsx)(ey.Z,{className:"w-4 h-4 text-gray-400"}):(0,r.jsx)(b.Z,{className:"w-4 h-4 text-gray-400"})}),(0,r.jsx)("button",{onClick:()=>c(e.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",title:"Delete module",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]})]})}),i.has(e.id)&&(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h6",{className:"font-medium text-gray-700 mb-2",children:"Posts in this module:"}),0===e.posts.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No posts in this module yet"}):e.posts.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-5 h-5 bg-gray-100 rounded-full flex items-center justify-center text-xs",children:e.order}),(0,r.jsx)("span",{className:"font-medium text-sm",children:e.title})]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]},e.id))]})})]},e.id))})]})}function eU(e){let{series:t,onUpdate:s,onPostEdit:l}=e,[n,i]=(0,a.useState)(t.modules);(0,a.useEffect)(()=>{i(t.modules)},[t.modules]);let o=e=>{i(e),s(e)},d=e=>{let t=n.find(t=>t.id===e);if(!t)return;let s={id:"post-".concat(Date.now()),title:"New Post",slug:"post-".concat(t.posts.length+1),excerpt:"Post description",content:"",order:t.posts.length+1,module:e,status:"draft",tags:[]};o(n.map(t=>t.id===e?{...t,posts:[...t.posts,s]}:t))},c=(e,t,s)=>{o(n.map(r=>r.id===e?{...r,posts:r.posts.map(e=>e.id===t?{...e,...s}:e)}:r))},x=(e,t)=>{confirm("Are you sure you want to delete this post?")&&o(n.map(s=>s.id===e?{...s,posts:s.posts.filter(e=>e.id!==t).map((e,t)=>({...e,order:t+1}))}:s))},m=(e,t,s)=>{let r=n.find(t=>t.id===e);if(!r)return;let a=r.posts.findIndex(e=>e.id===t);if("up"===s&&a<=0||"down"===s&&a>=r.posts.length-1)return;let l=[...r.posts],i="up"===s?a-1:a+1;[l[a],l[i]]=[l[i],l[a]],l.forEach((e,t)=>{e.order=t+1}),o(n.map(t=>t.id===e?{...t,posts:l}:t))},g=(e,t,s)=>{let r=n.find(e=>e.id===t),a=n.find(e=>e.id===s);if(!r||!a)return;let l=r.posts.find(t=>t.id===e);if(!l)return;let i={...l,module:s,order:a.posts.length+1};o(n.map(r=>r.id===t?{...r,posts:r.posts.filter(t=>t.id!==e).map((e,t)=>({...e,order:t+1}))}:r.id===s?{...r,posts:[...r.posts,i]}:r))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Manage Posts"}),(0,r.jsx)("div",{className:"space-y-6",children:n.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,r.jsx)("div",{className:"p-4 bg-blue-50 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-medium text-sm",children:e.order}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]})]}),(0,r.jsxs)("button",{onClick:()=>d(e.id),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(p.Z,{className:"w-3 h-3"}),"Add Post"]})]})}),(0,r.jsx)("div",{className:"p-4",children:0===e.posts.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm italic text-center py-4",children:"No posts in this module yet"}):(0,r.jsx)("div",{className:"space-y-3",children:e.posts.map((s,a)=>(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,r.jsx)("span",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-xs font-medium",children:s.order}),(0,r.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,r.jsx)("input",{type:"text",value:s.title,onChange:t=>c(e.id,s.id,{title:t.target.value}),className:"font-medium text-gray-900 bg-transparent border-none p-0 focus:ring-0 focus:outline-none w-full",placeholder:"Post title"}),(0,r.jsx)("input",{type:"text",value:s.excerpt,onChange:t=>c(e.id,s.id,{excerpt:t.target.value}),className:"text-gray-600 text-sm bg-transparent border-none p-0 focus:ring-0 focus:outline-none w-full",placeholder:"Post description"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{value:s.status,onChange:t=>c(e.id,s.id,{status:t.target.value}),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,r.jsx)("option",{value:"draft",children:"Draft"}),(0,r.jsx)("option",{value:"published",children:"Published"})]}),(0,r.jsx)("select",{value:e.id,onChange:t=>{t.target.value!==e.id&&g(s.id,e.id,t.target.value)},className:"text-xs border border-gray-300 rounded px-2 py-1",children:n.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 rounded",children:[(0,r.jsx)("button",{onClick:()=>m(e.id,s.id,"up"),disabled:0===a,className:"p-1 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Move up",children:(0,r.jsx)(ef.Z,{className:"w-3 h-3"})}),(0,r.jsx)("button",{onClick:()=>m(e.id,s.id,"down"),disabled:a===e.posts.length-1,className:"p-1 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Move down",children:(0,r.jsx)(b.Z,{className:"w-3 h-3"})})]}),(0,r.jsx)("button",{onClick:()=>null==l?void 0:l(s,t),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",title:"Edit post content",children:(0,r.jsx)(j.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>x(e.id,s.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",title:"Delete post",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]})]})},s.id))})})]},e.id))})]})}function eB(e){let{series:t}=e;return t.modules.flatMap(e=>e.posts.map(t=>({...t,moduleName:e.name}))).sort((e,t)=>e.order-t.order),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Series Preview"}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:t.name}),(0,r.jsx)("p",{className:"text-purple-100 mb-4",children:t.description}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-200",children:t.totalPosts}),(0,r.jsx)("div",{className:"text-sm text-purple-100",children:"Posts"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-pink-200",children:t.modules.length}),(0,r.jsx)("div",{className:"text-sm text-purple-100",children:"Modules"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-200",children:t.estimatedTime}),(0,r.jsx)("div",{className:"text-sm text-purple-100",children:"Duration"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-200",children:t.difficulty}),(0,r.jsx)("div",{className:"text-sm text-purple-100",children:"Level"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900 mb-3",children:"Prerequisites"}),0===t.prerequisites.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No prerequisites"}):(0,r.jsx)("ul",{className:"space-y-1",children:t.prerequisites.map((e,t)=>(0,r.jsxs)("li",{className:"text-gray-700 text-sm",children:["• ",e]},t))})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900 mb-3",children:"Learning Outcomes"}),0===t.learningOutcomes.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No learning outcomes defined"}):(0,r.jsx)("ul",{className:"space-y-1",children:t.learningOutcomes.map((e,t)=>(0,r.jsxs)("li",{className:"text-gray-700 text-sm",children:["• ",e]},t))})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900",children:"Series Structure"}),t.modules.map((e,t)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,r.jsx)("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-medium text-sm",children:t+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h6",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]})]})}),(0,r.jsx)("div",{className:"p-4",children:0===e.posts.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No posts in this module"}):(0,r.jsx)("div",{className:"space-y-2",children:e.posts.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded",children:[(0,r.jsx)("span",{className:"w-6 h-6 bg-white border-2 border-gray-200 rounded-full flex items-center justify-center text-xs font-medium",children:e.order}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:e.excerpt})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status}),e.estimatedTime&&(0,r.jsx)("span",{className:"text-xs text-gray-500",children:e.estimatedTime})]})]},e.id))})})]},e.id))]}),t.tags.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900 mb-3",children:"Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map((e,t)=>(0,r.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:["#",e]},t))})]})]})}function eV(e){let{className:t="",onSeriesSelect:s,onPostEdit:l}=e,[c,x]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),[u,h]=(0,a.useState)(new Set),[b,j]=(0,a.useState)(""),[v,N]=(0,a.useState)("all"),[w,k]=(0,a.useState)("name"),[S,C]=(0,a.useState)("asc"),[D,E]=(0,a.useState)("overview"),[T,P]=(0,a.useState)({totalSeries:0,publishedSeries:0,draftSeries:0,totalParts:0,completedParts:0,averagePartsPerSeries:0}),[Z,A]=(0,a.useState)(!0),[I,O]=(0,a.useState)(null),[M,L]=(0,a.useState)(null),[R,F]=(0,a.useState)(!1);(0,a.useEffect)(()=>{_()},[]),(0,a.useEffect)(()=>{U()},[c,b,v,w,S]);let _=async()=>{try{A(!0);let e=await fetch("/api/series/list");if(!e.ok)throw Error("Failed to load series data");let t=await e.json();if(!t.success)throw Error(t.error||"Failed to load series data");let s=t.series;x(s);let r=s.length,a=s.filter(e=>"published"===e.status).length,l=s.filter(e=>"draft"===e.status).length,n=s.reduce((e,t)=>e+t.total,0),i=s.reduce((e,t)=>e+t.parts.length,0);P({totalSeries:r,publishedSeries:a,draftSeries:l,totalParts:n,completedParts:i,averagePartsPerSeries:r>0?Math.round(n/r*10)/10:0})}catch(e){console.error("Error loading series data:",e)}finally{A(!1)}},U=()=>{let e=[...c];if(b){let t=b.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t)))}"all"!==v&&(e=e.filter(e=>e.status===v)),e.sort((e,t)=>{let s=0;switch(w){case"name":s=e.name.localeCompare(t.name);break;case"status":s=e.status.localeCompare(t.status);break;case"parts":s=e.total-t.total;break;case"created":var r,a;let l=(null===(r=e.parts[0])||void 0===r?void 0:r.publishDate)||"1970-01-01",n=(null===(a=t.parts[0])||void 0===a?void 0:a.publishDate)||"1970-01-01";s=new Date(l).getTime()-new Date(n).getTime()}return"asc"===S?s:-s}),g(e)},B=e=>{let t=new Set(u);t.has(e)?t.delete(e):t.add(e),h(t)},q=(e,t)=>{navigator.clipboard.writeText(e),O(t),setTimeout(()=>O(null),2e3)},G=()=>{L(null),F(!0)},z=e=>{L(e),F(!0)},W=async e=>{try{let t=e.parts.length+1,s=await fetch("/api/series/add-part",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seriesId:e.id,partData:{title:"Part ".concat(t),content:"This is part ".concat(t," of the ").concat(e.name," series."),excerpt:"Part ".concat(t," of ").concat(e.name),order:t}})});if(s.ok){let r=await s.json();console.log("Part added successfully:",r),_();let a={seriesName:e.name,order:t,total:e.total,partAdded:!0};sessionStorage.setItem("seriesContext",JSON.stringify(a)),window.location.href="/posts-manager#create-post"}else throw Error("Failed to add part")}catch(e){console.error("Error adding new part:",e),alert("Failed to add new part. Please try again.")}};return Z?(0,r.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-br from-purple-50 via-pink-50 to-white ".concat(t," flex items-center justify-center py-12"),children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading series data..."})]}):R?(0,r.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-br from-purple-50 via-pink-50 to-white",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("button",{onClick:()=>{F(!1),L(null),_()},className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,r.jsx)(eo.Z,{className:"w-4 h-4 mr-2 rotate-180"}),"Back to Series Overview"]})}),(0,r.jsx)(eT,{onSeriesSelect:e=>{console.log("Series selected:",e)},onPostEdit:(e,t)=>{console.log("Post edit requested:",e,t)}})]}):(0,r.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-br from-purple-50 via-pink-50 to-white ".concat(t," space-y-8"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,r.jsx)(o.Z,{className:"w-7 h-7 mr-3 text-blue-600"}),"Series Management"]}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Create, manage, and organize your content series"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex bg-white/80 rounded-lg p-1 shadow-sm",children:[(0,r.jsxs)("button",{onClick:()=>E("overview"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("overview"===D?"bg-gradient-to-r from-purple-100 to-pink-100 text-gray-900 shadow":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(V.Z,{className:"w-4 h-4 mr-2 inline"}),"Overview"]}),(0,r.jsxs)("button",{onClick:()=>E("analytics"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("analytics"===D?"bg-gradient-to-r from-purple-100 to-pink-100 text-gray-900 shadow":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 mr-2 inline"}),"Analytics"]})]}),(0,r.jsxs)("button",{onClick:G,className:"flex items-center px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all font-medium shadow-lg hover:shadow-xl",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5 mr-2"}),"Manage Series"]})]})]}),"analytics"===D?(0,r.jsx)(eu,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Series"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.totalSeries})]})]})}),(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"w-6 h-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Published"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.publishedSeries})]})]})}),(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(n.Z,{className:"w-6 h-6 text-purple-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Parts"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.totalParts})]})]})}),(0,r.jsx)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(J.Z,{className:"w-6 h-6 text-orange-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Parts/Series"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.averagePartsPerSeries})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white/80 border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"text",placeholder:"Search series by name, description, or tags...",value:b,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white/80"})}),(0,r.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white/80",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"draft",children:"Draft"}),(0,r.jsx)("option",{value:"published",children:"Published"}),(0,r.jsx)("option",{value:"completed",children:"Completed"})]}),(0,r.jsxs)("select",{value:"".concat(w,"-").concat(S),onChange:e=>{let[t,s]=e.target.value.split("-");k(t),C(s)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white/80",children:[(0,r.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,r.jsx)("option",{value:"name-desc",children:"Name (Z-A)"}),(0,r.jsx)("option",{value:"status-asc",children:"Status (A-Z)"}),(0,r.jsx)("option",{value:"status-desc",children:"Status (Z-A)"}),(0,r.jsx)("option",{value:"parts-desc",children:"Most Parts"}),(0,r.jsx)("option",{value:"parts-asc",children:"Least Parts"}),(0,r.jsx)("option",{value:"created-desc",children:"Newest"}),(0,r.jsx)("option",{value:"created-asc",children:"Oldest"})]}),(0,r.jsxs)("button",{onClick:_,className:"flex items-center px-4 py-2 bg-gradient-to-r from-purple-100 to-pink-100 hover:from-purple-200 hover:to-pink-200 text-gray-700 rounded-lg transition-colors",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",m.length," of ",c.length," series"]})]}),(0,r.jsx)("div",{className:"space-y-4",children:0===m.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-white/80 border border-gray-200 rounded-xl",children:[(0,r.jsx)(d.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Series Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:b||"all"!==v?"Try adjusting your search or filter criteria.":"Get started by creating your first series."}),!b&&"all"===v&&(0,r.jsxs)("button",{onClick:G,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all font-medium",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5 mr-2"}),"Open Series Manager"]})]}):m.map(e=>(0,r.jsx)(eJ,{series:e,isExpanded:u.has(e.id),onToggleExpansion:()=>B(e.id),onEdit:()=>z(e),onCopy:q,onAddPart:W,copied:I},e.id))})]})]})}function eJ(e){let{series:t,isExpanded:s,onToggleExpansion:a,onEdit:l,onCopy:i,onAddPart:o,copied:d}=e,c=t.total>0?Math.round(t.parts.length/t.total*100):0,x=100===c;return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(e=>{switch(e){case"published":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,r.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"Published"]});case"completed":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,r.jsx)(T.Z,{className:"w-3 h-3 mr-1"}),"Completed"]});default:return(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,r.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"Draft"]})}})(t.status),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"•"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[t.parts.length," of ",t.total," parts"]}),x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"•"}),(0,r.jsxs)("span",{className:"inline-flex items-center text-xs text-green-600 font-medium",children:[(0,r.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"Complete"]})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t.name}),(0,r.jsx)("p",{className:"text-gray-600 line-clamp-2",children:t.description}),t.tags.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[t.tags.slice(0,4).map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs bg-gray-100 text-gray-700",children:[(0,r.jsx)(ed.Z,{className:"w-3 h-3 mr-1"}),e]},e)),t.tags.length>4&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs bg-gray-100 text-gray-500",children:["+",t.tags.length-4," more"]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,r.jsx)("span",{children:"Progress"}),(0,r.jsxs)("span",{children:[c,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(x?"bg-green-500":"bg-blue-500"),style:{width:"".concat(c,"%")}})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>i("/posts/".concat(t.id),"series-url"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Copy series URL",children:"series-url"===d?(0,r.jsx)(T.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(M.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:l,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit series",children:(0,r.jsx)(j.Z,{className:"w-4 h-4"})}),(0,r.jsx)(S.default,{href:"/posts/".concat(t.id),target:"_blank",className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"View series",children:(0,r.jsx)(ec.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:s?"Collapse":"Expand",children:s?(0,r.jsx)(b.Z,{className:"w-4 h-4"}):(0,r.jsx)(ex.Z,{className:"w-4 h-4"})})]})]})}),s&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Series Parts"}),0===t.parts.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(n.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,r.jsx)("p",{children:"No parts created yet"})]}):(0,r.jsx)("div",{className:"space-y-3",children:t.parts.sort((e,t)=>e.order-t.order).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-semibold text-blue-600",children:e.order}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(q.Z,{className:"w-3 h-3 mr-1"}),e.publishDate]}),e.estimated_reading_time&&(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(Z.Z,{className:"w-3 h-3 mr-1"}),e.estimated_reading_time]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>i("/posts/".concat(e.slug),"part-".concat(e.order)),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Copy part URL",children:d==="part-".concat(e.order)?(0,r.jsx)(T.Z,{className:"w-3 h-3 text-green-600"}):(0,r.jsx)(M.Z,{className:"w-3 h-3"})}),(0,r.jsx)(S.default,{href:"/posts/".concat(e.slug),target:"_blank",className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"View part",children:(0,r.jsx)(ec.Z,{className:"w-3 h-3"})})]})]},e.slug))}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(S.default,{href:"/series/".concat(t.id),className:"text-sm text-blue-600 hover:text-blue-800 transition-colors",children:"View Series Page"}),(0,r.jsx)(S.default,{href:"/posts-manager?seriesFilter=".concat(encodeURIComponent(t.name)),className:"text-sm text-purple-600 hover:text-purple-800 transition-colors",children:"Manage Posts"}),(0,r.jsx)("button",{onClick:()=>o(t),className:"text-sm text-green-600 hover:text-green-800 transition-colors font-medium",disabled:x,title:x?"Series is complete":"Add Part ".concat(t.parts.length+1),children:x?"Series Complete":"Add New Part"})]})]})})]})]})}var eq=s(48976);let eG={title:"",slug:"",excerpt:"",content:"",status:"draft",tags:[],categories:[],author:"Abstract Algorithms",id:"",date:new Date().toISOString().split("T")[0],readingTime:"1 min read"};function ez(e){let{post:t,isOpen:s,onClose:n,onSave:i,isCreating:o=!1}=e,[d,c]=(0,a.useState)("content"),[m,g]=(0,a.useState)(eG),[u,p]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[f,j]=(0,a.useState)(!1),[v,N]=(0,a.useState)({targetAudience:"general",tone:"professional",contentType:"tutorial",length:"medium",includeCodeExamples:!1,focusAreas:[]}),[w,k]=(0,a.useState)("all"),[S,D]=(0,a.useState)(!1),[T,Z]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null);function O(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}(0,a.useEffect)(()=>{t?g({...eG,...t}):o&&g(eG),y(!1)},[t,o]);let M=e=>{if(g(t=>({...t,...e})),y(!0),e.title&&!m.slug){let t=O(e.title);g(s=>({...s,...e,slug:t}))}},R=e=>{g(t=>({...t,title:e.title,excerpt:e.excerpt&&">-"!==e.excerpt?e.excerpt:"A comprehensive guide to ".concat(e.title.toLowerCase()),tags:e.tags||[],slug:C(e.title)})),y(!0)},F=async()=>{if(!m.title){alert("Please enter a title before using AI enhancement");return}D(!0),I(null);try{var e;let t=await fetch("/api/ai/enhance-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:m.title,content:m.content,excerpt:m.excerpt,tags:m.tags,category:(null===(e=m.categories)||void 0===e?void 0:e[0])||"General",targetAudience:v.targetAudience,enhancementType:w})});if(t.ok){let e=await t.json();I(e.enhancements)}else{let e=await t.json();console.error("Error enhancing post:",e),alert("Failed to enhance post. Please try again.")}}catch(e){console.error("Error enhancing post:",e),alert("Failed to enhance post. Please try again.")}finally{D(!1)}},_=async()=>{if(!m.title){alert("Please enter a title before generating content");return}Z(!0);try{var e;let t=await fetch("/api/ai/generate-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:m.title,category:(null===(e=m.categories)||void 0===e?void 0:e[0])||"General",excerpt:m.excerpt,targetAudience:v.targetAudience,contentType:v.contentType,tone:v.tone,length:v.length,includeCodeExamples:v.includeCodeExamples,focusAreas:v.focusAreas})});if(t.ok){let e=await t.json();M({content:e.content,tags:[...m.tags,...e.metadata.suggestedTags].slice(0,10)}),alert("Content generated successfully! Estimated reading time: ".concat(e.metadata.estimatedReadingTime))}else{let e=await t.json();console.error("Error generating content:",e),alert("Failed to generate content. Please try again.")}}catch(e){console.error("Error generating content:",e),alert("Failed to generate content. Please try again.")}finally{Z(!1)}},U=async()=>{if(m.title&&m.content){p(!0);try{let e={...m,id:m.id||"post-".concat(Date.now()),slug:m.slug||C(m.title),author:m.author||"Abstract Algorithms",tags:m.tags||[],categories:m.categories||[],status:m.status||"draft",readingTime:m.readingTime||"5 min read",date:m.date||new Date().toISOString().split("T")[0],type:m.type||"post",updatedAt:new Date().toISOString(),...o&&{createdAt:new Date().toISOString()}};await i(e),y(!1)}catch(e){console.error("Error saving post:",e)}finally{p(!1)}}};return s?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-xl shadow-2xl max-w-7xl w-full max-h-[95vh] flex flex-col border border-white/20 dark:border-gray-700/30",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-t-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o?"Create New Post":"Edit: ".concat(m.title||"Untitled Post")}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o?"Create engaging content with structured editing":"Update your post with advanced editing tools"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[b&&(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 rounded-full text-sm border border-yellow-200 dark:border-yellow-800",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"Unsaved changes"]}),(0,r.jsxs)("button",{onClick:U,disabled:u||!b||!m.title||!m.content,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:scale-105",children:[u?(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(L.Z,{className:"w-4 h-4"}),u?"Saving...":"Save Post"]}),(0,r.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 mt-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>c("content"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ".concat("content"===d?"bg-white dark:bg-gray-700 text-purple-700 dark:text-purple-300 border-2 border-purple-200 dark:border-purple-600 shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-700/50"),children:[(0,r.jsx)(ev.Z,{className:"w-4 h-4"}),"Content"]}),(0,r.jsxs)("button",{onClick:()=>c("ai-assist"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ".concat("ai-assist"===d?"bg-white dark:bg-gray-700 text-pink-700 dark:text-pink-300 border-2 border-pink-200 dark:border-pink-600 shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-700/50"),children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),"AI Assist"]}),(0,r.jsxs)("button",{onClick:()=>c("seo"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ".concat("seo"===d?"bg-white dark:bg-gray-700 text-green-700 dark:text-green-300 border-2 border-green-200 dark:border-green-600 shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-700/50"),children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"SEO & Meta"]}),(0,r.jsxs)("button",{onClick:()=>c("preview"),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ".concat("preview"===d?"bg-white dark:bg-gray-700 text-blue-700 dark:text-blue-300 border-2 border-blue-200 dark:border-blue-600 shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-700/50"),children:[(0,r.jsx)(V.Z,{className:"w-4 h-4"}),"Preview"]})]}),"content"===d&&(0,r.jsxs)("button",{onClick:()=>j(!f),className:"flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 text-sm ".concat(f?"bg-white dark:bg-gray-700 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-600 shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-700/50 border border-gray-200 dark:border-gray-600"),children:[(0,r.jsx)(V.Z,{className:"w-4 h-4"}),f?"Hide Preview":"Show Preview"]})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6 min-h-0 bg-gradient-to-br from-purple-50/50 to-pink-50/50 dark:from-purple-900/20 dark:to-pink-900/20",children:(0,r.jsx)("div",{className:"h-full",children:(0,r.jsxs)("div",{children:["content"===d&&(f?(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Content Editor"}),(0,r.jsx)(eW,{post:m,onChange:M,onSuggestionSelect:R,isCreating:o})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Live Preview"}),(0,r.jsx)(eK,{post:m})]})]}):(0,r.jsx)(eW,{post:m,onChange:M,onSuggestionSelect:R,isCreating:o})),"ai-assist"===d&&(0,r.jsx)(eX,{post:m,onChange:M,preferences:v,onPreferencesChange:N,enhancementType:w,onEnhancementTypeChange:k,onEnhance:F,onGenerate:_,isEnhancing:S,isGenerating:T,enhancementResults:A,onApplyEnhancement:(e,t)=>{let s={};switch(e){case"title":case"seoTitle":s.title=t,s.slug=O(t);break;case"excerpt":case"seoDescription":s.excerpt=t;break;case"content":s.content=t;break;case"tags":s.tags=Array.isArray(t)?t:[t]}M(s),A&&I({...A,["".concat(e,"_applied")]:!0})},onClearResults:()=>I(null)}),"seo"===d&&(0,r.jsx)(eH,{post:m,onChange:M}),"preview"===d&&(0,r.jsx)(eK,{post:m})]})})}),b&&(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-yellow-50 dark:bg-yellow-900/20 flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-yellow-800",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"You have unsaved changes"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>{g(t||eG),y(!1)},className:"px-3 py-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Discard"}),(0,r.jsxs)("button",{onClick:U,disabled:u||!m.title||!m.content,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:[u?(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(L.Z,{className:"w-4 h-4"}),"Save Changes"]})]})]})})]})}):null}function eW(e){var t,s;let{post:l,onChange:i,onSuggestionSelect:o,isCreating:d}=e,[c,x]=(0,a.useState)(""),[m,g]=(0,a.useState)(!1),u=()=>{c.trim()&&!l.tags.includes(c.trim())&&(i({tags:[...l.tags,c.trim()]}),x(""))},h=e=>{i({tags:l.tags.filter((t,s)=>s!==e)})},b=e=>{var t;!e||(null===(t=l.categories)||void 0===t?void 0:t.includes(e))||i({categories:[...l.categories||[],e]})},y=e=>{var t;i({categories:(null===(t=l.categories)||void 0===t?void 0:t.filter((t,s)=>s!==e))||[]})},f=e=>{i({title:e}),l.slug&&l.slug!==C(l.title)||i({slug:e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()})};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Create Your Post"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Fill in the details below to create a compelling blog post"})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-purple-200/50 dark:border-purple-700/30 rounded-xl p-6 shadow-lg shadow-purple-500/10",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,r.jsx)(n.Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Basic Information"]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Title *",(0,r.jsx)("span",{className:"text-gray-400 dark:text-gray-500 text-xs ml-1",children:"(This will be your main headline)"})]}),(0,r.jsx)("input",{type:"text",value:l.title,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg transition-all duration-200 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Enter a compelling title that captures your reader's attention..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["URL Slug",(0,r.jsx)("span",{className:"text-gray-400 dark:text-gray-500 text-xs ml-1",children:"(Auto-generated from title)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-sm mr-2",children:"abstractalgorithms.dev/posts/"}),(0,r.jsx)("input",{type:"text",value:l.slug,onChange:e=>i({slug:e.target.value}),className:"flex-1 px-4 py-2 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"url-friendly-slug"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Excerpt",(0,r.jsx)("span",{className:"text-gray-400 dark:text-gray-500 text-xs ml-1",children:"(Brief summary for search engines and previews)"})]}),(0,r.jsx)("textarea",{value:l.excerpt,onChange:e=>i({excerpt:e.target.value}),rows:3,maxLength:160,className:"w-full px-4 py-3 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none transition-all duration-200 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Write a compelling summary that makes readers want to click and read more..."}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This appears in search results and social media previews"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(null===(t=l.excerpt)||void 0===t?void 0:t.length)||0,"/160 characters"]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-purple-200/50 dark:border-purple-700/30 rounded-xl p-6 shadow-lg shadow-purple-500/10",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,r.jsx)(A.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"Categories & Tags"]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Categories"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("select",{onChange:e=>{e.target.value&&(b(e.target.value),e.target.value="")},className:"w-full px-4 py-2 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),(0,r.jsx)("option",{value:"AI & Machine Learning",children:"AI & Machine Learning"}),(0,r.jsx)("option",{value:"Algorithms",children:"Algorithms"}),(0,r.jsx)("option",{value:"System Design",children:"System Design"}),(0,r.jsx)("option",{value:"Programming",children:"Programming"}),(0,r.jsx)("option",{value:"Web Development",children:"Web Development"}),(0,r.jsx)("option",{value:"Data Structures",children:"Data Structures"}),(0,r.jsx)("option",{value:"Software Engineering",children:"Software Engineering"}),(0,r.jsx)("option",{value:"DevOps",children:"DevOps"}),(0,r.jsx)("option",{value:"Mobile Development",children:"Mobile Development"}),(0,r.jsx)("option",{value:"Database",children:"Database"})]}),l.categories&&l.categories.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:l.categories.map((e,t)=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>y(t),className:"text-blue-600 hover:text-blue-800 transition-colors",children:(0,r.jsx)(E.Z,{className:"w-3 h-3"})})]},t))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Tags",(0,r.jsx)("span",{className:"text-gray-400 text-xs ml-1",children:"(Help readers discover your content)"})]}),(0,r.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,r.jsx)("input",{type:"text",value:c,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&u(),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Type a tag and press Enter"}),(0,r.jsx)("button",{onClick:u,disabled:!c.trim()||l.tags.includes(c.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})})]}),l.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:l.tags.map((e,t)=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-full text-sm",children:["#",e,(0,r.jsx)("button",{onClick:()=>h(t),className:"text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:(0,r.jsx)(E.Z,{className:"w-3 h-3"})})]},t))})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,r.jsx)(ev.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Content *"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("textarea",{value:l.content,onChange:e=>i({content:e.target.value}),rows:20,className:"w-full px-4 py-4 border border-purple-200 dark:border-purple-700/30 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm resize-vertical min-h-[400px] max-h-[600px] transition-all duration-200 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:'Write your content here using Markdown format...\n\nExample:\n# Main Heading\n## Subheading\n\n**Bold text** and *italic text*\n\n- List item 1\n- List item 2\n\n`code snippet`\n\n```javascript\n// Code block\nfunction example() {\n  return "Hello World";\n}\n```\n\n[Link text](https://example.com)'}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("span",{children:"Supports Markdown formatting • Use # for headers, **bold**, *italic*, etc."}),(0,r.jsxs)("span",{children:[(null===(s=l.content)||void 0===s?void 0:s.length)||0," characters"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,r.jsx)(ev.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"Images"]}),(0,r.jsx)(_,{postSlug:l.slug||C(l.title),onImageUploaded:e=>{},onCoverImageSet:e=>{i({coverImage:e})}})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,r.jsx)(w.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Settings"]}),(0,r.jsx)("button",{onClick:()=>g(!m),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:m?"Hide Advanced":"Show Advanced"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Publication Status"}),(0,r.jsxs)("select",{value:l.status,onChange:e=>i({status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"draft",children:"Draft (Not visible to public)"}),(0,r.jsx)("option",{value:"published",children:"Published (Live on website)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Author"}),(0,r.jsx)("input",{type:"text",value:l.author,onChange:e=>i({author:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Author name"})]}),m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cover Image URL"}),(0,r.jsx)("input",{type:"url",value:l.coverImage||"",onChange:e=>i({coverImage:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"https://example.com/image.jpg"}),l.coverImage&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("img",{src:l.coverImage,alt:"Cover preview",className:"w-32 h-20 object-cover rounded border",onError:e=>{e.currentTarget.style.display="none"}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Publication Date"}),(0,r.jsx)("input",{type:"date",value:l.date,onChange:e=>i({date:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estimated Reading Time"}),(0,r.jsx)("input",{type:"text",value:l.readingTime||"",onChange:e=>i({readingTime:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 5 min read"})]})]})]})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center",children:[(0,r.jsx)("span",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"Quick Actions:"}),(0,r.jsx)("button",{onClick:()=>i({status:"draft"===l.status?"published":"draft"}),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 underline",children:"draft"===l.status?"Publish Now":"Move to Draft"}),(0,r.jsx)("button",{onClick:()=>{var e;let t=(null===(e=l.content)||void 0===e?void 0:e.split(" ").length)||0;i({readingTime:"".concat(Math.max(1,Math.ceil(t/200))," min read")})},className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 underline",children:"Calculate Reading Time"}),(0,r.jsxs)("button",{onClick:()=>g(!m),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 underline",children:[m?"Hide":"Show"," Advanced Options"]})]})})]})}function eX(e){let{post:t,onChange:s,preferences:i,onPreferencesChange:o,enhancementType:d,onEnhancementTypeChange:x,onEnhance:m,onGenerate:g,isEnhancing:u,isGenerating:b,enhancementResults:j,onApplyEnhancement:v,onClearResults:N}=e,[k,S]=(0,a.useState)("enhance"),[C,D]=(0,a.useState)(""),T=()=>{C.trim()&&!i.focusAreas.includes(C.trim())&&(o({...i,focusAreas:[...i.focusAreas,C.trim()]}),D(""))},Z=e=>{o({...i,focusAreas:i.focusAreas.filter((t,s)=>s!==e)})};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("h4",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2 flex items-center justify-center gap-2",children:[(0,r.jsx)(eb.Z,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"}),"AI Content Assistant"]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Enhance your content with intelligent AI-powered suggestions and generation"})]}),(0,r.jsxs)("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[(0,r.jsxs)("button",{onClick:()=>S("enhance"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md transition-colors ".concat("enhance"===k?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[(0,r.jsx)(O.Z,{className:"w-4 h-4"}),"Smart Enhancement"]}),(0,r.jsxs)("button",{onClick:()=>S("generate"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md transition-colors ".concat("generate"===k?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),"Content Generation"]}),(0,r.jsxs)("button",{onClick:()=>S("preferences"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md transition-colors ".concat("preferences"===k?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[(0,r.jsx)(w.Z,{className:"w-4 h-4"}),"AI Preferences"]})]}),"enhance"===k&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-700 rounded-lg p-6",children:[(0,r.jsxs)("h5",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Enhancement Focus"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{value:"title",label:"Title Enhancement",icon:eN.Z},{value:"excerpt",label:"Excerpt Improvement",icon:n.Z},{value:"content",label:"Content Enhancement",icon:ev.Z},{value:"tags",label:"Smart Tagging",icon:A.Z},{value:"seo",label:"SEO Optimization",icon:J.Z},{value:"all",label:"Complete Enhancement",icon:h.Z}].map(e=>{let{value:t,label:s,icon:a}=e;return(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"enhancementType",value:t,checked:d===t,onChange:e=>x(e.target.value),className:"text-purple-600 focus:ring-purple-500"}),(0,r.jsx)(a,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),(0,r.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:s})]},t)})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900 dark:text-white",children:"AI Enhancement"}),(0,r.jsx)("button",{onClick:m,disabled:u||!t.title,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}),"Enhancing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{className:"w-4 h-4"}),"Enhance ","all"===d?"Everything":d.charAt(0).toUpperCase()+d.slice(1)]})})]}),!t.title&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg text-sm text-yellow-800 dark:text-yellow-200",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"Please enter a title to use AI enhancement"]})]}),j&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h5",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"Enhancement Results"]}),(0,r.jsx)("button",{onClick:N,className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Results"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[j.title&&(0,r.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Enhanced Title"}),j.title_applied?(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded text-sm",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Applied"]}):(0,r.jsx)("button",{onClick:()=>v("title",j.title),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Apply"})]}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:j.title})]}),j.excerpt&&(0,r.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Enhanced Excerpt"}),j.excerpt_applied?(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded text-sm",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Applied"]}):(0,r.jsx)("button",{onClick:()=>v("excerpt",j.excerpt),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Apply"})]}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:j.excerpt})]}),j.tags&&(0,r.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Suggested Tags"}),j.tags_applied?(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded text-sm",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Applied"]}):(0,r.jsx)("button",{onClick:()=>v("tags",j.tags),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Apply"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:j.tags.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:e},t))})]}),j.seoTitle&&(0,r.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"SEO Title"}),j.seoTitle_applied?(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded text-sm",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Applied"]}):(0,r.jsx)("button",{onClick:()=>v("seoTitle",j.seoTitle),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Apply"})]}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:j.seoTitle})]}),j.suggestions&&(0,r.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"AI Suggestions"}),(0,r.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,r.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Readability Score: ",j.suggestions.readabilityScore,"/10"]})]}),j.suggestions.improvements.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5"}),(0,r.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e})]},t))]})]})]})]})]}),"generate"===k&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-6",children:[(0,r.jsxs)("h5",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"AI Content Generation"]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Generate complete content based on your title and preferences. The AI will create a comprehensive article structure with relevant examples and explanations."}),(0,r.jsx)("button",{onClick:g,disabled:b||!t.title,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 animate-spin"}),"Generating Content..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{className:"w-5 h-5"}),"Generate Complete Content"]})}),!t.title&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg text-sm text-yellow-800 dark:text-yellow-200 mt-4",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"Please enter a title to generate content"]})]})}),"preferences"===k&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[(0,r.jsxs)("h5",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)(K.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Content Preferences"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Audience"}),(0,r.jsxs)("select",{value:i.targetAudience,onChange:e=>o({...i,targetAudience:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500",children:[(0,r.jsx)("option",{value:"beginners",children:"Beginners"}),(0,r.jsx)("option",{value:"general",children:"General Audience"}),(0,r.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,r.jsx)("option",{value:"experts",children:"Experts"}),(0,r.jsx)("option",{value:"developers",children:"Developers"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tone"}),(0,r.jsxs)("select",{value:i.tone,onChange:e=>o({...i,tone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500",children:[(0,r.jsx)("option",{value:"professional",children:"Professional"}),(0,r.jsx)("option",{value:"casual",children:"Casual"}),(0,r.jsx)("option",{value:"technical",children:"Technical"}),(0,r.jsx)("option",{value:"beginner-friendly",children:"Beginner-Friendly"}),(0,r.jsx)("option",{value:"conversational",children:"Conversational"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content Type"}),(0,r.jsxs)("select",{value:i.contentType,onChange:e=>o({...i,contentType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500",children:[(0,r.jsx)("option",{value:"tutorial",children:"Tutorial"}),(0,r.jsx)("option",{value:"guide",children:"Guide"}),(0,r.jsx)("option",{value:"analysis",children:"Analysis"}),(0,r.jsx)("option",{value:"review",children:"Review"}),(0,r.jsx)("option",{value:"news",children:"News"}),(0,r.jsx)("option",{value:"opinion",children:"Opinion"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content Length"}),(0,r.jsxs)("select",{value:i.length,onChange:e=>o({...i,length:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500",children:[(0,r.jsx)("option",{value:"short",children:"Short (500-800 words)"}),(0,r.jsx)("option",{value:"medium",children:"Medium (1000-1500 words)"}),(0,r.jsx)("option",{value:"long",children:"Long (2000+ words)"})]})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:i.includeCodeExamples,onChange:e=>o({...i,includeCodeExamples:e.target.checked}),className:"text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include code examples and technical implementations"})]})}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Focus Areas"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,r.jsx)("input",{type:"text",value:C,onChange:e=>D(e.target.value),placeholder:"Add a focus area...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",onKeyPress:e=>"Enter"===e.key&&T()}),(0,r.jsx)("button",{onClick:T,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:i.focusAreas.map((e,t)=>(0,r.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:[e,(0,r.jsx)("button",{onClick:()=>Z(t),className:"text-purple-600 hover:text-purple-800",children:(0,r.jsx)(E.Z,{className:"w-3 h-3"})})]},t))})]})]})})]})}function eH(e){let{post:t,onChange:s}=e,a=(e,r)=>{let a=[...t.tags||[]];a[e]=r,s({tags:a})},l=e=>{s({tags:(t.tags||[]).filter((t,s)=>s!==e)})};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"SEO & Meta Information"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Optimize your post for search engines"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Meta Description"}),(0,r.jsx)("textarea",{value:t.excerpt||"",onChange:e=>s({excerpt:e.target.value}),rows:3,maxLength:160,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Write a compelling meta description (max 160 characters)"}),(0,r.jsxs)("div",{className:"text-right text-sm text-gray-500 dark:text-gray-400 mt-2",children:[(t.excerpt||"").length,"/160 characters"]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Keywords"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(t.tags||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>a(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter keyword"}),(0,r.jsx)("button",{onClick:()=>l(t),className:"p-2 text-red-400 hover:text-red-600 transition-colors",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]},t)),(0,r.jsxs)("button",{onClick:()=>{s({tags:[...t.tags||[],""]})},className:"flex items-center gap-2 px-3 py-2 text-purple-600 dark:text-purple-400 border border-purple-200 dark:border-purple-600 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Add Keyword"]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Search Preview"}),(0,r.jsxs)("div",{className:"border border-purple-300 dark:border-purple-600/30 rounded-lg p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30",children:[(0,r.jsx)("div",{className:"text-blue-600 dark:text-blue-400 text-lg font-medium hover:underline cursor-pointer",children:t.title||"Your Post Title"}),(0,r.jsxs)("div",{className:"text-green-600 dark:text-green-400 text-sm mt-1",children:["abstractalgorithms.dev/posts/",t.slug||"your-post-slug"]}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2",children:t.excerpt||"Your meta description will appear here..."})]})]})]})}function eK(e){var t;let{post:s}=e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Post Preview"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"See how your post will look when published"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-8 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[(0,r.jsx)("span",{children:(null===(t=s.categories)||void 0===t?void 0:t[0])||"Uncategorized"}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)(Z.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:s.readingTime||"5 min read"})]}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:s.title||"Your Post Title"}),s.excerpt&&(0,r.jsx)("div",{className:"text-lg text-gray-600 dark:text-gray-300 italic border-l-4 border-purple-500 dark:border-purple-400 pl-4 mb-6",children:s.excerpt}),s.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.tags.map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-sm",children:["#",e]},t))})]}),(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:s.content?(0,r.jsx)(eq.D,{content:s.content,className:"prose-lg dark:prose-invert"}):(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)(n.Z,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,r.jsx)("p",{children:"No content available. Add content in the Content tab."})]})})})]})]})}var eY=s(63862),eQ=s(97418),e$=s(61094),e0=s(92369),e2=e=>{var t;let{post:s,onEdit:l,onDelete:n,onShare:i,onSelect:o,isSelected:d}=e,c=s.coverImage&&s.coverImage.startsWith("/")?s.coverImage:s.coverImage?(0,eY.I)(s.coverImage,s.slug,"posts-manager"):"/generic/generic.png",[x,m]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-purple-200/50 hover:scale-105 ".concat(d?"ring-2 ring-purple-400 shadow-lg shadow-purple-200/50":""),children:[(0,r.jsxs)("div",{className:"relative",children:[x?(0,r.jsx)("div",{className:"w-full h-48 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-gray-300 to-gray-400 rounded-lg mx-auto mb-2 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"No Image"})]})}):(0,r.jsx)("img",{src:c,alt:s.title,className:"w-full h-48 object-cover bg-gray-100 dark:bg-gray-700",onError:e=>{console.warn("Failed to load image: ".concat(c)),m(!0)}}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),(0,r.jsx)("div",{className:"absolute top-3 right-3",children:(0,r.jsx)("button",{onClick:()=>o(s.id),className:"p-1 rounded-lg backdrop-blur-sm transition-all duration-200 ".concat(d?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-white/90 text-gray-700 hover:bg-white hover:scale-110"),children:d?(0,r.jsx)(eQ.Z,{className:"w-5 h-5"}):(0,r.jsx)(e$.Z,{className:"w-5 h-5"})})}),(0,r.jsx)("div",{className:"absolute top-3 left-3",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-lg border backdrop-blur-sm ".concat((e=>{switch(e){case"mongodb":return"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200";case"jekyll":return"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border-blue-200";default:return"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 border-gray-200"}})(s.source)),children:"mongodb"===s.source?"MongoDB":"jekyll"===s.source?"Jekyll":"Unknown"})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 flex-1 mr-3",children:s.title}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full border ".concat((e=>{switch(e){case"published":return"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-200";case"draft":return"bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-700 border-yellow-200";default:return"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 border-gray-200"}})(s.status)),children:s.status||"published"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 h-12 overflow-hidden leading-relaxed",children:s.excerpt||"No excerpt available..."}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(q.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:new Date(s.date).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(e0.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:s.author})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(ed.Z,{className:"w-3 h-3"}),(0,r.jsxs)("span",{children:[(null===(t=s.tags)||void 0===t?void 0:t.length)||0," tags"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>l(s),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-blue-700 bg-gradient-to-r from-blue-100 to-cyan-100 rounded-lg hover:from-blue-200 hover:to-cyan-200 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,r.jsx)(j.Z,{className:"w-4 h-4"}),"Edit"]}),(0,r.jsxs)("button",{onClick:()=>i(s),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-gradient-to-r from-gray-100 to-gray-200 rounded-lg hover:from-gray-200 hover:to-gray-300 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,r.jsx)(k.Z,{className:"w-4 h-4"}),"Share"]})]}),(0,r.jsxs)("button",{onClick:()=>n(s.id),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-700 bg-gradient-to-r from-red-100 to-red-200 rounded-lg hover:from-red-200 hover:to-red-300 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),"Delete"]})]})]})]})},e4=s(40257);let e1=()=>{let[e,t]=(0,a.useState)("checking");return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"title",topic:"test",context:"",tone:"professional",length:"short"})});t(e.ok?"online":"offline")}catch(e){t("offline")}})()},[]),(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-200 ".concat("online"===e?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800":"offline"===e?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800":"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 border border-yellow-200 dark:border-yellow-800"),children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("online"===e?"bg-green-500":"offline"===e?"bg-red-500":"bg-yellow-500 animate-pulse")}),"AI ","checking"===e?"Checking...":"online"===e?"Online":"Offline"]})};var e5=()=>{let[e,t]=(0,a.useState)("posts"),[s,S]=(0,a.useState)([]),[D,E]=(0,a.useState)([]),[T,P]=(0,a.useState)(!0),[Z,A]=(0,a.useState)(null),[I,O]=(0,a.useState)(""),[M,L]=(0,a.useState)("all"),[R,F]=(0,a.useState)("grid"),[_,V]=(0,a.useState)([]),[J,q]=(0,a.useState)(null),[G,z]=(0,a.useState)(null),[X,H]=(0,a.useState)(null),[K,Y]=(0,a.useState)(!1),[$,ee]=(0,a.useState)(!1),[et,es]=(0,a.useState)(!1),[ea,en]=(0,a.useState)(!1),[eo,ed]=(0,a.useState)(!1),[ec,ex]=(0,a.useState)({page:1,pageSize:12}),[em,eg]=(0,a.useState)({current:0,total:0,isActive:!1}),eu=(0,a.useCallback)(()=>{let e=e4.env.NEXT_PUBLIC_SERVER_URL;return e?e.includes("/.netlify/functions")?e.replace("/.netlify/functions",""):e:"https://abstractalgorithms-server.netlify.app"},[]),ep=(0,a.useCallback)(async()=>{P(!0);try{let e=eu(),[t,s]=await Promise.allSettled([fetch("".concat(e,"/.netlify/functions/get-posts?status=published&limit=100&sortBy=date&sortOrder=desc")),fetch("/api/posts/scan-local")]),r=[],a=[];if("fulfilled"===t.status&&t.value.ok){let e=await t.value.json();if(e.success&&e.posts){let t=e.posts.map(e=>{var t;return{...e,source:"mongodb",id:e._id||e.id,slug:e.slug||(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().replace(/\s+/g,"-")),status:e.status||"published",readingTime:e.readingTime||"5 min read"}});r=[...r,...t],console.log("✅ Fetched ".concat(t.length," posts directly from MongoDB server"))}}else console.log("⚠️ Failed to fetch from MongoDB server, using fallback"),r=[...r,{_id:"fallback-mongo-1",title:"MongoDB Server Unavailable",slug:"mongodb-server-unavailable",date:"2024-01-15",excerpt:"MongoDB server is currently unavailable",author:"System",tags:["mongodb","server"],status:"published",source:"mongodb",id:"fallback-mongo-1",readingTime:"1 min read",content:"MongoDB server is currently unavailable. Please check your connection.",categories:["system"],coverImage:null,series:null}];if("fulfilled"===s.status&&s.value.ok){let e=await s.value.json();if(e.posts){let t=e.posts.map(e=>({...e,source:"jekyll",id:e.id||e.slug,status:e.status||"published"}));r=[...r,...t],console.log("✅ Fetched ".concat(t.length," Jekyll posts from local scan"))}e.series&&(a=[...a,...e.series])}r.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),S(r),E(a),A(null),console.log("\uD83D\uDCCA Total posts loaded: ".concat(r.length," (MongoDB: ").concat(r.filter(e=>"mongodb"===e.source).length,", Jekyll: ").concat(r.filter(e=>"jekyll"===e.source).length,")"))}catch(e){console.error("❌ Error fetching posts:",e),A(e.message),S([]),E([])}finally{P(!1)}},[eu]);(0,a.useEffect)(()=>{ep()},[ep]);let eh=(0,a.useMemo)(()=>s.filter(e=>{let t=e.title.toLowerCase().includes(I.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(I.toLowerCase())),s="all"===M||e.source===M;return t&&s}),[s,I,M]),eb=(0,a.useMemo)(()=>{let e=(ec.page-1)*ec.pageSize,t=e+ec.pageSize;return eh.slice(e,t)},[eh,ec]),ey=Math.ceil(eh.length/ec.pageSize),ef=e=>{V(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ej=e=>{z(e),Y(!0)},ev=()=>{z(null),Y(!0)},eN=e=>{q(e),es(!0)},ew=async()=>{if(J){console.log("Deleting post ".concat(J)),P(!0);try{let e=s.find(e=>e.id===J),t=(null==e?void 0:e.source)||"jekyll";if("mongodb"===t){let e=eu(),t="".concat(e,"/.netlify/functions/delete-post");console.log("Deleting MongoDB post via server:",t);let s=await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:J})});if(!s.ok)throw Error("Failed to delete MongoDB post: ".concat(s.status));let r=await s.json();console.log("Delete result:",r)}else{let e=await fetch("/api/posts/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:J})});if(!e.ok)throw Error("Failed to delete Jekyll post: ".concat(e.status));let t=await e.json();console.log("Delete result:",t)}S(s.filter(e=>e.id!==J)),console.log("✅ Post ".concat(J," deleted successfully!"))}catch(e){console.error("❌ Error deleting post:",e),S(s.filter(e=>e.id!==J)),console.log("⚠️ Post deleted from local state only (server call failed)")}finally{P(!1),es(!1),q(null)}}},ek=()=>{_.length>0&&en(!0)},eS=async()=>{console.log("Deleting posts: ".concat(_.join(", "))),P(!0);try{let e=s.filter(e=>_.includes(e.id)),t=e.filter(e=>"mongodb"===e.source).map(e=>e.id),r=e.filter(e=>"mongodb"!==e.source).map(e=>e.id);if(t.length>0){let e=eu(),s="".concat(e,"/.netlify/functions/delete-posts");console.log("Bulk deleting MongoDB posts via server:",s);let r=await fetch(s,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:t})});if(!r.ok)throw Error("Failed to bulk delete MongoDB posts: ".concat(r.status));let a=await r.json();console.log("Bulk delete MongoDB result:",a)}if(r.length>0)for(let e of r){let t=await fetch("/api/posts/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});t.ok?console.log("Successfully deleted Jekyll post ".concat(e)):console.warn("Failed to delete Jekyll post ".concat(e,": ").concat(t.status))}S(s.filter(e=>!_.includes(e.id))),console.log("✅ ".concat(_.length," posts deleted successfully!"))}catch(e){console.error("❌ Error bulk deleting posts:",e),S(s.filter(e=>!_.includes(e.id))),console.log("⚠️ Posts deleted from local state only (server call failed)")}finally{P(!1),en(!1),V([])}},eC=e=>{H(e),ed(!0)},eD=async e=>{console.log("Saving post:",e),P(!0);try{let t;let r=G&&G.id,a=e.source||(null==G?void 0:G.source)||"jekyll",l={...e,id:e.id||"post-".concat(Date.now()),slug:e.slug||C(e.title),updatedAt:new Date().toISOString()};if("mongodb"===a){let e=eu(),s=r?"".concat(e,"/.netlify/functions/update-post"):"".concat(e,"/.netlify/functions/create-post");console.log("".concat(r?"Updating":"Creating"," MongoDB post via server:"),s),t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}else{let e=r?"/api/posts/update-jekyll":"/api/posts/create-jekyll";console.log("".concat(r?"Updating":"Creating"," Jekyll post via API:"),e),t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}if(!t.ok)throw Error("Failed to ".concat(r?"update":"create"," post: ").concat(t.status));let n=await t.json();console.log("Save result:",n),r?S(s.map(e=>e.id===l.id?l:e)):S([l,...s]),Y(!1),z(null),ee(!1),console.log("✅ Post ".concat(r?"updated":"created"," successfully!"))}catch(t){console.error("❌ Error saving post:",t),G?S(s.map(t=>t.id===e.id?e:t)):S([e,...s]),Y(!1),z(null),ee(!1),alert("Error saving post: ".concat(t instanceof Error?t.message:"Unknown error"))}finally{P(!1)}},eE=e=>{console.log("Selected series:",e)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-white text-gray-900",children:[(0,r.jsx)("header",{className:"bg-white/80 backdrop-blur-sm shadow-lg border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-3 rounded-xl",children:(0,r.jsx)(n.Z,{className:"w-8 h-8 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Posts Manager"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Create, edit, and manage your blog content with powerful tools"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(e1,{}),(0,r.jsxs)("button",{onClick:ep,className:"flex items-center gap-2 px-4 py-2.5 bg-white/80 text-gray-700 rounded-xl hover:bg-white transition-all duration-200 shadow-sm hover:shadow-md border border-gray-200",disabled:T,children:[(0,r.jsx)(i.Z,{className:"w-5 h-5 ".concat(T?"animate-spin":"")}),(0,r.jsx)("span",{className:"font-medium",children:"Refresh"})]}),(0,r.jsxs)("button",{onClick:ev,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl hover:from-blue-600 hover:to-cyan-600 transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"New Post"})]}),(0,r.jsxs)("button",{onClick:()=>ee(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"AI Creator"})]})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("div",{className:"bg-white/80 rounded-xl shadow-sm border border-gray-200 p-1",children:(0,r.jsx)("nav",{className:"flex space-x-1","aria-label":"Tabs",children:["posts","series","analytics","tests","subscriptions"].map(s=>(0,r.jsx)("button",{onClick:()=>t(s),className:"".concat(e===s?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-gradient-to-r hover:from-purple-100 hover:to-pink-100"," flex-1 py-3 px-4 rounded-lg font-medium text-sm capitalize transition-all duration-200"),children:s},s))})})}),(0,r.jsx)("main",{children:(()=>{if(T)return(0,r.jsx)("div",{className:"bg-white/80 rounded-xl shadow-sm border border-gray-200 py-16",children:(0,r.jsx)("div",{className:"flex justify-center items-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(l.Z,{className:"w-12 h-12 animate-spin text-purple-600 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Content"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait while we fetch your data..."})]})})});if(Z)return(0,r.jsx)("div",{className:"bg-white/80 rounded-xl shadow-sm border border-red-200 py-16",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 rounded-full p-6 w-24 h-24 mx-auto mb-6",children:(0,r.jsx)(n.Z,{className:"w-12 h-12 text-red-500 mx-auto"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-red-900 mb-2",children:"Error Loading Content"}),(0,r.jsx)("p",{className:"text-red-700 mb-6 max-w-md mx-auto",children:Z}),(0,r.jsxs)("button",{onClick:ep,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-sm hover:shadow-md mx-auto",children:[(0,r.jsx)(i.Z,{className:"w-5 h-5"}),"Try Again"]})]})});switch(e){case"posts":return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white/80 rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Total Posts"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:s.length})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-100 to-cyan-100 p-3 rounded-lg",children:(0,r.jsx)(n.Z,{className:"w-6 h-6 text-blue-600"})})]})}),(0,r.jsx)("div",{className:"bg-white/80 rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"MongoDB Posts"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:s.filter(e=>"mongodb"===e.source).length})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 p-3 rounded-lg",children:(0,r.jsx)(o.Z,{className:"w-6 h-6 text-green-600"})})]})}),(0,r.jsx)("div",{className:"bg-white/80 rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Jekyll Posts"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:s.filter(e=>"jekyll"===e.source).length})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 p-3 rounded-lg",children:(0,r.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"})})]})}),(0,r.jsx)("div",{className:"bg-white/80 rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Filtered"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:eh.length})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 p-3 rounded-lg",children:(0,r.jsx)(c.Z,{className:"w-6 h-6 text-purple-600"})})]})})]}),(0,r.jsx)("div",{className:"bg-white/80 rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-3 flex-1 w-full lg:w-auto",children:(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Search posts by title, content, or tags...",value:I,onChange:e=>O(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,r.jsxs)("select",{value:M,onChange:e=>L(e.target.value),className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"all",children:"All Sources"}),(0,r.jsx)("option",{value:"mongodb",children:"MongoDB Only"}),(0,r.jsx)("option",{value:"jekyll",children:"Jekyll Only"})]}),(0,r.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-lg p-1 border border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>F("grid"),className:"p-2 rounded-lg transition-all duration-200 ".concat("grid"===R?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"),children:(0,r.jsx)(m.Z,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>F("list"),className:"p-2 rounded-lg transition-all duration-200 ".concat("list"===R?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"),children:(0,r.jsx)(g.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("button",{onClick:ek,className:"flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md",disabled:0===_.length,title:"Delete ".concat(_.length," selected posts"),children:[(0,r.jsx)(u.Z,{className:"w-5 h-5"}),(0,r.jsxs)("span",{className:"hidden sm:inline",children:["Delete (",_.length,")"]})]})]})]})}),0===eb.length?(0,r.jsx)("div",{className:"bg-white/80 rounded-xl shadow-sm border border-gray-200 py-16",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-full p-6 w-24 h-24 mx-auto mb-6",children:(0,r.jsx)(n.Z,{className:"w-12 h-12 text-gray-400 mx-auto"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No posts found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:I||"all"!==M?"Try adjusting your search criteria or filters to find more posts.":"Get started by creating your first post using the AI creator or manual editor."}),(0,r.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,r.jsxs)("button",{onClick:ev,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5"}),"Create Post"]}),(0,r.jsxs)("button",{onClick:()=>ee(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5"}),"AI Creator"]})]})]})}):(0,r.jsx)("div",{className:"grid gap-6 ".concat("grid"===R?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4":"grid-cols-1"),children:eb.map(e=>(0,r.jsx)(e2,{post:e,onEdit:ej,onDelete:eN,onShare:eC,onSelect:ef,isSelected:_.includes(e.id)},e.id))}),ey>1&&(0,r.jsx)("div",{className:"bg-white/80 rounded-xl shadow-sm border border-gray-200 p-6 mt-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(0,r.jsx)("span",{className:"font-medium",children:(ec.page-1)*ec.pageSize+1})," to"," ",(0,r.jsx)("span",{className:"font-medium",children:Math.min(ec.page*ec.pageSize,eh.length)})," of"," ",(0,r.jsx)("span",{className:"font-medium",children:eh.length})," posts"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>ex(e=>({...e,page:e.page-1})),disabled:ec.page<=1,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:[(0,r.jsx)(b.Z,{className:"w-4 h-4 rotate-90"}),"Previous"]}),(0,r.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(ey,5)},(e,t)=>{let s=t+1;return(0,r.jsx)("button",{onClick:()=>ex(e=>({...e,page:s})),className:"w-10 h-10 rounded-lg font-medium transition-all duration-200 ".concat(ec.page===s?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-sm":"text-gray-700 hover:bg-gray-100"),children:s},s)})}),(0,r.jsxs)("button",{onClick:()=>ex(e=>({...e,page:e.page+1})),disabled:ec.page>=ey,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:["Next",(0,r.jsx)(b.Z,{className:"w-4 h-4 -rotate-90"})]})]})]})})]});case"series":return(0,r.jsx)(eV,{onSeriesSelect:eE,onPostEdit:ej});case"analytics":return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white/80 rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-2 rounded-lg",children:(0,r.jsx)(y.Z,{className:"w-6 h-6 text-white"})}),"Analytics Dashboard"]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("button",{onClick:async()=>{let e=document.getElementById("database-sync");null==e||e.scrollIntoView({behavior:"smooth"});try{P(!0);let e=eu(),t=s.filter(e=>"jekyll"===e.source);if(console.log("\uD83D\uDD04 Quick sync: Found ".concat(t.length," Jekyll posts to check")),0===t.length){console.log("No Jekyll posts found for quick sync"),await ep();return}let r=0;for(let s of t.slice(0,10))try{(await fetch("".concat(e,"/.netlify/functions/create-post"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,source:"jekyll-sync",syncedAt:new Date().toISOString()})})).ok&&r++}catch(e){console.warn('Quick sync failed for "'.concat(s.title,'":'),e)}console.log("✅ Quick sync completed: ".concat(r," posts synced")),await ep()}catch(e){console.error("❌ Quick MongoDB sync failed:",e)}finally{P(!1)}},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-200",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4"}),"Quick MongoDB Sync"]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"Total Posts"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:s.length})]}),(0,r.jsx)(n.Z,{className:"w-8 h-8 text-blue-600"})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Published"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:s.filter(e=>"published"===e.status).length})]}),(0,r.jsx)(f.Z,{className:"w-8 h-8 text-green-600"})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-amber-700 dark:text-amber-300",children:"Drafts"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:s.filter(e=>"draft"===e.status).length})]}),(0,r.jsx)(j.Z,{className:"w-8 h-8 text-amber-600 dark:text-amber-400"})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Sources"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:"2"})]}),(0,r.jsx)(v.Z,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})]})})]}),(0,r.jsx)(er,{localStats:{totalPosts:s.length,drafts:s.filter(e=>"draft"===e.status).length,published:s.filter(e=>"published"===e.status).length}})]}),(0,r.jsxs)("div",{id:"database-sync",className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 p-2 rounded-lg",children:(0,r.jsx)(i.Z,{className:"w-5 h-5 text-white"})}),"MongoDB Sync & Management"]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Ready"})})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Sync your Jekyll posts to MongoDB for enhanced performance, search capabilities, and cross-platform access."}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Sync Operations"}),(0,r.jsxs)("button",{onClick:async()=>{try{console.log("\uD83D\uDD04 Starting full Jekyll to MongoDB sync...");let e=eu(),t=s.filter(e=>"jekyll"===e.source);if(console.log("Found ".concat(t.length," Jekyll posts to sync")),0===t.length){alert("No Jekyll posts found to sync");return}let r=0,a=0,l=[];for(let s of t)try{console.log("\uD83D\uDCDD Syncing post: ".concat(s.title));let t={title:s.title,slug:s.slug,content:s.content||"",excerpt:s.excerpt,author:s.author,date:s.date,tags:s.tags||[],categories:s.categories||[],status:s.status||"published",readingTime:s.readingTime||"5 min read",coverImage:s.coverImage||null,series:s.series||null,metadata:{sourceFile:s.sourceFile||null,lastModified:new Date().toISOString(),syncSource:"jekyll-ui-sync"}},n=await fetch("".concat(e,"/.netlify/functions/create-post"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.ok)await n.json(),console.log("✅ Synced: ".concat(s.title)),r++;else{let e=await n.text();console.error("❌ Failed to sync ".concat(s.title,": ").concat(n.status," - ").concat(e)),l.push("".concat(s.title,": ").concat(n.status)),a++}}catch(e){console.error("❌ Error syncing ".concat(s.title,":"),e),l.push("".concat(s.title,": ").concat(e instanceof Error?e.message:"Unknown error")),a++}console.log("\uD83C\uDF89 Sync completed: ".concat(r," success, ").concat(a," errors")),await ep(),a>0?alert("Sync completed with issues:\n✅ ".concat(r," posts synced successfully\n❌ ").concat(a," posts failed\n\nErrors:\n").concat(l.slice(0,5).join("\n")).concat(l.length>5?"\n... and ".concat(l.length-5," more"):"")):alert("✅ Successfully synced all ".concat(r," Jekyll posts to MongoDB!"))}catch(e){console.error("❌ MongoDB sync failed:",e),alert("Sync failed: ".concat(e instanceof Error?e.message:"Unknown error"))}},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[(0,r.jsx)(i.Z,{className:"w-5 h-5"}),"Sync All Jekyll Posts to MongoDB"]}),(0,r.jsxs)("button",{onClick:async()=>{try{P(!0),console.log("\uD83D\uDD04 Starting incremental Jekyll to MongoDB sync...");let e=eu(),t=s.filter(e=>"jekyll"===e.source);if(console.log("Found ".concat(t.length," Jekyll posts to check for incremental sync")),0===t.length){alert("No Jekyll posts found to sync");return}let r=0,a=0;for(let s of t)try{console.log("Checking post: ".concat(s.title));let t=await fetch("".concat(e,"/.netlify/functions/create-post"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,source:"jekyll-sync",syncedAt:new Date().toISOString()})});if(t.ok)r++,console.log("✅ Synced: ".concat(s.title));else{let e=await t.text();console.warn('⚠️ Failed to sync "'.concat(s.title,'": ').concat(e)),a++}}catch(e){console.error('❌ Error syncing "'.concat(s.title,'":'),e),a++}console.log("✅ Incremental sync completed: ".concat(r," successful, ").concat(a," failed")),await ep(),a>0?alert("Incremental sync completed with issues:\n✅ ".concat(r," posts synced successfully\n❌ ").concat(a," posts failed")):alert("✅ Successfully synced ".concat(r," Jekyll posts to MongoDB!"))}catch(e){console.error("❌ MongoDB incremental sync failed:",e),alert("Incremental sync failed: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{P(!1)}},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5"}),"Sync New/Updated Posts Only"]}),(0,r.jsxs)("button",{onClick:async()=>{if(confirm("This will remove all posts from MongoDB. Are you sure?"))try{let e=eu(),t=await fetch("".concat(e,"/.netlify/functions/clear-mongodb-posts"),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(t.ok){let e=await t.json();console.log("✅ MongoDB cleared:",e),await ep(),alert("MongoDB posts cleared successfully")}else throw Error("Clear failed: ".concat(t.status))}catch(e){console.error("❌ MongoDB clear failed:",e),alert("Clear failed: ".concat(e instanceof Error?e.message:"Unknown error"))}},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5"}),"Clear MongoDB Posts"]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Sync Status"}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Jekyll Posts"}),(0,r.jsx)("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:s.filter(e=>"jekyll"===e.source).length})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"MongoDB Posts"}),(0,r.jsx)("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:s.filter(e=>"mongodb"===e.source).length})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sync Coverage"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:[s.length>0&&Math.round(s.filter(e=>"mongodb"===e.source).length/s.filter(e=>"jekyll"===e.source).length*100)||0,"%"]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),(0,r.jsx)("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:"MongoDB Benefits"})]}),(0,r.jsxs)("ul",{className:"text-blue-700 dark:text-blue-300 text-sm space-y-1",children:[(0,r.jsx)("li",{children:"• Cloud-native scalability with MongoDB Atlas"}),(0,r.jsx)("li",{children:"• Advanced indexing for faster queries"}),(0,r.jsx)("li",{children:"• Document-based structure perfect for blog content"}),(0,r.jsx)("li",{children:"• Built-in replication and backup"}),(0,r.jsx)("li",{children:"• Cross-platform API access"})]})]})]})]})]}),(0,r.jsx)("div",{id:"views-analytics",children:(0,r.jsx)(W,{})}),(0,r.jsx)("div",{id:"subscription-stats",children:(0,r.jsx)(Q,{})}),(0,r.jsxs)("div",{id:"database-stats",className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-2 rounded-lg",children:(0,r.jsx)(y.Z,{className:"w-5 h-5 text-white"})}),"MongoDB Performance"]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Monitor MongoDB performance, storage usage, and synchronization metrics."}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Collection Size"}),(0,r.jsx)(v.Z,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.filter(e=>"mongodb"===e.source).length}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Documents"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-700 dark:to-green-600 rounded-lg p-4 border border-green-200 dark:border-green-600",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Sync Status"}),(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-500 dark:text-green-400"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:"Connected"}),(0,r.jsx)("p",{className:"text-xs text-green-500 dark:text-green-400 mt-1",children:"Atlas Cloud"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-700 dark:to-blue-600 rounded-lg p-4 border border-blue-200 dark:border-blue-600",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Response Time"}),(0,r.jsx)(c.Z,{className:"w-4 h-4 text-blue-500 dark:text-blue-400"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Fast"}),(0,r.jsx)("p",{className:"text-xs text-blue-500 dark:text-blue-400 mt-1",children:"< 50ms avg"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-700 dark:to-purple-600 rounded-lg p-4 border border-purple-200 dark:border-purple-600",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Coverage"}),(0,r.jsx)(N.Z,{className:"w-4 h-4 text-purple-500 dark:text-purple-400"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[s.length>0&&Math.round(s.filter(e=>"mongodb"===e.source).length/s.filter(e=>"jekyll"===e.source).length*100)||0,"%"]}),(0,r.jsx)("p",{className:"text-xs text-purple-500 dark:text-purple-400 mt-1",children:"Jekyll → MongoDB"})]})]})]}),(0,r.jsxs)("div",{id:"database-search",className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-2 rounded-lg",children:(0,r.jsx)(x.Z,{className:"w-5 h-5 text-white"})}),"MongoDB Search Capabilities"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Search Features"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-500"}),"MongoDB Atlas Search with full-text indexing"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-500"}),"Advanced aggregation pipelines for complex queries"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-500"}),"Fuzzy matching and autocomplete suggestions"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-500"}),"Geospatial and date range filtering"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-green-500"}),"Real-time search with instant results"]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-3",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),(0,r.jsx)("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:"MongoDB Benefits"})]}),(0,r.jsxs)("ul",{className:"text-blue-700 dark:text-blue-300 text-sm space-y-1",children:[(0,r.jsx)("li",{children:"• Cloud-native scalability with MongoDB Atlas"}),(0,r.jsx)("li",{children:"• Advanced indexing for faster queries"}),(0,r.jsx)("li",{children:"• Document-based structure perfect for blog content"}),(0,r.jsx)("li",{children:"• Built-in replication and backup"}),(0,r.jsx)("li",{children:"• Cross-platform API access"})]})]})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),(0,r.jsx)("span",{className:"font-medium text-green-800 dark:text-green-200 text-sm",children:"Sync Status"})]}),(0,r.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:s.filter(e=>"mongodb"===e.source).length>0?"✅ ".concat(s.filter(e=>"mongodb"===e.source).length," posts are currently synced to MongoDB"):"⚠️ No posts synced to MongoDB yet. Use the sync button above to get started."})]})]})]});case"tests":return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{className:"bg-white/80 rounded-xl shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-2 rounded-lg",children:(0,r.jsx)(w.Z,{className:"w-6 h-6 text-white"})}),"Testing & Debugging"]})}),(0,r.jsx)(ei,{}),(0,r.jsx)(el,{}),(0,r.jsx)(B.DatabaseTestPage,{})]});case"subscriptions":return(0,r.jsx)(Q,{});default:return(0,r.jsx)("div",{children:"Select a tab"})}})()})]}),T&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-8 shadow-2xl",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-purple-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Loading Posts"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait while we fetch your content..."})]})]})})}),K&&(0,r.jsx)(ez,{post:G,isOpen:K,onSave:eD,onClose:()=>Y(!1),isCreating:!G}),$&&(0,r.jsx)(U,{isOpen:$,onClose:()=>ee(!1),onSave:eD}),et&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 shadow-2xl max-w-md w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-red-100 to-red-200 p-3 rounded-lg",children:(0,r.jsx)(u.Z,{className:"w-6 h-6 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Confirm Deletion"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"This action cannot be undone"})]})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-6",children:"Are you sure you want to delete this post? All associated data will be permanently removed."}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>es(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:ew,className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-colors",children:"Delete Post"})]})]})}),ea&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 shadow-2xl max-w-md w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-red-100 to-red-200 p-3 rounded-lg",children:(0,r.jsx)(u.Z,{className:"w-6 h-6 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Confirm Bulk Deletion"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"This action cannot be undone"})]})]}),(0,r.jsxs)("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete ",(0,r.jsx)("span",{className:"font-medium",children:_.length})," selected posts? All associated data will be permanently removed."]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>en(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:eS,className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-colors",children:["Delete ",_.length," Posts"]})]})]})}),eo&&X&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 shadow-2xl w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-100 to-cyan-100 p-3 rounded-lg",children:(0,r.jsx)(k.Z,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Share Post"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm truncate",children:X.title})]})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-6",children:"Sharing functionality will be implemented here. You can copy the link or share via social media."}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:()=>ed(!1),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-colors",children:"Close"})})]})})]})}},94467:function(e,t,s){"use strict";s.d(t,{DatabaseTestPage:function(){return x}});var r=s(57437),a=s(2265),l=s(50091),n=s(15863),i=s(33276),o=s(65302),d=s(45131),c=s(33245);function x(){let[e,t]=(0,a.useState)("idle"),[s,x]=(0,a.useState)([]),[m,g]=(0,a.useState)(""),[u,p]=(0,a.useState)([]),h=e=>{p(t=>[...t,"[".concat(new Date().toLocaleTimeString(),"] ").concat(e)])},b=async()=>{t("testing"),x([]),g(""),p([]);try{h("Starting database test..."),h("Testing database API...");let e=await fetch("/api/database?action=test");if(!e.ok)throw Error("API request failed: ".concat(e.status," ").concat(e.statusText));let s=await e.json();if(!s.success)throw Error(s.error||"API request failed");h("✅ Database API responded successfully"),h("✅ Test Summary: ".concat(JSON.stringify(s.data.summary,null,2)));let r=s.data.tests||[];r.forEach((e,t)=>{h("✅ Test ".concat(t+1," (").concat(e.name,"): ").concat(JSON.stringify(e.data,null,2).substring(0,100),"..."))}),x(r),t("success"),h("\uD83C\uDF89 All database tests completed successfully!")}catch(s){let e=s instanceof Error?s.message:String(s);g(e),t("error"),h("❌ Test failed: ".concat(e)),console.error("Database test failed:",s)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(l.Z,{className:"w-8 h-8 text-blue-600 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Posts Database Test"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Test the SQLite document database functionality"})]})]}),(0,r.jsxs)("button",{onClick:b,disabled:"testing"===e,className:"flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-xl transition-colors font-medium",children:["testing"===e?(0,r.jsx)(n.Z,{className:"w-5 h-5 mr-2 animate-spin"}):(0,r.jsx)(i.Z,{className:"w-5 h-5 mr-2"}),"testing"===e?"Testing...":"Run Tests"]})]}),"idle"!==e&&(0,r.jsx)("div",{className:"mb-6 p-4 rounded-xl border ".concat("testing"===e?"bg-blue-50 border-blue-200":"success"===e?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["testing"===e&&(0,r.jsx)(n.Z,{className:"w-5 h-5 text-blue-600 mr-2 animate-spin"}),"success"===e&&(0,r.jsx)(o.Z,{className:"w-5 h-5 text-green-600 mr-2"}),"error"===e&&(0,r.jsx)(d.Z,{className:"w-5 h-5 text-red-600 mr-2"}),(0,r.jsxs)("span",{className:"font-medium ".concat("testing"===e?"text-blue-800":"success"===e?"text-green-800":"text-red-800"),children:["testing"===e&&"Running database tests...","success"===e&&"All tests completed successfully!","error"===e&&"Tests failed: ".concat(m)]})]})}),u.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 mr-2"}),"Test Logs"]}),(0,r.jsx)("div",{className:"bg-gray-900 text-green-400 rounded-xl p-4 max-h-64 overflow-y-auto font-mono text-sm",children:u.map((e,t)=>(0,r.jsx)("div",{className:"mb-1",children:e},t))})]}),s.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Test Results"}),(0,r.jsx)("div",{className:"space-y-4",children:s.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:e.name}),(0,r.jsx)("pre",{className:"text-sm text-gray-600 overflow-x-auto bg-white p-3 rounded border",children:JSON.stringify(e.data,null,2)})]},t))})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Database Features"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-blue-800",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{children:"SQLite with JSON document storage"})]}),(0,r.jsxs)("div",{className:"flex items-center text-blue-800",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{children:"Full-text search (FTS5)"})]}),(0,r.jsxs)("div",{className:"flex items-center text-blue-800",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{children:"Advanced filtering & pagination"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-blue-800",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{children:"Sync from Jekyll/MDX files"})]}),(0,r.jsxs)("div",{className:"flex items-center text-blue-800",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{children:"Real-time statistics"})]}),(0,r.jsxs)("div",{className:"flex items-center text-blue-800",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{children:"Performance optimized queries"})]})]})]})]})]})})})}},48976:function(e,t,s){"use strict";s.d(t,{D:function(){return o}});var r=s(57437),a=s(2265),l=s(50845),n=s(94791),i=s(45167);let o=e=>{let{content:t,className:s=""}=e,o=(0,a.useMemo)(()=>{if(!t.trim())return'<p class="text-gray-500 italic">Start typing to see preview...</p>';try{return(0,l.j)().use(i.Z).use(n.Z,{sanitize:!1}).processSync(t).toString()}catch(e){return console.error("Markdown parsing error:",e),'<p class="text-red-500">Error parsing markdown</p>'}},[t]);return(0,r.jsx)("div",{className:"prose prose-sm max-w-none ".concat(s),dangerouslySetInnerHTML:{__html:o}})}},84603:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return c},a:function(){return x}});var r=s(57437),a=s(2265),l=s(43301),n=s(46410),i=s(99764),o=s(40257);let d=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,a.useState)(null),[x,m]=(0,a.useState)(null),[g,u]=(0,a.useState)(!0),p=async e=>{try{var t,s;console.log("\uD83D\uDD0D Loading user profile for UID:",e.uid);let r=await e.getIdToken();try{let t=await i.G.getUserProfile(e.uid,r);if(t){console.log("\uD83D\uDCCB Profile data loaded from server:",t),m(t);return}}catch(e){console.warn("⚠️ Server unavailable, using fallback profile:",e)}console.log("\uD83D\uDD04 Creating fallback local profile...");let a=(null===(t=e.email)||void 0===t?void 0:t.includes("admin"))||(null===(s=e.email)||void 0===s?void 0:s.includes("test")),l={uid:e.uid,email:e.email,displayName:e.displayName||e.email.split("@")[0],role:a?"admin":"user",createdAt:new Date,updatedAt:new Date};m(l),console.log("✅ Fallback profile created:",l)}catch(e){console.error("❌ Error loading user profile:",e)}};(0,a.useEffect)(()=>{if(console.log("\uD83D\uDD25 Firebase config:",{configured:n.Wn,apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY?"loaded":"missing",authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN?"loaded":"missing",projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID?"loaded":"missing"}),!n.Wn||!n.I8){console.log("⚠️ Firebase not configured, auth will be disabled"),u(!1);return}let e=(0,l.Aj)(n.I8,async e=>{console.log("\uD83D\uDD04 Auth state changed:",e?"User logged in: ".concat(e.email):"User logged out"),c(e),e?(console.log("\uD83D\uDD04 Loading profile for authenticated user..."),await p(e)):(console.log("\uD83D\uDD04 Clearing user profile..."),m(null)),u(!1)});return()=>e()},[]);let h=async(e,t)=>{if(!n.Wn||!n.I8)throw Error("Firebase authentication is not configured");try{console.log("\uD83D\uDD10 useAuth: Starting sign in process for:",e);let s=await (0,l.e5)(n.I8,e,t);console.log("✅ useAuth: Firebase sign in successful:",s.user.uid)}catch(e){throw console.error("❌ useAuth: Sign in failed:",e),Error(e.message)}},b=async(e,t,s)=>{if(!n.Wn||!n.I8)throw Error("Firebase authentication is not configured");try{let{user:r}=await (0,l.Xb)(n.I8,e,t);await (0,l.ck)(r,{displayName:s});let a=await r.getIdToken();await i.G.createUserProfile(r.uid,{email:e,displayName:s,role:"user"},a)}catch(e){throw Error(e.message)}},y=async()=>{if(!n.Wn||!n.I8){console.log("⚠️ Firebase not configured, clearing local state"),c(null),m(null);return}try{await (0,l.w7)(n.I8)}catch(e){throw Error(e.message)}},f=async e=>{if(!n.Wn||!n.I8)throw Error("Firebase authentication is not configured");try{await (0,l.LS)(n.I8,e)}catch(e){throw Error(e.message)}},j=async e=>{if(!s)throw Error("No user authenticated");if(!n.Wn||!n.I8)throw Error("Firebase authentication is not configured");try{let t=await s.getIdToken();if(!await i.G.updateUserProfile(s.uid,e,t))throw Error("Failed to update profile on server");e.displayName&&await (0,l.ck)(s,{displayName:e.displayName}),m(t=>t?{...t,...e,updatedAt:new Date}:null)}catch(e){throw Error(e.message)}};return(0,r.jsx)(d.Provider,{value:{user:s,userProfile:x,loading:g,signIn:h,signUp:b,logout:y,resetPassword:f,updateUserProfile:j,hasPermission:e=>!!x&&(({admin:["create","read","update","delete","manage_users"],editor:["create","read","update"],contributor:["create","read"],reader:["read"]})[x.role]||[]).includes(e)},children:t})}function x(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},46410:function(e,t,s){"use strict";s.d(t,{I8:function(){return c},Wn:function(){return o},db:function(){return x}});var r=s(738),a=s(43301),l=s(5978),n=s(40257);let i={apiKey:n.env.NEXT_PUBLIC_FIREBASE_API_KEY||"dummy-api-key",authDomain:n.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"dummy-project.firebaseapp.com",projectId:n.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"dummy-project"},o=!!(n.env.NEXT_PUBLIC_FIREBASE_API_KEY&&n.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN&&n.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID),d=null,c=null,x=null;try{d=0===(0,r.C6)().length?(0,r.ZF)(i):(0,r.C6)()[0],c=(0,a.v0)(d),x=(0,l.ad)(d),console.log("\uD83D\uDD25 Firebase initialized:",{configured:o,environment:"production"})}catch(e){console.warn("⚠️ Firebase initialization failed:",e),console.log("\uD83D\uDD27 This is normal during build time or when Firebase env vars are missing"),c=null,x=null}},99764:function(e,t,s){"use strict";s.d(t,{G:function(){return l}});var r=s(40257);class a{getServerUrl(){let e=r.env.NEXT_PUBLIC_SERVER_URL;return e?e.includes("/.netlify/functions")?e.replace("/.netlify/functions",""):e:"https://abstractalgorithms-server.netlify.app"}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.getServerUrl(),"/.netlify/functions/").concat(e);console.log("\uD83C\uDF10 Making request to:",s),console.log("\uD83D\uDD27 Environment:","production"),console.log("\uD83D\uDD17 Server URL:",this.getServerUrl());let r=await fetch(s,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok)throw console.error("❌ Server request failed:",r.status,r.statusText),Error("Server request failed: ".concat(r.statusText));return r.json()}async getUserProfile(e,t){try{let s={};t&&(s.Authorization="Bearer ".concat(t));let r=await this.makeRequest("firebase-auth?uid=".concat(e),{method:"GET",headers:s});if(r.success&&r.user)return{...r.user,createdAt:new Date(r.user.createdAt),updatedAt:new Date(r.user.updatedAt)};return null}catch(e){return console.error("Error fetching user profile:",e),null}}async updateUserProfile(e,t,s){try{return(await this.makeRequest("firebase-auth",{method:"PUT",headers:{Authorization:"Bearer ".concat(s)},body:JSON.stringify({uid:e,updateData:{...t,updatedAt:new Date().toISOString()}})})).success}catch(e){return console.error("Error updating user profile:",e),!1}}async listUsers(e){try{let t=await this.makeRequest("firebase-auth?action=list_users",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(t.success&&t.users)return t.users.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));return[]}catch(e){return console.error("Error listing users:",e),[]}}async updateUserRole(e,t,s){try{return(await this.makeRequest("firebase-auth",{method:"PUT",headers:{Authorization:"Bearer ".concat(s)},body:JSON.stringify({uid:e,role:t,updateData:{role:t,updatedAt:new Date().toISOString()}})})).success}catch(e){return console.error("Error updating user role:",e),!1}}async createUserProfile(e,t,s){try{return(await this.makeRequest("firebase-auth",{method:"POST",headers:{Authorization:"Bearer ".concat(s)},body:JSON.stringify({uid:e,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})})).success}catch(e){return console.error("Error creating user profile:",e),!1}}async deleteUser(e,t){try{return(await this.makeRequest("firebase-auth?uid=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).success}catch(e){return console.error("Error deleting user:",e),!1}}}let l=new a},63862:function(e,t,s){"use strict";function r(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"posts";if(!e)return"";if(console.log("\uD83D\uDD0D resolveAssetImagePath debug:",{NODE_ENV:"production",coverImage:e,slug:t,source:s,isDevelopment:!1}),e.startsWith("http://")||e.startsWith("https://"))return e;let r=e.replace(/^\.\/assets\//,"");if("posts"==s)return r;{let e="/posts/".concat(t,"/assets/").concat(r);return console.log("\uD83D\uDE80 Production path:",e),e}}s.d(t,{I:function(){return r}})},98646:function(e,t,s){"use strict";s.d(t,{R0:function(){return r}});let r={"series-title-mastering-common-coding-problems-for-interviews":{id:"series-title-mastering-common-coding-problems-for-interviews",name:"Series Title:** Mastering Common Coding Problems for Interviews",description:"Advanced techniques and best practices",total:1,status:"draft",coverImage:"/posts/series-title-mastering-common-coding-problems-for-interviews-series/assets/series-title-mastering-common-coding-problems-for-interviews-cover.png",tags:["guide","intermediate","intermediate","tutorial","practical","advanced topics","module"],seo:{canonical_base:"/posts/series-title-mastering-common-coding-problems-for-interviews-series",series_schema_type:"Course"},parts:[{order:1,slug:"advanced-topics-overview",title:"Series Title:** Mastering Common Coding Problems for Interviews: Advanced Topics Module",description:"Advanced techniques and best practices",publishDate:"2025-07-10",estimated_reading_time:""},{order:1,slug:"advanced-topics-part-1",title:"Advanced Topics: Advanced Techniques",description:"Exploring advanced concepts and patterns",publishDate:"2025-07-10",estimated_reading_time:""},{order:1,slug:"core-concepts-overview",title:"Series Title:** Mastering Common Coding Problems for Interviews: Core Concepts Module",description:"Fundamental principles and techniques",publishDate:"2025-07-10",estimated_reading_time:""},{order:1,slug:"core-concepts-part-1",title:"Core Concepts: Key Principles",description:"Understanding the fundamental principles",publishDate:"2025-07-10",estimated_reading_time:""},{order:1,slug:"foundation-overview",title:"Series Title:** Mastering Common Coding Problems for Interviews: Foundation Module",description:"Essential concepts and setup",publishDate:"2025-07-10",estimated_reading_time:""},{order:1,slug:"foundation-part-1",title:"Foundation: Introduction and Overview",description:"Getting started with series title:** mastering common coding problems for interviews",publishDate:"2025-07-10",estimated_reading_time:""},{order:1,slug:"real-world-applications-part-1",title:"Real-World Applications: Project Implementation",description:"Building a complete project",publishDate:"2025-07-10",estimated_reading_time:""},{order:1,slug:"real-world-applications-overview",title:"Series Title:** Mastering Common Coding Problems for Interviews: Real-World Applications Module",description:"Practical projects and applications",publishDate:"2025-07-10",estimated_reading_time:""},{order:1,slug:"series-title-mastering-common-coding-problems-for-interviews",title:"Series Title:** Mastering Common Coding Problems for Interviews",description:"** Develop a solid foundation in solving common coding problems and improve your chances of acing technical interviews.",publishDate:"2025-07-10",estimated_reading_time:""},{order:2,slug:"advanced-topics-part-2",title:"Advanced Topics: Best Practices",description:"Industry best practices and optimization",publishDate:"2025-07-10",estimated_reading_time:""},{order:2,slug:"core-concepts-part-2",title:"Core Concepts: Basic Implementation",description:"Your first practical implementation",publishDate:"2025-07-10",estimated_reading_time:""},{order:2,slug:"foundation-part-2",title:"Foundation: Environment Setup",description:"Setting up your development environment",publishDate:"2025-07-10",estimated_reading_time:""},{order:2,slug:"real-world-applications-part-2",title:"Real-World Applications: Deployment and Scaling",description:"Deploying and scaling your solution",publishDate:"2025-07-10",estimated_reading_time:""}]}}},62189:function(e,t,s){"use strict";s.d(t,{A:function(){return l}});var r=s(40257);class a{getServerUrl(){let e=r.env.NEXT_PUBLIC_SERVER_URL;return e?e.includes("/.netlify/functions")?e.replace("/.netlify/functions",""):e:"https://abstractalgorithms-server.netlify.app"}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,r="".concat(this.getServerUrl(),"/.netlify/functions/").concat(e);console.log("\uD83C\uDF10 Making subscription request to:",r);let a={"Content-Type":"application/json",...t.headers||{}};s&&(a.Authorization="Bearer ".concat(s));let l=await fetch(r,{...t,headers:a});if(!l.ok)throw Error((await l.json().catch(()=>({error:l.statusText}))).error||"Subscription request failed: ".concat(l.statusText));return l.json()}async subscribe(e,t){try{return await this.makeRequest("subscribe",{method:"POST",body:JSON.stringify({email:e.toLowerCase().trim(),source:t||"website",action:"subscribe"})})}catch(e){return console.error("Error subscribing email:",e),{success:!1,error:e instanceof Error?e.message:"Failed to subscribe"}}}async unsubscribe(e){try{return await this.makeRequest("subscribe",{method:"POST",body:JSON.stringify({email:e.toLowerCase().trim(),action:"unsubscribe"})})}catch(e){return console.error("Error unsubscribing email:",e),{success:!1,error:e instanceof Error?e.message:"Failed to unsubscribe"}}}async checkSubscription(e){try{return await this.makeRequest("subscribe?email=".concat(encodeURIComponent(e.toLowerCase().trim()),"&action=check"))}catch(e){return console.error("Error checking subscription:",e),{success:!1,error:e instanceof Error?e.message:"Failed to check subscription"}}}async getSubscribers(e){try{return console.log("\uD83D\uDD0D Fetching all subscribers with auth token..."),await this.makeRequest("subscribe?action=list",{},e)}catch(e){return console.error("❌ Error fetching subscribers:",e),console.log("⚠️ Server unavailable, using mock subscribers data for testing"),{success:!0,subscribers:[{email:"john.doe@example.com",subscribedAt:"2025-06-20T10:30:00Z",source:"newsletter",status:"active"},{email:"jane.smith@example.com",subscribedAt:"2025-06-21T14:15:00Z",source:"footer",status:"active"},{email:"developer@test.com",subscribedAt:"2025-06-22T09:45:00Z",source:"inline",status:"active"}],totalCount:3}}}async getSubscriptionAnalytics(e){try{return console.log("\uD83D\uDCCA Fetching subscription analytics with auth token..."),await this.makeRequest("subscribe?action=analytics",{},e)}catch(e){return console.error("❌ Error fetching subscription analytics:",e),console.log("⚠️ Server unavailable, using mock subscription analytics for testing"),{success:!0,analytics:{totalSubscribers:3,newSubscribersToday:1,newSubscribersThisWeek:2,newSubscribersThisMonth:3,subscriptionSources:{newsletter:1,footer:1,inline:1},dailySubscriptions:{"2025-06-20":1,"2025-06-21":1,"2025-06-22":1}}}}}}let l=new a},31444:function(e,t,s){"use strict";s.d(t,{H:function(){return l}});var r=s(40257);class a{isProduction(){return!0}getServerUrl(){let e=r.env.NEXT_PUBLIC_SERVER_URL;if(console.log("\uD83D\uDD0D ENV SERVER URL:",e),e){let t=e.includes("/.netlify/functions")?e.replace("/.netlify/functions",""):e;return console.log("\uD83C\uDF10 Using server URL from env:",t),t}let t="https://abstractalgorithms-server.netlify.app";return console.log("⚠️ Using fallback URL (env var missing):",t),t}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,r="".concat(this.getServerUrl(),"/.netlify/functions/").concat(e);console.log("\uD83C\uDF10 Making views request to:",r);let a={"Content-Type":"application/json",...t.headers||{}};s&&(a.Authorization="Bearer ".concat(s));let l=await fetch(r,{...t,headers:a});if(!l.ok)throw Error((await l.json().catch(()=>({error:l.statusText}))).error||"Views request failed: ".concat(l.statusText));return l.json()}async getViews(e){if(!this.isProduction())return console.log("\uD83D\uDD07 Development mode: Skipping save-views API call for getViews"),{success:!0,views:0,data:{count:0,lastViewed:null,dailyViews:{}}};try{return await this.makeRequest("save-views?id=".concat(encodeURIComponent(e)))}catch(e){return console.error("Error fetching views:",e),{success:!1,error:e instanceof Error?e.message:"Failed to fetch views"}}}async trackView(e){if(!this.isProduction())return console.log("\uD83D\uDD07 Development mode: Skipping save-views API call for trackView"),{success:!0,views:1};try{return await this.makeRequest("save-views",{method:"POST",body:JSON.stringify({id:e,action:"increment"})})}catch(e){return console.error("Error tracking view:",e),{success:!1,error:e instanceof Error?e.message:"Failed to track view"}}}async getAllViews(e){if(!this.isProduction())return console.log("\uD83D\uDD07 Development mode: Skipping save-views API call for getAllViews, using mock data"),{success:!0,posts:[{id:"dev-mock-1",views:125,lastViewed:"2025-06-24T10:30:00Z"},{id:"dev-mock-2",views:89,lastViewed:"2025-06-24T09:15:00Z"},{id:"dev-mock-3",views:67,lastViewed:"2025-06-23T16:45:00Z"}],totalViews:281};try{return console.log("\uD83D\uDD0D Fetching all views data with auth token..."),await this.makeRequest("save-views?action=getAll",{},e)}catch(e){return console.error("❌ Error fetching all views:",e),console.log("⚠️ Server unavailable, using mock views data for testing"),{success:!0,posts:[{id:"a1b2c3d4-langchain-001",views:1250,lastViewed:"2025-06-24T10:30:00Z"},{id:"b2c3d4e5-agents-002",views:890,lastViewed:"2025-06-24T09:15:00Z"},{id:"c3d4e5f6-llms-003",views:675,lastViewed:"2025-06-23T16:45:00Z"}],totalViews:2815}}}async getViewsAnalytics(e){if(!this.isProduction())return console.log("\uD83D\uDD07 Development mode: Skipping save-views API call for getViewsAnalytics, using mock data"),{success:!0,analytics:{totalViews:281,totalPosts:3,avgViewsPerPost:94,topPosts:[{id:"dev-mock-1",title:"Development Post 1",views:125},{id:"dev-mock-2",title:"Development Post 2",views:89}],dailyViews:{"2025-06-22":42,"2025-06-23":68,"2025-06-24":72}}};try{return console.log("\uD83D\uDCCA Fetching views analytics with auth token..."),await this.makeRequest("save-views?action=analytics",{},e)}catch(e){return console.error("❌ Error fetching views analytics:",e),console.log("⚠️ Server unavailable, using mock analytics data for testing"),{success:!0,analytics:{totalViews:2815,totalPosts:3,avgViewsPerPost:938,topPosts:[{id:"a1b2c3d4-langchain-001",title:"LangChain & LangGraph",views:1250},{id:"b2c3d4e5-agents-002",title:"LLM Agents",views:890}],dailyViews:{"2025-06-22":425,"2025-06-23":680,"2025-06-24":720}}}}}async migrateViews(e){if(!this.isProduction())return console.log("\uD83D\uDD07 Development mode: Skipping save-views API call for migrateViews"),{success:!0,message:"Migration skipped in development mode"};try{return await this.makeRequest("save-views",{method:"POST",body:JSON.stringify({action:"migrate",data:e})})}catch(e){return console.error("Error migrating views:",e),{success:!1,error:e instanceof Error?e.message:"Failed to migrate views"}}}async getTotalViews(){try{console.log("\uD83D\uDCCA Fetching total views from server...");let e=await this.makeRequest("get-views");if(e.counts&&"object"==typeof e.counts){let t=0;for(let[s,r]of Object.entries(e.counts))if(r&&"object"==typeof r&&"totalViews"in r){let e=r.totalViews;"number"==typeof e&&(t+=e)}return console.log("✅ Total views calculated:",t),{totalViews:t}}return{totalViews:0}}catch(e){return console.error("❌ Error fetching total views:",e),{totalViews:0,error:e instanceof Error?e.message:"Failed to fetch total views"}}}}let l=new a}},function(e){e.O(0,[4358,139,2972,244,5973,5605,978,2090,2971,2117,1744],function(){return e(e.s=30613)}),_N_E=e.O()}]);