(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7552],{79851:function(e,t,r){Promise.resolve().then(r.bind(r,40408))},39763:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...h}=r;return(0,a.createElement)("svg",{ref:i,...s,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(n(e)),u].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},31047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},98617:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]])},89345:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2207:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]])},95805:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},40408:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(57437),s=r(2265),n=r(84603),i=r(95805),l=r(89345),o=r(98617),c=r(2207),d=r(31047);function u(){let{user:e,userProfile:t,loading:r}=(0,n.a)(),[u]=(0,s.useState)([{uid:"test-1",email:"admin@test.com",displayName:"Test Admin",role:"admin",createdAt:new Date,updatedAt:new Date},{uid:"test-2",email:"user@test.com",displayName:"Test User",role:"user",createdAt:new Date,updatedAt:new Date}]);return r?(0,a.jsx)("div",{className:"p-8",children:"Loading..."}):e?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Admin Dashboard (Test Mode)"}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Current User"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Email:"}),(0,a.jsx)("p",{className:"font-medium",children:e.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Role:"}),(0,a.jsx)("p",{className:"font-medium",children:(null==t?void 0:t.role)||"Loading..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Display Name:"}),(0,a.jsx)("p",{className:"font-medium",children:(null==t?void 0:t.displayName)||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"UID:"}),(0,a.jsx)("p",{className:"font-medium text-xs",children:e.uid})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Test User Management"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"This is a test interface showing how the admin dashboard would work with real data."}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border border-gray-200 rounded-lg",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:u.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-4",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.displayName}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.uid})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2 text-gray-400"}),e.email]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("admin"===e.role?"bg-purple-100 text-purple-800":"content-creator"===e.role?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:["admin"===e.role&&(0,a.jsx)(o.Z,{className:"w-3 h-3 mr-1"}),"content-creator"===e.role&&(0,a.jsx)(c.Z,{className:"w-3 h-3 mr-1"}),e.role]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),e.createdAt.toLocaleDateString()]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",onClick:()=>alert("Would edit user: ".concat(e.displayName)),children:"Edit Role"})})]},e.uid))})]})})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Development Mode"}),(0,a.jsxs)("p",{className:"text-yellow-700 text-sm",children:["This is a test version of the admin dashboard. In production, this would connect to the server at ",(0,a.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:"https://abstractalgorithms-server.netlify.app"}),"to manage real user data."]})]})]})})}):(0,a.jsx)("div",{className:"p-8",children:"Please sign in to access admin features."})}},84603:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return u}});var a=r(57437),s=r(2265),n=r(43301),i=r(46410),l=r(99764),o=r(40257);let c=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[h,x]=(0,s.useState)(!0),f=async e=>{try{var t,r;console.log("\uD83D\uDD0D Loading user profile for UID:",e.uid);let a=await e.getIdToken();try{let t=await l.G.getUserProfile(e.uid,a);if(t){console.log("\uD83D\uDCCB Profile data loaded from server:",t),m(t);return}}catch(e){console.warn("⚠️ Server unavailable, using fallback profile:",e)}console.log("\uD83D\uDD04 Creating fallback local profile...");let s=(null===(t=e.email)||void 0===t?void 0:t.includes("admin"))||(null===(r=e.email)||void 0===r?void 0:r.includes("test")),n={uid:e.uid,email:e.email,displayName:e.displayName||e.email.split("@")[0],role:s?"admin":"user",createdAt:new Date,updatedAt:new Date};m(n),console.log("✅ Fallback profile created:",n)}catch(e){console.error("❌ Error loading user profile:",e)}};(0,s.useEffect)(()=>{if(console.log("\uD83D\uDD25 Firebase config:",{configured:i.Wn,apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY?"loaded":"missing",authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN?"loaded":"missing",projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID?"loaded":"missing"}),!i.Wn||!i.I8){console.log("⚠️ Firebase not configured, auth will be disabled"),x(!1);return}let e=(0,n.Aj)(i.I8,async e=>{console.log("\uD83D\uDD04 Auth state changed:",e?"User logged in: ".concat(e.email):"User logged out"),d(e),e?(console.log("\uD83D\uDD04 Loading profile for authenticated user..."),await f(e)):(console.log("\uD83D\uDD04 Clearing user profile..."),m(null)),x(!1)});return()=>e()},[]);let g=async(e,t)=>{if(!i.Wn||!i.I8)throw Error("Firebase authentication is not configured");try{console.log("\uD83D\uDD10 useAuth: Starting sign in process for:",e);let r=await (0,n.e5)(i.I8,e,t);console.log("✅ useAuth: Firebase sign in successful:",r.user.uid)}catch(e){throw console.error("❌ useAuth: Sign in failed:",e),Error(e.message)}},p=async(e,t,r)=>{if(!i.Wn||!i.I8)throw Error("Firebase authentication is not configured");try{let{user:a}=await (0,n.Xb)(i.I8,e,t);await (0,n.ck)(a,{displayName:r});let s=await a.getIdToken();await l.G.createUserProfile(a.uid,{email:e,displayName:r,role:"user"},s)}catch(e){throw Error(e.message)}},y=async()=>{if(!i.Wn||!i.I8){console.log("⚠️ Firebase not configured, clearing local state"),d(null),m(null);return}try{await (0,n.w7)(i.I8)}catch(e){throw Error(e.message)}},w=async e=>{if(!i.Wn||!i.I8)throw Error("Firebase authentication is not configured");try{await (0,n.LS)(i.I8,e)}catch(e){throw Error(e.message)}},N=async e=>{if(!r)throw Error("No user authenticated");if(!i.Wn||!i.I8)throw Error("Firebase authentication is not configured");try{let t=await r.getIdToken();if(!await l.G.updateUserProfile(r.uid,e,t))throw Error("Failed to update profile on server");e.displayName&&await (0,n.ck)(r,{displayName:e.displayName}),m(t=>t?{...t,...e,updatedAt:new Date}:null)}catch(e){throw Error(e.message)}};return(0,a.jsx)(c.Provider,{value:{user:r,userProfile:u,loading:h,signIn:g,signUp:p,logout:y,resetPassword:w,updateUserProfile:N,hasPermission:e=>!!u&&(({admin:["create","read","update","delete","manage_users"],editor:["create","read","update"],contributor:["create","read"],reader:["read"]})[u.role]||[]).includes(e)},children:t})}function u(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},46410:function(e,t,r){"use strict";r.d(t,{I8:function(){return d},Wn:function(){return o},db:function(){return u}});var a=r(738),s=r(43301),n=r(5978),i=r(40257);let l={apiKey:i.env.NEXT_PUBLIC_FIREBASE_API_KEY||"dummy-api-key",authDomain:i.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"dummy-project.firebaseapp.com",projectId:i.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"dummy-project"},o=!!(i.env.NEXT_PUBLIC_FIREBASE_API_KEY&&i.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN&&i.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID),c=null,d=null,u=null;try{c=0===(0,a.C6)().length?(0,a.ZF)(l):(0,a.C6)()[0],d=(0,s.v0)(c),u=(0,n.ad)(c),console.log("\uD83D\uDD25 Firebase initialized:",{configured:o,environment:"production"})}catch(e){console.warn("⚠️ Firebase initialization failed:",e),console.log("\uD83D\uDD27 This is normal during build time or when Firebase env vars are missing"),d=null,u=null}},99764:function(e,t,r){"use strict";r.d(t,{G:function(){return n}});var a=r(40257);class s{getServerUrl(){let e=a.env.NEXT_PUBLIC_SERVER_URL;return e?e.includes("/.netlify/functions")?e.replace("/.netlify/functions",""):e:"https://abstractalgorithms-server.netlify.app"}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.getServerUrl(),"/.netlify/functions/").concat(e);console.log("\uD83C\uDF10 Making request to:",r),console.log("\uD83D\uDD27 Environment:","production"),console.log("\uD83D\uDD17 Server URL:",this.getServerUrl());let a=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!a.ok)throw console.error("❌ Server request failed:",a.status,a.statusText),Error("Server request failed: ".concat(a.statusText));return a.json()}async getUserProfile(e,t){try{let r={};t&&(r.Authorization="Bearer ".concat(t));let a=await this.makeRequest("firebase-auth?uid=".concat(e),{method:"GET",headers:r});if(a.success&&a.user)return{...a.user,createdAt:new Date(a.user.createdAt),updatedAt:new Date(a.user.updatedAt)};return null}catch(e){return console.error("Error fetching user profile:",e),null}}async updateUserProfile(e,t,r){try{return(await this.makeRequest("firebase-auth",{method:"PUT",headers:{Authorization:"Bearer ".concat(r)},body:JSON.stringify({uid:e,updateData:{...t,updatedAt:new Date().toISOString()}})})).success}catch(e){return console.error("Error updating user profile:",e),!1}}async listUsers(e){try{let t=await this.makeRequest("firebase-auth?action=list_users",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(t.success&&t.users)return t.users.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));return[]}catch(e){return console.error("Error listing users:",e),[]}}async updateUserRole(e,t,r){try{return(await this.makeRequest("firebase-auth",{method:"PUT",headers:{Authorization:"Bearer ".concat(r)},body:JSON.stringify({uid:e,role:t,updateData:{role:t,updatedAt:new Date().toISOString()}})})).success}catch(e){return console.error("Error updating user role:",e),!1}}async createUserProfile(e,t,r){try{return(await this.makeRequest("firebase-auth",{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:JSON.stringify({uid:e,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})})).success}catch(e){return console.error("Error creating user profile:",e),!1}}async deleteUser(e,t){try{return(await this.makeRequest("firebase-auth?uid=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).success}catch(e){return console.error("Error deleting user:",e),!1}}}let n=new s}},function(e){e.O(0,[4358,139,244,5973,5605,2971,2117,1744],function(){return e(e.s=79851)}),_N_E=e.O()}]);