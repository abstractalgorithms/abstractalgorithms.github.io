(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3645],{59892:function(e,t,r){Promise.resolve().then(r.bind(r,25310))},40257:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(48121)},48121:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c=[],u=!1,l=-1;function d(){u&&n&&(u=!1,n.length?c=n.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(n=c,c=[];++l<t;)n&&n[l].run();l=-1,t=c.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var o=r[e]={exports:{}},i=!0;try{t[e](o,o.exports,n),i=!1}finally{i&&delete r[e]}return o.exports}n.ab="//";var s=n(229);e.exports=s}()},25310:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(57437),s=r(2265),o=r(99764),i=r(40257);function a(){let[e,t]=(0,s.useState)(""),[r,a]=(0,s.useState)(!1),c=async()=>{a(!0),t("Testing Firebase Auth endpoint...");try{console.log("\uD83E\uDDEA Testing Firebase Auth API call...");let e=await o.G.getUserProfile("test-uid");console.log("\uD83D\uDCCB API Response:",e),t("Success: ".concat(JSON.stringify(e,null,2)))}catch(e){console.error("❌ API Error:",e),t("Error: ".concat(e.message))}finally{a(!1)}},u=async()=>{a(!0),t("Testing direct HTTP request...");try{let e="http://localhost:8889/.netlify/functions/firebase-auth?uid=test-uid";console.log("\uD83E\uDDEA Making direct request to:",e);let r=await fetch(e,{headers:{"Content-Type":"application/json"}});console.log("\uD83D\uDCCB Direct response status:",r.status);let n=await r.text();console.log("\uD83D\uDCCB Direct response data:",n),t("Direct request result: ".concat(r.status," - ").concat(n))}catch(e){console.error("❌ Direct request error:",e),t("Direct request error: ".concat(e.message))}finally{a(!1)}};return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"API Connection Test"}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Environment Info"}),(0,n.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"NODE_ENV:"})," ","production"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"NEXT_PUBLIC_SERVER_URL:"})," ",i.env.NEXT_PUBLIC_SERVER_URL]})]})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("button",{onClick:c,disabled:r,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:r?"Testing...":"Test Firebase Client"}),(0,n.jsx)("button",{onClick:u,disabled:r,className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 disabled:opacity-50",children:r?"Testing...":"Test Direct Request"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Response:"}),(0,n.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm",children:e||"Click a button to test the API connection..."})]})]})]})})})}},99764:function(e,t,r){"use strict";r.d(t,{G:function(){return o}});var n=r(40257);class s{getServerUrl(){let e=n.env.NEXT_PUBLIC_SERVER_URL;return e?e.includes("/.netlify/functions")?e.replace("/.netlify/functions",""):e:"https://abstractalgorithms-server.netlify.app"}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.getServerUrl(),"/.netlify/functions/").concat(e);console.log("\uD83C\uDF10 Making request to:",r),console.log("\uD83D\uDD27 Environment:","production"),console.log("\uD83D\uDD17 Server URL:",this.getServerUrl());let n=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!n.ok)throw console.error("❌ Server request failed:",n.status,n.statusText),Error("Server request failed: ".concat(n.statusText));return n.json()}async getUserProfile(e,t){try{let r={};t&&(r.Authorization="Bearer ".concat(t));let n=await this.makeRequest("firebase-auth?uid=".concat(e),{method:"GET",headers:r});if(n.success&&n.user)return{...n.user,createdAt:new Date(n.user.createdAt),updatedAt:new Date(n.user.updatedAt)};return null}catch(e){return console.error("Error fetching user profile:",e),null}}async updateUserProfile(e,t,r){try{return(await this.makeRequest("firebase-auth",{method:"PUT",headers:{Authorization:"Bearer ".concat(r)},body:JSON.stringify({uid:e,updateData:{...t,updatedAt:new Date().toISOString()}})})).success}catch(e){return console.error("Error updating user profile:",e),!1}}async listUsers(e){try{let t=await this.makeRequest("firebase-auth?action=list_users",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(t.success&&t.users)return t.users.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));return[]}catch(e){return console.error("Error listing users:",e),[]}}async updateUserRole(e,t,r){try{return(await this.makeRequest("firebase-auth",{method:"PUT",headers:{Authorization:"Bearer ".concat(r)},body:JSON.stringify({uid:e,role:t,updateData:{role:t,updatedAt:new Date().toISOString()}})})).success}catch(e){return console.error("Error updating user role:",e),!1}}async createUserProfile(e,t,r){try{return(await this.makeRequest("firebase-auth",{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:JSON.stringify({uid:e,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})})).success}catch(e){return console.error("Error creating user profile:",e),!1}}async deleteUser(e,t){try{return(await this.makeRequest("firebase-auth?uid=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).success}catch(e){return console.error("Error deleting user:",e),!1}}}let o=new s}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=59892)}),_N_E=e.O()}]);