<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/posts/hash-tables-ultimate-guide/assets/overview.png" fetchPriority="high"/><link rel="stylesheet" href="/_next/static/css/275ed64cc4367444.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f2c5f2458408eb15.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-0c2fbf55ab54cbd2.js"/><script src="/_next/static/chunks/vendors-aacc2dbb-3a7157755f8f47e3.js" async=""></script><script src="/_next/static/chunks/vendors-37a93c5f-7e2c02ed1d307f6c.js" async=""></script><script src="/_next/static/chunks/vendors-074c20c4-f873ace3944d24d6.js" async=""></script><script src="/_next/static/chunks/vendors-b9fa02b6-6171508ee50fe21a.js" async=""></script><script src="/_next/static/chunks/vendors-b0389ab8-459789c4841b750e.js" async=""></script><script src="/_next/static/chunks/vendors-3f88d8a8-60f26ce2ec81659b.js" async=""></script><script src="/_next/static/chunks/vendors-052d92a9-e538202a8c5e3b10.js" async=""></script><script src="/_next/static/chunks/vendors-938ded93-eef2d171f5257793.js" async=""></script><script src="/_next/static/chunks/vendors-42f1a597-b22f03b7c25146af.js" async=""></script><script src="/_next/static/chunks/vendors-27f02048-4f94103112d37eb5.js" async=""></script><script src="/_next/static/chunks/vendors-4a7382ad-b399a3edfa9808ab.js" async=""></script><script src="/_next/static/chunks/vendors-362d063c-e6276985323a06ec.js" async=""></script><script src="/_next/static/chunks/vendors-9c587c8a-d2783e507f5d62a0.js" async=""></script><script src="/_next/static/chunks/vendors-05e245ef-1a4ab328b8ce9ef2.js" async=""></script><script src="/_next/static/chunks/vendors-d7c15829-2678d0470800ed7b.js" async=""></script><script src="/_next/static/chunks/vendors-6808aa01-9f52964abee5a964.js" async=""></script><script src="/_next/static/chunks/vendors-351e52ed-a9aa59bdfe53186c.js" async=""></script><script src="/_next/static/chunks/vendors-98a6762f-c2827647527b77c4.js" async=""></script><script src="/_next/static/chunks/vendors-bc692b9d-c55c35306d4d77bf.js" async=""></script><script src="/_next/static/chunks/vendors-e3e804e2-d9f06ce46a4dcab4.js" async=""></script><script src="/_next/static/chunks/vendors-a6f90180-ba8559790eb92e44.js" async=""></script><script src="/_next/static/chunks/vendors-d91c2bd6-e0f15c37863d1bdc.js" async=""></script><script src="/_next/static/chunks/vendors-2898f16f-350012f739037a23.js" async=""></script><script src="/_next/static/chunks/vendors-6633164b-4565905b24af7fe3.js" async=""></script><script src="/_next/static/chunks/vendors-8cbd2506-fd05960a986f3395.js" async=""></script><script src="/_next/static/chunks/vendors-377fed06-65d4183f60271601.js" async=""></script><script src="/_next/static/chunks/main-app-fcbbb5bb13a4f03c.js" async=""></script><script src="/_next/static/chunks/common-5181525bd884c7b4.js" async=""></script><script src="/_next/static/chunks/app/layout-f803094fc502a10d.js" async=""></script><script src="/_next/static/chunks/app/error-1745ca505ccb7f84.js" async=""></script><script src="/_next/static/chunks/app/not-found-5aff7e7753541a4f.js" async=""></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-VZR168MHE2"></script><script src="/_next/static/chunks/app/posts/%5Bslug%5D/page-261eba3e5b940cb0.js" async=""></script><link rel="manifest" href="/manifest.json"/><meta name="theme-color" content="#00D885"/><meta name="google-site-verification" content="D5v1M3nD8oO9DNaZKujCwBLNNqf35CTJo114uv8yMNU"/><title>Hash Tables: The Ultimate Guide | Abstract Algorithms</title><meta name="description" content="Comprehensive exploration of hash tables, from core concepts to advanced techniques, enhanced with illustrative graphics."/><meta name="author" content="Abstract Algorithms"/><meta name="keywords" content="algorithms,data structures,system design,software engineering,programming,computer science,performance optimization,big o notation,hash tables,database indexing"/><meta name="creator" content="Abstract Algorithms"/><meta name="publisher" content="Abstract Algorithms"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><meta property="og:title" content="Hash Tables: The Ultimate Guide"/><meta property="og:description" content="Comprehensive exploration of hash tables, from core concepts to advanced techniques, enhanced with illustrative graphics."/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-04-05"/><meta property="article:author" content="Abstract Algorithms"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Abstract Algorithms"/><meta name="twitter:description" content="A comprehensive blog about algorithms, data structures, system design, and software engineering best practices"/><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/icon.svg" type="image/svg+xml" sizes="32x32"/><link rel="apple-touch-icon" href="/apple-icon.svg" type="image/svg+xml" sizes="180x180"/><meta name="next-size-adjust"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Abstract Algorithms","description":"A comprehensive blog about algorithms, data structures, system design, and software engineering best practices","url":"https://abstractalgorithms.github.io","potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://abstractalgorithms.github.io/posts/{search_term_string}"},"query-input":"required name=search_term_string"},"publisher":{"@type":"Organization","name":"Abstract Algorithms","url":"https://abstractalgorithms.github.io"}}</script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-VZR168MHE2');
          </script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_e8ce0c"><div class="min-h-screen flex flex-col"><div class=""><header class="bg-white border-b border-gray-200 sticky top-0 z-50 backdrop-blur-sm bg-white/95"><div class="wide-container py-6"><div class="flex items-center justify-between"><a class="flex items-center space-x-3 group" href="/"><div class="w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open w-6 h-6 text-white"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg></div><span class="text-2xl font-bold text-gray-900 group-hover:text-green-600 transition-colors">Abstract Algorithms</span></a><nav class="hidden md:flex items-center space-x-12"><a class="text-gray-600 hover:text-gray-900 font-medium transition-colors text-lg" href="/">Home</a><a class="text-gray-600 hover:text-gray-900 font-medium transition-colors text-lg" href="/discover/">Discover</a><a class="text-gray-600 hover:text-gray-900 font-medium transition-colors text-lg" href="/posts/">Posts</a></nav><div class="flex items-center space-x-6"><button class="hidden md:flex items-center gap-3 px-4 py-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors" title="Search posts (⌘K)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search w-5 h-5"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><span class="text-sm">Search</span><div class="flex items-center gap-1"><kbd class="px-1.5 py-0.5 text-xs bg-white border border-gray-300 rounded text-gray-500">⌘</kbd><kbd class="px-1.5 py-0.5 text-xs bg-white border border-gray-300 rounded text-gray-500">K</kbd></div></button><button class="md:hidden p-3 text-gray-600 hover:text-gray-900 rounded-xl hover:bg-gray-100 transition-colors" title="Search posts"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search w-6 h-6"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg></button><div class="flex items-center min-w-[120px]"><div class="flex items-center "><div class="flex items-center gap-2 px-4 py-2 min-w-[100px] justify-center"><div class="w-6 h-6 bg-gray-200 rounded-full animate-pulse"></div><div class="w-12 h-4 bg-gray-200 rounded animate-pulse"></div></div></div></div><button class="md:hidden p-3 text-gray-600 hover:text-gray-900 rounded-xl hover:bg-gray-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu w-6 h-6"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></div></header><main class="flex-grow"><article class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"><header class="bg-white border-b border-gray-200"><div class="medium-container py-12"><div class="max-w-3xl mx-auto text-center"><div class="mb-6"><div class="flex flex-wrap justify-center gap-2 mb-6"><span class="tag">data-structures</span><span class="tag">hash-tables</span><span class="tag">algorithms</span><span class="tag">performance</span></div><h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">Hash Tables: The Ultimate Guide</h1><p class="text-xl text-gray-600 leading-relaxed">Comprehensive exploration of hash tables, from core concepts to advanced techniques, enhanced with illustrative graphics.</p></div><div class="flex items-center justify-center space-x-6 text-gray-500"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user w-5 h-5"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg><span class="font-medium">Abstract Algorithms</span></div><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-5 h-5"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg><span>about 1 year ago</span></div><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-5 h-5"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>4 min read</span></div></div><div class="flex items-center justify-center space-x-4 mt-8"><button class="flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share2 w-4 h-4"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line></svg><span>Share</span></button><button class="flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bookmark w-4 h-4"><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path></svg><span>Save</span></button></div></div><div class="max-w-4xl mx-auto mt-12"><div class="relative aspect-video rounded-xl overflow-hidden shadow-lg"><img alt="Hash Tables: The Ultimate Guide" fetchPriority="high" decoding="async" data-nimg="fill" class="object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/posts/hash-tables-ultimate-guide/assets/overview.png"/></div></div></div></header><div class="py-8"><div class="px-6"><div class="max-w-6xl mx-auto"><div class="grid grid-cols-1 lg:grid-cols-5 gap-6 lg:gap-8"><div class="hidden lg:block lg:col-span-1 order-2 lg:order-1"><div class="sticky top-32"></div></div><div class="lg:col-span-4 order-1 lg:order-2"><div class="lg:hidden mb-6"></div><div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><div class="p-8 lg:p-12"><div class="prose prose-lg prose-gray max-w-none   prose-headings:text-gray-900 prose-headings:font-semibold   prose-h1:text-3xl prose-h1:mb-8 prose-h1:mt-0 prose-h1:leading-tight   prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-6 prose-h2:border-b prose-h2:border-gray-200 prose-h2:pb-3 prose-h2:leading-tight   prose-h3:text-xl prose-h3:mt-10 prose-h3:mb-5 prose-h3:leading-tight   prose-p:text-gray-700 prose-p:leading-relaxed prose-p:mb-6 prose-p:text-base   prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline prose-a:font-medium   prose-strong:text-gray-900 prose-strong:font-semibold   prose-code:text-blue-700 prose-code:bg-blue-50 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-medium   prose-pre:bg-gray-900 prose-pre:border prose-pre:border-gray-200 prose-pre:rounded-lg prose-pre:shadow-sm   prose-blockquote:border-l-blue-500 prose-blockquote:bg-blue-50 prose-blockquote:py-4 prose-blockquote:px-6 prose-blockquote:rounded-r-lg prose-blockquote:my-6   prose-ul:my-6 prose-ol:my-6 prose-ul:space-y-2 prose-ol:space-y-2   prose-li:my-1 prose-li:leading-relaxed   prose-table:text-sm prose-table:shadow-sm prose-table:border prose-table:border-gray-200 prose-table:rounded-lg prose-table:overflow-hidden   prose-th:bg-gray-50 prose-th:font-semibold prose-th:text-gray-800 prose-th:px-4 prose-th:py-3   prose-td:px-4 prose-td:py-3 prose-td:border-t prose-td:border-gray-200   prose-img:rounded-lg prose-img:shadow-md prose-img:my-8"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><div class="animate-pulse h-64 bg-gray-100 rounded"></div><!--/$--></div></div></div></div></div></div></div><div class="max-w-6xl mx-auto px-6 mt-12"><div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8"><section class="giscus-comments"></section></div></div></div><div class="bg-white border-t border-gray-200"><section class="bg-gray-50 py-16"><div class="medium-container"><div class="flex items-center justify-between mb-8"><div><h2 class="text-3xl font-bold text-gray-900 mb-2">More Articles</h2><p class="text-gray-600">Continue exploring algorithms and system design</p></div><div class="flex items-center space-x-2"><div class="sm:hidden text-xs text-gray-500 px-3 py-1 bg-gray-100 rounded-full">Swipe to explore →</div><div class="hidden sm:flex items-center space-x-2"><button class="p-2 rounded-full bg-white shadow-sm hover:shadow-md transition-shadow text-gray-600 hover:text-gray-900" aria-label="Scroll left"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left w-5 h-5"><path d="m15 18-6-6 6-6"></path></svg></button><button class="p-2 rounded-full bg-white shadow-sm hover:shadow-md transition-shadow text-gray-600 hover:text-gray-900" aria-label="Scroll right"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-5 h-5"><path d="m9 18 6-6-6-6"></path></svg></button></div></div></div><div id="related-posts-carousel" class="flex gap-6 overflow-x-auto pb-4 scrollbar-hide snap-x snap-mandatory" style="scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch"><div class="snap-start"><article class="flex-shrink-0 w-80 bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group"><div class="relative aspect-[16/10] overflow-hidden"><img alt="System Design Mastery: Complete Guide" loading="lazy" decoding="async" data-nimg="fill" class="object-cover group-hover:scale-105 transition-transform duration-300" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/posts/system-design-interview/assets/intro.png"/></div><div class="p-6 space-y-4"><h3 class="text-lg font-bold text-gray-900 leading-tight line-clamp-2"><a class="hover:text-green-600 transition-colors" href="/posts/system-design-interview/">System Design Mastery: Complete Guide</a></h3><p class="text-gray-700 text-sm leading-relaxed line-clamp-3">Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.</p><div class="flex items-center justify-between pt-2"><div class="flex items-center space-x-3 text-xs text-gray-500"><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-3 h-3"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg><span>about 1 year ago</span></div><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-3 h-3"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>6 min read</span></div></div><a class="inline-flex items-center text-green-600 hover:text-green-700 font-medium text-sm group" href="/posts/system-design-interview/">Read<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right ml-1 w-3 h-3 group-hover:translate-x-1 transition-transform"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a></div><div class="flex flex-wrap gap-2 pt-2"><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">system-design</span><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">interview</span><span class="text-xs text-gray-500 px-2 py-1">+<!-- -->2</span></div></div></article></div><div class="snap-start"><article class="flex-shrink-0 w-80 bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group"><div class="relative aspect-[16/10] overflow-hidden"><img alt="Introduction &amp; Methodology" loading="lazy" decoding="async" data-nimg="fill" class="object-cover group-hover:scale-105 transition-transform duration-300" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/posts/system-design-interview/assets/intro.png"/></div><div class="p-6 space-y-4"><h3 class="text-lg font-bold text-gray-900 leading-tight line-clamp-2"><a class="hover:text-green-600 transition-colors" href="/posts/system-design-interview/part-2/">Introduction &amp; Methodology</a></h3><p class="text-gray-700 text-sm leading-relaxed line-clamp-3">Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.</p><div class="flex items-center justify-between pt-2"><div class="flex items-center space-x-3 text-xs text-gray-500"><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-3 h-3"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg><span>about 1 year ago</span></div><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-3 h-3"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>7 min read</span></div></div><a class="inline-flex items-center text-green-600 hover:text-green-700 font-medium text-sm group" href="/posts/system-design-interview/part-2/">Read<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right ml-1 w-3 h-3 group-hover:translate-x-1 transition-transform"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a></div><div class="flex flex-wrap gap-2 pt-2"><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">system-design</span><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">interview</span><span class="text-xs text-gray-500 px-2 py-1">+<!-- -->2</span></div></div></article></div><div class="snap-start"><article class="flex-shrink-0 w-80 bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group"><div class="relative aspect-[16/10] overflow-hidden"><img alt="Design a URL Shortener (TinyURL)" loading="lazy" decoding="async" data-nimg="fill" class="object-cover group-hover:scale-105 transition-transform duration-300" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/posts/system-design-interview/assets/intro.png"/></div><div class="p-6 space-y-4"><h3 class="text-lg font-bold text-gray-900 leading-tight line-clamp-2"><a class="hover:text-green-600 transition-colors" href="/posts/system-design-interview/part-3/">Design a URL Shortener (TinyURL)</a></h3><p class="text-gray-700 text-sm leading-relaxed line-clamp-3">Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.</p><div class="flex items-center justify-between pt-2"><div class="flex items-center space-x-3 text-xs text-gray-500"><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-3 h-3"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg><span>about 1 year ago</span></div><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-3 h-3"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>9 min read</span></div></div><a class="inline-flex items-center text-green-600 hover:text-green-700 font-medium text-sm group" href="/posts/system-design-interview/part-3/">Read<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right ml-1 w-3 h-3 group-hover:translate-x-1 transition-transform"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a></div><div class="flex flex-wrap gap-2 pt-2"><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">system-design</span><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">interview</span><span class="text-xs text-gray-500 px-2 py-1">+<!-- -->2</span></div></div></article></div><div class="snap-start"><article class="flex-shrink-0 w-80 bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group"><div class="relative aspect-[16/10] overflow-hidden"><img alt="Design a Chat System (WhatsApp)" loading="lazy" decoding="async" data-nimg="fill" class="object-cover group-hover:scale-105 transition-transform duration-300" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/posts/system-design-interview/assets/intro.png"/></div><div class="p-6 space-y-4"><h3 class="text-lg font-bold text-gray-900 leading-tight line-clamp-2"><a class="hover:text-green-600 transition-colors" href="/posts/system-design-interview/part-4/">Design a Chat System (WhatsApp)</a></h3><p class="text-gray-700 text-sm leading-relaxed line-clamp-3">Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.</p><div class="flex items-center justify-between pt-2"><div class="flex items-center space-x-3 text-xs text-gray-500"><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-3 h-3"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg><span>about 1 year ago</span></div><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-3 h-3"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>10 min read</span></div></div><a class="inline-flex items-center text-green-600 hover:text-green-700 font-medium text-sm group" href="/posts/system-design-interview/part-4/">Read<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right ml-1 w-3 h-3 group-hover:translate-x-1 transition-transform"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a></div><div class="flex flex-wrap gap-2 pt-2"><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">system-design</span><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">interview</span><span class="text-xs text-gray-500 px-2 py-1">+<!-- -->2</span></div></div></article></div><div class="snap-start"><article class="flex-shrink-0 w-80 bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group"><div class="relative aspect-[16/10] overflow-hidden"><img alt="Design a Social Media Feed (Twitter)" loading="lazy" decoding="async" data-nimg="fill" class="object-cover group-hover:scale-105 transition-transform duration-300" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/posts/system-design-interview/assets/intro.png"/></div><div class="p-6 space-y-4"><h3 class="text-lg font-bold text-gray-900 leading-tight line-clamp-2"><a class="hover:text-green-600 transition-colors" href="/posts/system-design-interview/part-5/">Design a Social Media Feed (Twitter)</a></h3><p class="text-gray-700 text-sm leading-relaxed line-clamp-3">Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.</p><div class="flex items-center justify-between pt-2"><div class="flex items-center space-x-3 text-xs text-gray-500"><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-3 h-3"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg><span>about 1 year ago</span></div><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-3 h-3"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>11 min read</span></div></div><a class="inline-flex items-center text-green-600 hover:text-green-700 font-medium text-sm group" href="/posts/system-design-interview/part-5/">Read<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right ml-1 w-3 h-3 group-hover:translate-x-1 transition-transform"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a></div><div class="flex flex-wrap gap-2 pt-2"><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">system-design</span><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">interview</span><span class="text-xs text-gray-500 px-2 py-1">+<!-- -->2</span></div></div></article></div><div class="snap-start"><article class="flex-shrink-0 w-80 bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group"><div class="relative aspect-[16/10] overflow-hidden"><img alt="Design a Video Streaming Service (YouTube)" loading="lazy" decoding="async" data-nimg="fill" class="object-cover group-hover:scale-105 transition-transform duration-300" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/posts/system-design-interview/assets/intro.png"/></div><div class="p-6 space-y-4"><h3 class="text-lg font-bold text-gray-900 leading-tight line-clamp-2"><a class="hover:text-green-600 transition-colors" href="/posts/system-design-interview/part-6/">Design a Video Streaming Service (YouTube)</a></h3><p class="text-gray-700 text-sm leading-relaxed line-clamp-3">Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.</p><div class="flex items-center justify-between pt-2"><div class="flex items-center space-x-3 text-xs text-gray-500"><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-3 h-3"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg><span>about 1 year ago</span></div><div class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-3 h-3"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>12 min read</span></div></div><a class="inline-flex items-center text-green-600 hover:text-green-700 font-medium text-sm group" href="/posts/system-design-interview/part-6/">Read<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right ml-1 w-3 h-3 group-hover:translate-x-1 transition-transform"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a></div><div class="flex flex-wrap gap-2 pt-2"><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">system-design</span><span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">interview</span><span class="text-xs text-gray-500 px-2 py-1">+<!-- -->2</span></div></div></article></div></div><div class="text-center mt-8"><a class="inline-flex items-center px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors" href="/posts/">View All Articles<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right ml-2 w-4 h-4"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a></div></div></section></div><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hash Tables: The Ultimate Guide","description":"Comprehensive exploration of hash tables, from core concepts to advanced techniques, enhanced with illustrative graphics.","datePublished":"2024-04-05","dateModified":"2024-04-05","author":{"@type":"Person","name":"Abstract Algorithms"},"publisher":{"@type":"Organization","name":"Abstract Algorithms","url":"https://abstractalgorithms.github.io"},"url":"https://abstractalgorithms.github.io/posts/hash-tables-ultimate-guide","mainEntityOfPage":{"@type":"WebPage","@id":"https://abstractalgorithms.github.io/posts/hash-tables-ultimate-guide"},"image":{"@type":"ImageObject","url":"https://abstractalgorithms.github.io/posts/hash-tables-ultimate-guide/assets/overview.png"}}</script></article></main><footer class="bg-gray-50 border-t border-gray-200"><div class="medium-container py-12"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"><div class="lg:col-span-2"><h3 class="text-lg font-semibold text-gray-900 mb-4">Abstract Algorithms</h3><p class="text-gray-600 mb-4 max-w-md">Exploring the fascinating world of algorithms, data structures, and software engineering through clear explanations and practical examples.</p><div class="flex space-x-4"><a href="https://github.com/abstractalgorithms" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-gray-600 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github w-5 h-5"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a href="https://x.com/abstractalgs" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-gray-600 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter w-5 h-5"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></a><a href="https://linkedin.com/company/abstractalgorithms" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-gray-600 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin w-5 h-5"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="mailto:contact@abstractalgorithms.dev" class="text-gray-400 hover:text-gray-600 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail w-5 h-5"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg></a></div></div><div><h4 class="text-sm font-semibold text-gray-900 mb-4">Navigation</h4><ul class="space-y-2"><li><a class="text-gray-600 hover:text-gray-900 transition-colors" href="/">Home</a></li><li><a class="text-gray-600 hover:text-gray-900 transition-colors" href="/discover/">Discover</a></li><li><a class="text-gray-600 hover:text-gray-900 transition-colors" href="/posts/">Posts</a></li><li><a class="text-gray-600 hover:text-gray-900 transition-colors" href="/badges/">Badges</a></li><li><a class="text-gray-600 hover:text-gray-900 transition-colors" href="/search/">Search</a></li></ul></div><div><h4 class="text-sm font-semibold text-gray-900 mb-4">About</h4><ul class="space-y-2"><li><a class="text-gray-600 hover:text-gray-900 transition-colors font-medium" href="/about/">About Us</a></li><li><a class="text-gray-600 hover:text-gray-900 transition-colors font-medium" href="/contact/">Contact</a></li></ul></div><div><h4 class="text-sm font-semibold text-gray-900 mb-4">Topics</h4><ul class="space-y-2"><li><a class="text-gray-600 hover:text-gray-900 transition-colors" href="/tag/algorithms/">Algorithms</a></li><li><a class="text-gray-600 hover:text-gray-900 transition-colors" href="/tag/data-structures/">Data Structures</a></li><li><a class="text-gray-600 hover:text-gray-900 transition-colors" href="/tag/system-design/">System Design</a></li></ul></div></div><div class="mt-8 pt-8 border-t border-gray-200 text-center"><p class="text-gray-600 text-sm">© <!-- -->2025<!-- --> Abstract Algorithms. All rights reserved.</p></div></div></footer></div></div><script src="/_next/static/chunks/webpack-0c2fbf55ab54cbd2.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/275ed64cc4367444.css\",\"style\"]\n3:HL[\"/_next/static/css/f2c5f2458408eb15.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[2846,[],\"\"]\n7:I[4707,[],\"\"]\n9:I[6423,[],\"\"]\na:I[981,[\"8592\",\"static/chunks/common-5181525bd884c7b4.js\",\"3185\",\"static/chunks/app/layout-f803094fc502a10d.js\"],\"AuthProvider\"]\nb:I[8931,[\"8592\",\"static/chunks/common-5181525bd884c7b4.js\",\"3185\",\"static/chunks/app/layout-f803094fc502a10d.js\"],\"default\"]\nc:I[917,[\"7601\",\"static/chunks/app/error-1745ca505ccb7f84.js\"],\"default\"]\nd:I[5618,[\"9160\",\"static/chunks/app/not-found-5aff7e7753541a4f.js\"],\"default\"]\nf:I[1060,[],\"\"]\n8:[\"slug\",\"hash-tables-ultimate-guide\",\"d\"]\n10:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L4\",null,{\"buildId\":\"Qfk6n_K6komkCTn-hocjA\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"posts\",\"hash-tables-ultimate-guide\",\"\"],\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"hash-tables-ultimate-guide\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"hash-tables-ultimate-guide\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"hash-tables-ultimate-guide\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\",null],null],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/275ed64cc4367444.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f2c5f2458408eb15.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"WebSite\\\",\\\"name\\\":\\\"Abstract Algorithms\\\",\\\"description\\\":\\\"A comprehensive blog about algorithms, data structures, system design, and software engineering best practices\\\",\\\"url\\\":\\\"https://abstractalgorithms.github.io\\\",\\\"potentialAction\\\":{\\\"@type\\\":\\\"SearchAction\\\",\\\"target\\\":{\\\"@type\\\":\\\"EntryPoint\\\",\\\"urlTemplate\\\":\\\"https://abstractalgorithms.github.io/posts/{search_term_string}\\\"},\\\"query-input\\\":\\\"required name=search_term_string\\\"},\\\"publisher\\\":{\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"Abstract Algorithms\\\",\\\"url\\\":\\\"https://abstractalgorithms.github.io\\\"}}\"}}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/manifest.json\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#00D885\"}],[\"$\",\"meta\",null,{\"name\":\"google-site-verification\",\"content\":\"D5v1M3nD8oO9DNaZKujCwBLNNqf35CTJo114uv8yMNU\"}],[\"$\",\"script\",null,{\"async\":true,\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-VZR168MHE2\"}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n            window.dataLayer = window.dataLayer || [];\\n            function gtag(){dataLayer.push(arguments);}\\n            gtag('js', new Date());\\n            gtag('config', 'G-VZR168MHE2');\\n          \"}}]]}],[\"$\",\"body\",null,{\"className\":\"__className_e8ce0c\",\"children\":[\"$\",\"$La\",null,{\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$c\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$Ld\",null,{}],\"notFoundStyles\":[]}]}]}]}]]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Le\"],\"globalErrorComponent\":\"$f\",\"missingSlots\":\"$W10\"}]\n"])</script><script>self.__next_f.push([1,"11:I[5878,[\"8592\",\"static/chunks/common-5181525bd884c7b4.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-261eba3e5b940cb0.js\"],\"Image\"]\n12:I[1343,[\"8592\",\"static/chunks/common-5181525bd884c7b4.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-261eba3e5b940cb0.js\"],\"default\"]\n13:I[9798,[\"8592\",\"static/chunks/common-5181525bd884c7b4.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-261eba3e5b940cb0.js\"],\"default\"]\n14:I[6883,[\"8592\",\"static/chunks/common-5181525bd884c7b4.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-261eba3e5b940cb0.js\"],\"default\"]\n15:T29e8,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eSystem Design Interview Mastery: Complete Guide\u003c/h1\u003e\n\u003cp\u003eWelcome to the comprehensive System Design Mastery series! This 6-part guide will take you from understanding the fundamentals to solving the most popular system design interview questions asked at top tech companies.\u003c/p\u003e\n\u003ch2\u003eWhat You'll Learn\u003c/h2\u003e\n\u003cp\u003eBy the end of this series, you'll master:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSystematic Problem-Solving Approach\u003c/strong\u003e: A proven methodology to tackle any system design question\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTop 5 Interview Questions\u003c/strong\u003e: Detailed solutions to the most commonly asked questions\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eScalability Patterns\u003c/strong\u003e: How to design systems that handle millions of users\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTrade-offs Analysis\u003c/strong\u003e: Understanding when to choose specific technologies and architectures\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eInterview Techniques\u003c/strong\u003e: How to communicate your design decisions effectively\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eSeries Overview\u003c/h2\u003e\n\u003ch3\u003ePart 1: Introduction \u0026#x26; Methodology (This Part)\u003c/h3\u003e\n\u003cp\u003eLearn the systematic approach to system design interviews and core concepts.\u003c/p\u003e\n\u003ch3\u003ePart 2: Design a URL Shortener (TinyURL)\u003c/h3\u003e\n\u003cp\u003eMaster the fundamentals with this classic system design problem.\u003c/p\u003e\n\u003ch3\u003ePart 3: Design a Chat System (WhatsApp)\u003c/h3\u003e\n\u003cp\u003eLearn real-time communication patterns and WebSocket architecture.\u003c/p\u003e\n\u003ch3\u003ePart 4: Design a Social Media Feed (Twitter)\u003c/h3\u003e\n\u003cp\u003eUnderstand content delivery, caching, and timeline generation.\u003c/p\u003e\n\u003ch3\u003ePart 5: Design a Video Streaming Service (YouTube)\u003c/h3\u003e\n\u003cp\u003eExplore CDNs, video processing, and large-scale storage.\u003c/p\u003e\n\u003ch3\u003ePart 6: Design a Distributed Cache (Redis)\u003c/h3\u003e\n\u003cp\u003eDeep dive into caching strategies and data consistency.\u003c/p\u003e\n\u003ch2\u003eThe System Design Interview Process\u003c/h2\u003e\n\u003cp\u003eUnderstanding the interview format is crucial for success. Most system design interviews follow a predictable structure that allows candidates to demonstrate their architectural thinking and problem-solving skills.\u003c/p\u003e\n\u003ch3\u003eKey Interview Phases\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eRequirements Clarification (5-10 minutes)\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDefine functional requirements\u003c/li\u003e\n\u003cli\u003eIdentify non-functional requirements\u003c/li\u003e\n\u003cli\u003eEstablish scale and constraints\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eHigh-Level Design (15-20 minutes)\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSketch the overall architecture\u003c/li\u003e\n\u003cli\u003eIdentify major components\u003c/li\u003e\n\u003cli\u003eDefine data flow\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eDetailed Design (15-20 minutes)\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDeep dive into critical components\u003c/li\u003e\n\u003cli\u003eDatabase schema design\u003c/li\u003e\n\u003cli\u003eAPI design\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eScale and Optimize (10-15 minutes)\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAddress bottlenecks\u003c/li\u003e\n\u003cli\u003eDiscuss caching strategies\u003c/li\u003e\n\u003cli\u003eHandle edge cases\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eThe Universal Template\u003c/h2\u003e\n\u003cp\u003eEvery system design problem can be approached using this template:\u003c/p\u003e\n\u003ch3\u003e1. Functional Requirements\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eActors\u003c/strong\u003e: Define who will use the system\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReader\u003c/li\u003e\n\u003cli\u003eWriter\u003c/li\u003e\n\u003cli\u003eAdmin\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eUse Cases\u003c/strong\u003e: Define how actors interact with the system\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHow the Reader will use the system\u003c/li\u003e\n\u003cli\u003eHow the Writer will use the system\u003c/li\u003e\n\u003cli\u003eAdministrative functions\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eFeatures\u003c/strong\u003e: List specific functionality\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWhat features are needed by each actor\u003c/li\u003e\n\u003cli\u003eWhat is explicitly out of scope\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e2. Non-Functional Requirements\u003c/h3\u003e\n\u003cp\u003eDefine NFR expectations for all actors:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eScalability\u003c/strong\u003e: How many users? Growth expectations?\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAvailability\u003c/strong\u003e: Uptime requirements (99.9%, 99.99%?)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePerformance\u003c/strong\u003e: Latency expectations for reads/writes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eData Consistency\u003c/strong\u003e: Strong vs eventual consistency needs\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e3. Estimations\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eUser Metrics\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDaily Active Users (DAU)\u003c/li\u003e\n\u003cli\u003eMonthly Active Users (MAU)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eThroughput\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eQueries Per Second (QPS) for reads\u003c/li\u003e\n\u003cli\u003eQueries Per Second (QPS) for writes\u003c/li\u003e\n\u003cli\u003eRead/Write ratio\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eStorage Estimations\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eData per user/action\u003c/li\u003e\n\u003cli\u003eDaily storage needs\u003c/li\u003e\n\u003cli\u003eAnnual storage needs\u003c/li\u003e\n\u003cli\u003e5-10 year projections\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eMemory Estimations\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCache requirements\u003c/li\u003e\n\u003cli\u003eRAM needs per server\u003c/li\u003e\n\u003cli\u003eDisk storage requirements\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eScale Reference\u003c/strong\u003e:\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eUnit\u003c/th\u003e\n\u003cth\u003eDecimal\u003c/th\u003e\n\u003cth\u003eStorage\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eMillion\u003c/td\u003e\n\u003ctd\u003e10^6\u003c/td\u003e\n\u003ctd\u003eMegabytes\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBillion\u003c/td\u003e\n\u003ctd\u003e10^9\u003c/td\u003e\n\u003ctd\u003eGigabytes\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eTrillion\u003c/td\u003e\n\u003ctd\u003e10^12\u003c/td\u003e\n\u003ctd\u003eTerabytes\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eQuadrillion\u003c/td\u003e\n\u003ctd\u003e10^15\u003c/td\u003e\n\u003ctd\u003ePetabytes\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3\u003e4. Design Goals\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003ePerformance Requirements\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eLatency targets\u003c/li\u003e\n\u003cli\u003eThroughput requirements\u003c/li\u003e\n\u003cli\u003eConsistency vs Availability trade-offs\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eArchitecture Patterns\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePipe and Filter Pattern\u003c/li\u003e\n\u003cli\u003eEvent Driven Architecture\u003c/li\u003e\n\u003cli\u003ePub/Sub Messaging\u003c/li\u003e\n\u003cli\u003eStreaming Processing\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eUsage Patterns\u003c/strong\u003e:\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eWorkload Type\u003c/th\u003e\n\u003cth\u003eExample\u003c/th\u003e\n\u003cth\u003eExplanation\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eRead Heavy\u003c/td\u003e\n\u003ctd\u003eSocial Media\u003c/td\u003e\n\u003ctd\u003eHigh read traffic from users browsing content\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eWrite Heavy\u003c/td\u003e\n\u003ctd\u003eLogging, Transactions\u003c/td\u003e\n\u003ctd\u003eFrequent write operations for data capture\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBalanced\u003c/td\u003e\n\u003ctd\u003eE-Commerce\u003c/td\u003e\n\u003ctd\u003eMix of reads (browsing) and writes (orders)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBatch Processing\u003c/td\u003e\n\u003ctd\u003eAnalytics\u003c/td\u003e\n\u003ctd\u003eLarge data volumes processed in scheduled batches\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eReal-time\u003c/td\u003e\n\u003ctd\u003eTrading, Monitoring\u003c/td\u003e\n\u003ctd\u003eImmediate response to events required\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e\u003cstrong\u003eData Access Patterns\u003c/strong\u003e:\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eAccess Type\u003c/th\u003e\n\u003cth\u003eUse Case\u003c/th\u003e\n\u003cth\u003eAdditional Information\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eSequential Access\u003c/td\u003e\n\u003ctd\u003eFile Processing\u003c/td\u003e\n\u003ctd\u003eRead/write data in order\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eRandom Access\u003c/td\u003e\n\u003ctd\u003eDatabase Lookup\u003c/td\u003e\n\u003ctd\u003eAccess specific data by key/index\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eWrite Once, Read Many\u003c/td\u003e\n\u003ctd\u003eArchival, Config\u003c/td\u003e\n\u003ctd\u003eData written once, read frequently\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePattern Matching\u003c/td\u003e\n\u003ctd\u003eLog Analysis\u003c/td\u003e\n\u003ctd\u003eExtract patterns using regex or similar\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eRange Queries\u003c/td\u003e\n\u003ctd\u003eTime-series Data\u003c/td\u003e\n\u003ctd\u003eQuery data within specific ranges\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2\u003eCore Concepts to Master\u003c/h2\u003e\n\u003ch3\u003eScalability Fundamentals\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eHorizontal Scaling (Scale Out)\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAdd more servers to handle increased load\u003c/li\u003e\n\u003cli\u003eBetter fault tolerance and cost-effectiveness\u003c/li\u003e\n\u003cli\u003eExamples: Web servers, microservices\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eVertical Scaling (Scale Up)\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIncrease power of existing machines\u003c/li\u003e\n\u003cli\u003eSimpler to implement but has physical limits\u003c/li\u003e\n\u003cli\u003eExamples: Database upgrades, CPU/RAM increases\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eDatabase Strategies\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eSQL vs NoSQL\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSQL\u003c/strong\u003e: ACID properties, complex queries, structured data\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNoSQL\u003c/strong\u003e: Horizontal scaling, flexible schema, specific use cases\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eDatabase Patterns\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eMaster-Slave Replication\u003c/strong\u003e: Read scaling\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMaster-Master Replication\u003c/strong\u003e: Write scaling with conflicts\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDatabase Sharding\u003c/strong\u003e: Horizontal partitioning\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFederation\u003c/strong\u003e: Split databases by function\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eCaching Strategies\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eCache Patterns\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eCache-Aside\u003c/strong\u003e: Application manages cache\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWrite-Through\u003c/strong\u003e: Write to cache and database simultaneously\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWrite-Behind\u003c/strong\u003e: Write to cache first, database later\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRefresh-Ahead\u003c/strong\u003e: Proactively refresh cache before expiration\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eCache Levels\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eBrowser cache\u003c/li\u003e\n\u003cli\u003eCDN (Content Delivery Network)\u003c/li\u003e\n\u003cli\u003eLoad balancer cache\u003c/li\u003e\n\u003cli\u003eApplication cache\u003c/li\u003e\n\u003cli\u003eDatabase cache\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eCommunication Patterns\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eSynchronous Communication\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHTTP/HTTPS requests\u003c/li\u003e\n\u003cli\u003eRPC (Remote Procedure Calls)\u003c/li\u003e\n\u003cli\u003eGraphQL\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eAsynchronous Communication\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMessage queues (RabbitMQ, Apache Kafka)\u003c/li\u003e\n\u003cli\u003ePub/Sub systems\u003c/li\u003e\n\u003cli\u003eEvent streaming\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eCommon Design Patterns\u003c/h2\u003e\n\u003ch3\u003eMicroservices Architecture\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eService decomposition\u003c/li\u003e\n\u003cli\u003eAPI Gateway pattern\u003c/li\u003e\n\u003cli\u003eService discovery\u003c/li\u003e\n\u003cli\u003eCircuit breaker pattern\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eEvent-Driven Architecture\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eEvent sourcing\u003c/li\u003e\n\u003cli\u003eCQRS (Command Query Responsibility Segregation)\u003c/li\u003e\n\u003cli\u003eSaga pattern for distributed transactions\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eData Management Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDatabase per service\u003c/li\u003e\n\u003cli\u003eShared database anti-pattern\u003c/li\u003e\n\u003cli\u003eEvent-driven data synchronization\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePreparation Tips\u003c/h2\u003e\n\u003ch3\u003eStudy Strategy\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eUnderstand fundamentals\u003c/strong\u003e: Master basic concepts before diving into complex problems\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePractice systematically\u003c/strong\u003e: Use the template for every problem\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLearn from real systems\u003c/strong\u003e: Study how actual systems like Google, Facebook, and Amazon work\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eThink about trade-offs\u003c/strong\u003e: Every design decision has pros and cons\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePractice communication\u003c/strong\u003e: Explain your thinking process clearly\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eCommon Mistakes to Avoid\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eJumping to solution without understanding requirements\u003c/li\u003e\n\u003cli\u003eOver-engineering the initial design\u003c/li\u003e\n\u003cli\u003eIgnoring non-functional requirements\u003c/li\u003e\n\u003cli\u003eNot considering scalability from the start\u003c/li\u003e\n\u003cli\u003ePoor time management during the interview\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eSystem Design Fundamentals Quiz\u003c/h2\u003e\n\u003cp\u003eBefore diving into specific use cases, test your understanding of the core system design concepts. The interactive quiz will appear at the end of this series introduction.\u003c/p\u003e\n\u003ch2\u003eWhat's Next?\u003c/h2\u003e\n\u003cp\u003eIn the next part, we'll apply this methodology to design a URL shortener service like TinyURL. This classic problem will help you practice the systematic approach and understand how to break down complex requirements into manageable components.\u003c/p\u003e\n\u003cp\u003eEach subsequent part will tackle increasingly complex problems, building your confidence and expertise in system design interviews.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eReady to start?\u003c/strong\u003e Let's dive into Part 2 and design our first system!\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"16:T3117,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eDesign a URL Shortener (TinyURL)\u003c/h1\u003e\n\u003cp\u003eIn this part, we'll apply our systematic methodology to design a URL shortener service like TinyURL or bit.ly. This is one of the most popular system design interview questions because it covers fundamental concepts while being simple enough to design in 45 minutes.\u003c/p\u003e\n\u003ch2\u003e1. Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eActors\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eURL Creator\u003c/strong\u003e: Users who want to shorten long URLs\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eURL Consumer\u003c/strong\u003e: Users who click on shortened URLs\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSystem Administrator\u003c/strong\u003e: Manages the service\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUse Cases\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eURL Creator\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCreate shortened URLs from long URLs\u003c/li\u003e\n\u003cli\u003eSet custom aliases (optional)\u003c/li\u003e\n\u003cli\u003eSet expiration dates for URLs\u003c/li\u003e\n\u003cli\u003eView analytics (click count, geographic data)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eURL Consumer\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAccess original URLs via shortened links\u003c/li\u003e\n\u003cli\u003eExperience fast redirection (\u0026#x3C;100ms)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eSystem Administrator\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMonitor system health and performance\u003c/li\u003e\n\u003cli\u003eManage expired URLs and cleanup\u003c/li\u003e\n\u003cli\u003eHandle abuse and spam detection\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eFunctional Requirements\u003c/h3\u003e\n\u003cp\u003e✅ \u003cstrong\u003eIn Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eShorten long URLs to ~7 character format\u003c/li\u003e\n\u003cli\u003eRedirect shortened URLs to original URLs\u003c/li\u003e\n\u003cli\u003eCustom aliases for URLs\u003c/li\u003e\n\u003cli\u003eURL expiration functionality\u003c/li\u003e\n\u003cli\u003eBasic analytics (click count)\u003c/li\u003e\n\u003cli\u003eHigh availability for redirections\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOut of Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUser authentication/accounts\u003c/li\u003e\n\u003cli\u003eAdvanced analytics dashboard\u003c/li\u003e\n\u003cli\u003eReal-time collaboration features\u003c/li\u003e\n\u003cli\u003eAPI rate limiting (assume handled by infrastructure)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e2. Non-Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eScalability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSupport 100 million URLs shortened per month\u003c/li\u003e\n\u003cli\u003eHandle 10 billion redirections per month\u003c/li\u003e\n\u003cli\u003eScale to serve global users\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAvailability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e99.9% uptime for URL creation\u003c/li\u003e\n\u003cli\u003e99.99% uptime for URL redirection\u003c/li\u003e\n\u003cli\u003eGraceful degradation during failures\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePerformance\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eURL creation: \u0026#x3C;200ms response time\u003c/li\u003e\n\u003cli\u003eURL redirection: \u0026#x3C;100ms response time\u003c/li\u003e\n\u003cli\u003eHandle traffic spikes during viral content\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eData Consistency\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eStrong consistency for URL creation\u003c/li\u003e\n\u003cli\u003eEventual consistency acceptable for analytics\u003c/li\u003e\n\u003cli\u003eNo duplicate shortened URLs\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e3. Estimations\u003c/h2\u003e\n\u003ch3\u003eUser Metrics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDaily Active Users\u003c/strong\u003e: 10 million\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eURLs created per day\u003c/strong\u003e: 3.3 million (100M/month)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRedirections per day\u003c/strong\u003e: 333 million (10B/month)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eThroughput\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eURL Creation QPS\u003c/strong\u003e: 38 queries/second (3.3M/24/3600)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eURL Redirection QPS\u003c/strong\u003e: 3,858 queries/second (333M/24/3600)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePeak QPS\u003c/strong\u003e: 5x average = 19,290 QPS\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRead/Write Ratio\u003c/strong\u003e: 100:1 (heavy read workload)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eStorage Estimations\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003ePer URL Storage\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eShortened URL: 7 bytes\u003c/li\u003e\n\u003cli\u003eOriginal URL: 500 bytes (average)\u003c/li\u003e\n\u003cli\u003eMetadata (creation date, expiration, etc.): 100 bytes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTotal per URL\u003c/strong\u003e: ~600 bytes\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eStorage Growth\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePer Day\u003c/strong\u003e: 3.3M × 600 bytes = 2 GB/day\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePer Year\u003c/strong\u003e: 2 GB × 365 = 730 GB/year\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePer 5 Years\u003c/strong\u003e: 730 GB × 5 = 3.65 TB\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eMemory Estimations\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eCache Requirements\u003c/strong\u003e (80/20 rule):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e20% of URLs generate 80% of traffic\u003c/li\u003e\n\u003cli\u003eDaily hot URLs: 333M × 20% = 66.6M URLs\u003c/li\u003e\n\u003cli\u003eCache size: 66.6M × 600 bytes = ~40 GB\u003c/li\u003e\n\u003cli\u003eWith replication: 40 GB × 3 = 120 GB total cache\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e4. Design Goals\u003c/h2\u003e\n\u003ch3\u003ePerformance Requirements\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLatency\u003c/strong\u003e: \u0026#x3C;100ms for redirections, \u0026#x3C;200ms for creation\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eThroughput\u003c/strong\u003e: 20K QPS peak capacity\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eConsistency\u003c/strong\u003e: Strong for writes, eventual for analytics\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eArchitecture Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eRead-Heavy Workload\u003c/strong\u003e: Implement aggressive caching\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEvent-Driven\u003c/strong\u003e: Use async processing for analytics\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eStateless Services\u003c/strong\u003e: Enable horizontal scaling\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eData Access Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eRandom Access\u003c/strong\u003e: Database lookups by shortened URL key\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWrite Once, Read Many\u003c/strong\u003e: URLs rarely modified after creation\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCache-Friendly\u003c/strong\u003e: High cache hit ratios expected\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e5. High-Level Design\u003c/h2\u003e\n\u003ch3\u003eBuilding Blocks\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e[Client] → [Load Balancer] → [Web Servers] → [Cache] → [Database]\r\n                                    ↓\r\n                            [Analytics Service] → [Analytics DB]\r\n                                    ↓\r\n                              [Message Queue]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCore Components\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eLoad Balancer\u003c/strong\u003e: Distributes traffic across web servers\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWeb Servers\u003c/strong\u003e: Handle URL creation and redirection logic\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCache Layer\u003c/strong\u003e: Redis cluster for hot URL lookups\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDatabase\u003c/strong\u003e: Primary storage for URL mappings\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAnalytics Service\u003c/strong\u003e: Processes click events asynchronously\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMessage Queue\u003c/strong\u003e: Decouples analytics from main flow\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eAPI Design\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eCreate Short URL\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003ePOST /api/v1/shorten\r\nContent-Type: application/json\r\n\r\n{\r\n  \"long_url\": \"https://example.com/very/long/path\",\r\n  \"custom_alias\": \"mylink\", // optional\r\n  \"expiration_date\": \"2024-12-31\" // optional\r\n}\r\n\r\nResponse:\r\n{\r\n  \"short_url\": \"https://short.ly/abc123\",\r\n  \"long_url\": \"https://example.com/very/long/path\",\r\n  \"created_at\": \"2024-06-17T10:00:00Z\",\r\n  \"expires_at\": \"2024-12-31T23:59:59Z\"\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eRedirect URL\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003eGET /{short_code}\r\n\r\nResponse: 301 Redirect\r\nLocation: https://example.com/very/long/path\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eGet Analytics\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003eGET /api/v1/analytics/{short_code}\r\n\r\nResponse:\r\n{\r\n  \"short_code\": \"abc123\",\r\n  \"click_count\": 1542,\r\n  \"created_at\": \"2024-06-17T10:00:00Z\",\r\n  \"last_accessed\": \"2024-06-17T15:30:00Z\"\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eData Schema\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eURLs Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE urls (\r\n    short_code VARCHAR(7) PRIMARY KEY,\r\n    long_url TEXT NOT NULL,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    expires_at TIMESTAMP,\r\n    click_count BIGINT DEFAULT 0,\r\n    created_by_ip VARCHAR(45)\r\n);\r\n\r\nCREATE INDEX idx_expires_at ON urls(expires_at);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eAnalytics Events Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE click_events (\r\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n    short_code VARCHAR(7) NOT NULL,\r\n    clicked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    user_ip VARCHAR(45),\r\n    user_agent TEXT,\r\n    referer TEXT\r\n);\r\n\r\nCREATE INDEX idx_short_code_time ON click_events(short_code, clicked_at);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eURL Encoding Algorithm\u003c/h2\u003e\n\u003ch3\u003eBase62 Encoding\u003c/h3\u003e\n\u003cp\u003eWe'll use Base62 encoding (a-z, A-Z, 0-9) to generate short codes:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef base62_encode(num):\r\n    base = 62\r\n    alphabet = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\r\n    encoded = \"\"\r\n    \r\n    while num \u003e 0:\r\n        encoded = alphabet[num % base] + encoded\r\n        num //= base\r\n    \r\n    return encoded or alphabet[0]\r\n\r\ndef base62_decode(encoded):\r\n    base = 62\r\n    alphabet = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\r\n    num = 0\r\n    \r\n    for char in encoded:\r\n        num = num * base + alphabet.index(char)\r\n    \r\n    return num\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCounter-Based Approach\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eUse auto-incrementing database counter\u003c/li\u003e\n\u003cli\u003eEncode counter value to Base62\u003c/li\u003e\n\u003cli\u003eWith 7 characters: 62^7 = 3.5 trillion possible URLs\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eAdvantages\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNo collisions\u003c/li\u003e\n\u003cli\u003ePredictable, sequential generation\u003c/li\u003e\n\u003cli\u003eSimple implementation\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eDisadvantages\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSequential patterns might be guessable\u003c/li\u003e\n\u003cli\u003eSingle point of failure for counter\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAlternative: Hash-Based Approach\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eimport hashlib\r\n\r\ndef generate_short_code(long_url, timestamp):\r\n    data = f\"{long_url}{timestamp}\"\r\n    hash_value = hashlib.md5(data.encode()).hexdigest()\r\n    \r\n    # Take first 7 characters and convert to Base62\r\n    return hash_value[:7]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eDetailed Design Deep Dive\u003c/h2\u003e\n\u003ch3\u003eCaching Strategy\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eMulti-Layer Caching\u003c/strong\u003e:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eBrowser Cache\u003c/strong\u003e: Cache 301 redirects for 1 hour\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCDN Cache\u003c/strong\u003e: Cache popular URLs at edge locations\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eApplication Cache\u003c/strong\u003e: Redis cluster with:\n\u003cul\u003e\n\u003cli\u003eTTL: 24 hours for hot URLs\u003c/li\u003e\n\u003cli\u003eLRU eviction policy\u003c/li\u003e\n\u003cli\u003e99% hit ratio target\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eCache Key Strategy\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eKey: \"url:{short_code}\"\r\nValue: {\r\n  \"long_url\": \"https://example.com/path\",\r\n  \"expires_at\": \"2024-12-31T23:59:59Z\"\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eDatabase Sharding\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eShard by Short Code\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eConsistent hashing on short_code\u003c/li\u003e\n\u003cli\u003e4 shards initially, plan for 16 shards\u003c/li\u003e\n\u003cli\u003eEach shard handles ~25% of traffic\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eShard Key\u003c/strong\u003e: First 2 characters of short_code\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eShard 1: aa-pz\u003c/li\u003e\n\u003cli\u003eShard 2: qa-9z\u003c/li\u003e\n\u003cli\u003eShard 3: Aa-Pz\u003c/li\u003e\n\u003cli\u003eShard 4: Qa-9z\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAnalytics Processing\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eAsync Event Processing\u003c/strong\u003e:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eURL click triggers event\u003c/li\u003e\n\u003cli\u003eEvent published to message queue\u003c/li\u003e\n\u003cli\u003eAnalytics service processes events in batches\u003c/li\u003e\n\u003cli\u003eUpdates click counts every 5 minutes\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eAnalytics Pipeline\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e[Click Event] → [Kafka Queue] → [Analytics Worker] → [Analytics DB]\r\n                                        ↓\r\n                                [Real-time Dashboard]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eScaling Considerations\u003c/h2\u003e\n\u003ch3\u003eHandling Traffic Spikes\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eAuto-Scaling Strategy\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMonitor QPS and response time\u003c/li\u003e\n\u003cli\u003eScale web servers horizontally\u003c/li\u003e\n\u003cli\u003ePre-warm cache for viral content\u003c/li\u003e\n\u003cli\u003eCircuit breakers for graceful degradation\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eGeographic Distribution\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eMulti-Region Deployment\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePrimary region: US-East (main database)\u003c/li\u003e\n\u003cli\u003eSecondary regions: EU-West, Asia-Pacific\u003c/li\u003e\n\u003cli\u003eRead replicas in each region\u003c/li\u003e\n\u003cli\u003eGlobal load balancer routes to nearest region\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePerformance Optimizations\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eConnection Pooling\u003c/strong\u003e: Reuse database connections\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAsync Processing\u003c/strong\u003e: Non-blocking I/O for analytics\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBatch Operations\u003c/strong\u003e: Group database writes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCDN Integration\u003c/strong\u003e: Cache static assets and popular URLs\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eSecurity Considerations\u003c/h2\u003e\n\u003ch3\u003eSpam Prevention\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eRate limiting per IP address\u003c/li\u003e\n\u003cli\u003eURL validation and sanitization\u003c/li\u003e\n\u003cli\u003eMalicious URL detection\u003c/li\u003e\n\u003cli\u003eCAPTCHA for suspicious traffic\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eData Protection\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eHTTPS enforcement\u003c/li\u003e\n\u003cli\u003eSQL injection prevention\u003c/li\u003e\n\u003cli\u003eInput validation for custom aliases\u003c/li\u003e\n\u003cli\u003eAccess logs for audit trails\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eURL Shortener Design Quiz\u003c/h2\u003e\n\u003cp\u003eTest your understanding of URL shortener system design with the interactive quiz that appears after each part of this series.\u003c/p\u003e\n\u003ch2\u003eKey Takeaways\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eRead-Heavy Optimization\u003c/strong\u003e: Aggressive caching is crucial for URL shorteners\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSimple but Scalable\u003c/strong\u003e: Start simple, add complexity as needed\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAnalytics Separation\u003c/strong\u003e: Decouple analytics from core functionality\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGlobal Distribution\u003c/strong\u003e: CDNs and regional deployments improve performance\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFailure Planning\u003c/strong\u003e: Design for graceful degradation during traffic spikes\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eWhat's Next?\u003c/h2\u003e\n\u003cp\u003eIn Part 3, we'll design a real-time chat system like WhatsApp, which introduces new challenges around WebSocket connections, message delivery guarantees, and online presence management.\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"17:T46f5,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eDesign a Chat System (WhatsApp)\u003c/h1\u003e\n\u003cp\u003eIn this part, we'll design a real-time chat system similar to WhatsApp or Slack. This problem introduces complex challenges around real-time communication, message delivery, and online presence management.\u003c/p\u003e\n\u003ch2\u003e1. Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eActors\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eChat User\u003c/strong\u003e: Sends and receives messages\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGroup Admin\u003c/strong\u003e: Manages group chats\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSystem\u003c/strong\u003e: Handles presence and delivery\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUse Cases\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eChat User\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSend one-on-one messages\u003c/li\u003e\n\u003cli\u003eParticipate in group chats (up to 500 members)\u003c/li\u003e\n\u003cli\u003eSee online/offline status of contacts\u003c/li\u003e\n\u003cli\u003eReceive messages in real-time\u003c/li\u003e\n\u003cli\u003eView message delivery status (sent, delivered, read)\u003c/li\u003e\n\u003cli\u003eShare media files (images, videos, documents)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eGroup Admin\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCreate and manage group chats\u003c/li\u003e\n\u003cli\u003eAdd/remove participants\u003c/li\u003e\n\u003cli\u003eSet group permissions\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eSystem Functions\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDeliver messages reliably\u003c/li\u003e\n\u003cli\u003eMaintain message ordering\u003c/li\u003e\n\u003cli\u003eHandle offline message delivery\u003c/li\u003e\n\u003cli\u003eManage user presence status\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eFunctional Requirements\u003c/h3\u003e\n\u003cp\u003e✅ \u003cstrong\u003eIn Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOne-on-one messaging\u003c/li\u003e\n\u003cli\u003eGroup messaging (up to 500 members)\u003c/li\u003e\n\u003cli\u003eReal-time message delivery\u003c/li\u003e\n\u003cli\u003eMessage delivery status\u003c/li\u003e\n\u003cli\u003eOnline presence indicators\u003c/li\u003e\n\u003cli\u003eMedia file sharing\u003c/li\u003e\n\u003cli\u003eMessage history storage\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOut of Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eVoice/video calling\u003c/li\u003e\n\u003cli\u003eMessage encryption (assume handled by client)\u003c/li\u003e\n\u003cli\u003eAdvanced group features (channels, threads)\u003c/li\u003e\n\u003cli\u003eMessage search functionality\u003c/li\u003e\n\u003cli\u003ePush notifications (assume external service)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e2. Non-Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eScalability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSupport 1 billion users globally\u003c/li\u003e\n\u003cli\u003eHandle 50 billion messages per day\u003c/li\u003e\n\u003cli\u003eSupport 10 million concurrent users\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAvailability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e99.9% uptime for message delivery\u003c/li\u003e\n\u003cli\u003eGraceful degradation during failures\u003c/li\u003e\n\u003cli\u003eMessage ordering must be preserved\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePerformance\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMessage delivery: \u0026#x3C;100ms in same region\u003c/li\u003e\n\u003cli\u003eCross-region delivery: \u0026#x3C;300ms\u003c/li\u003e\n\u003cli\u003eGroup message fanout: \u0026#x3C;500ms\u003c/li\u003e\n\u003cli\u003eSupport real-time presence updates\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eData Consistency\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eStrong consistency for message ordering\u003c/li\u003e\n\u003cli\u003eEventual consistency for presence status\u003c/li\u003e\n\u003cli\u003eAt-least-once message delivery guarantee\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e3. Estimations\u003c/h2\u003e\n\u003ch3\u003eUser Metrics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTotal Users\u003c/strong\u003e: 1 billion\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDaily Active Users\u003c/strong\u003e: 500 million\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eConcurrent Users\u003c/strong\u003e: 10 million peak\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAverage sessions per user\u003c/strong\u003e: 4 per day\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eMessage Volume\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eMessages per day\u003c/strong\u003e: 50 billion\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMessages per second\u003c/strong\u003e: 578K average\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePeak QPS\u003c/strong\u003e: 1.2 million\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGroup messages\u003c/strong\u003e: 20% of total volume\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eStorage Estimations\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003ePer Message Storage\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMessage ID: 8 bytes\u003c/li\u003e\n\u003cli\u003eSender ID: 8 bytes\u003c/li\u003e\n\u003cli\u003eReceiver/Group ID: 8 bytes\u003c/li\u003e\n\u003cli\u003eMessage content: 100 bytes average\u003c/li\u003e\n\u003cli\u003eMetadata: 50 bytes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTotal per message\u003c/strong\u003e: ~200 bytes\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eStorage Growth\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePer Day\u003c/strong\u003e: 50B × 200 bytes = 10 TB/day\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePer Year\u003c/strong\u003e: 10 TB × 365 = 3.65 PB/year\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePer 5 Years\u003c/strong\u003e: 18.25 PB (with compression ~9 PB)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eConnection Estimations\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eWebSocket connections\u003c/strong\u003e: 10 million concurrent\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMemory per connection\u003c/strong\u003e: 10KB\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTotal connection memory\u003c/strong\u003e: 100 GB\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eServers needed\u003c/strong\u003e: 200 servers (500MB per server)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e4. Design Goals\u003c/h2\u003e\n\u003ch3\u003ePerformance Requirements\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLatency\u003c/strong\u003e: \u0026#x3C;100ms same region, \u0026#x3C;300ms cross-region\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eThroughput\u003c/strong\u003e: 1.2M messages/second peak\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAvailability\u003c/strong\u003e: 99.9% uptime\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eArchitecture Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eEvent-Driven\u003c/strong\u003e: Message routing and delivery\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePub/Sub\u003c/strong\u003e: Real-time message distribution\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMicroservices\u003c/strong\u003e: Decomposed by functionality\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUsage Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eReal-time Processing\u003c/strong\u003e: Immediate message delivery\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWrite Heavy\u003c/strong\u003e: High message ingestion rate\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eConnection Heavy\u003c/strong\u003e: Millions of persistent connections\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e5. High-Level Design\u003c/h2\u003e\n\u003ch3\u003eBuilding Blocks\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e[Mobile/Web Client] ↔ [WebSocket Gateway] → [Message Service] → [Message Queue]\r\n                                ↓                    ↓              ↓\r\n                        [Presence Service] → [User Service] → [Database Cluster]\r\n                                ↓                    ↓              ↓\r\n                        [Notification Service] → [Analytics] → [Message Storage]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCore Components\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eWebSocket Gateway\u003c/strong\u003e: Manages persistent connections\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMessage Service\u003c/strong\u003e: Core message processing logic\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePresence Service\u003c/strong\u003e: Tracks user online status\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUser Service\u003c/strong\u003e: User profiles and friend lists\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMessage Queue\u003c/strong\u003e: Reliable message delivery\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDatabase Cluster\u003c/strong\u003e: Distributed message storage\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eAPI Design\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eWebSocket Events\u003c/strong\u003e:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eSend Message\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\r\n  \"type\": \"send_message\",\r\n  \"data\": {\r\n    \"message_id\": \"msg_123456\",\r\n    \"chat_id\": \"chat_789\",\r\n    \"content\": \"Hello World!\",\r\n    \"message_type\": \"text\",\r\n    \"timestamp\": \"2024-06-17T10:00:00Z\"\r\n  }\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eReceive Message\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\r\n  \"type\": \"new_message\",\r\n  \"data\": {\r\n    \"message_id\": \"msg_123456\",\r\n    \"chat_id\": \"chat_789\",\r\n    \"sender_id\": \"user_456\",\r\n    \"content\": \"Hello World!\",\r\n    \"timestamp\": \"2024-06-17T10:00:00Z\",\r\n    \"delivery_status\": \"delivered\"\r\n  }\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003ePresence Update\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\r\n  \"type\": \"presence_update\",\r\n  \"data\": {\r\n    \"user_id\": \"user_456\",\r\n    \"status\": \"online\",\r\n    \"last_seen\": \"2024-06-17T10:00:00Z\"\r\n  }\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eREST APIs\u003c/strong\u003e:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eCreate Chat\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003ePOST /api/v1/chats\r\n{\r\n  \"type\": \"group\",\r\n  \"name\": \"Project Team\",\r\n  \"participants\": [\"user_123\", \"user_456\", \"user_789\"]\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eGet Chat History\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003eGET /api/v1/chats/{chat_id}/messages?limit=50\u0026#x26;before=msg_123\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eDatabase Schema\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eUsers Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE users (\r\n    user_id BIGINT PRIMARY KEY,\r\n    username VARCHAR(50) UNIQUE NOT NULL,\r\n    email VARCHAR(255) UNIQUE NOT NULL,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    last_seen TIMESTAMP,\r\n    status ENUM('online', 'offline', 'away') DEFAULT 'offline'\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eChats Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE chats (\r\n    chat_id BIGINT PRIMARY KEY,\r\n    chat_type ENUM('direct', 'group') NOT NULL,\r\n    name VARCHAR(255),\r\n    created_by BIGINT,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eMessages Table\u003c/strong\u003e (Partitioned by chat_id):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE messages (\r\n    message_id BIGINT PRIMARY KEY,\r\n    chat_id BIGINT NOT NULL,\r\n    sender_id BIGINT NOT NULL,\r\n    content TEXT NOT NULL,\r\n    message_type ENUM('text', 'image', 'file') DEFAULT 'text',\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    \r\n    INDEX idx_chat_time (chat_id, created_at),\r\n    INDEX idx_sender (sender_id)\r\n) PARTITION BY HASH(chat_id) PARTITIONS 100;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eChat Participants Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE chat_participants (\r\n    chat_id BIGINT,\r\n    user_id BIGINT,\r\n    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    role ENUM('member', 'admin') DEFAULT 'member',\r\n    \r\n    PRIMARY KEY (chat_id, user_id),\r\n    INDEX idx_user_chats (user_id)\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eDetailed Design Deep Dive\u003c/h2\u003e\n\u003ch3\u003eWebSocket Connection Management\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eConnection Gateway\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass ConnectionGateway:\r\n    def __init__(self):\r\n        self.connections = {}  # user_id -\u003e connection\r\n        self.user_servers = {}  # user_id -\u003e server_id\r\n    \r\n    def handle_connection(self, user_id, websocket):\r\n        # Store connection mapping\r\n        self.connections[user_id] = websocket\r\n        self.user_servers[user_id] = self.server_id\r\n        \r\n        # Update presence service\r\n        self.presence_service.set_online(user_id, self.server_id)\r\n        \r\n        # Subscribe to user's message queue\r\n        self.message_queue.subscribe(f\"user_{user_id}\", self.deliver_message)\r\n    \r\n    def deliver_message(self, message):\r\n        user_id = message['recipient_id']\r\n        if user_id in self.connections:\r\n            self.connections[user_id].send(message)\r\n        else:\r\n            # User offline, store for later delivery\r\n            self.offline_storage.store(user_id, message)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eLoad Balancing Connections\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eConsistent hashing by user_id\u003c/li\u003e\n\u003cli\u003eSession affinity for WebSocket connections\u003c/li\u003e\n\u003cli\u003eHealth checks and failover\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eMessage Processing Pipeline\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eMessage Flow\u003c/strong\u003e:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eClient sends message via WebSocket\u003c/li\u003e\n\u003cli\u003eGateway validates and adds metadata\u003c/li\u003e\n\u003cli\u003eMessage service processes and stores\u003c/li\u003e\n\u003cli\u003eFanout service delivers to recipients\u003c/li\u003e\n\u003cli\u003eDelivery confirmation sent back\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eMessage Service\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass MessageService:\r\n    def process_message(self, message):\r\n        # 1. Validate message\r\n        if not self.validate_message(message):\r\n            return {\"error\": \"Invalid message\"}\r\n        \r\n        # 2. Generate unique message ID\r\n        message['message_id'] = self.generate_id()\r\n        message['timestamp'] = datetime.utcnow()\r\n        \r\n        # 3. Store message\r\n        self.store_message(message)\r\n        \r\n        # 4. Fanout to recipients\r\n        recipients = self.get_chat_participants(message['chat_id'])\r\n        for recipient_id in recipients:\r\n            if recipient_id != message['sender_id']:\r\n                self.message_queue.publish(f\"user_{recipient_id}\", message)\r\n        \r\n        # 5. Return acknowledgment\r\n        return {\"status\": \"sent\", \"message_id\": message['message_id']}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eGroup Message Fanout\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eFanout Strategies\u003c/strong\u003e:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003ePull Model\u003c/strong\u003e (Recommended for large groups):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef fanout_pull_model(message, chat_id):\r\n    # Store message once\r\n    message_storage.store(message)\r\n    \r\n    # Notify online participants\r\n    online_users = presence_service.get_online_users(chat_id)\r\n    for user_id in online_users:\r\n        notification_queue.publish(f\"user_{user_id}\", {\r\n            \"type\": \"new_message_notification\",\r\n            \"chat_id\": chat_id,\r\n            \"message_id\": message['message_id']\r\n        })\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003ePush Model\u003c/strong\u003e (For small groups \u0026#x3C;50 members):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef fanout_push_model(message, chat_id):\r\n    participants = chat_service.get_participants(chat_id)\r\n    \r\n    for user_id in participants:\r\n        if user_id != message['sender_id']:\r\n            # Send full message to each participant\r\n            message_queue.publish(f\"user_{user_id}\", message)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePresence Service\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eReal-time Presence Updates\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass PresenceService:\r\n    def __init__(self):\r\n        self.redis_client = redis.Redis()\r\n        self.heartbeat_interval = 30  # seconds\r\n    \r\n    def set_online(self, user_id, server_id):\r\n        self.redis_client.hset(\"user_presence\", user_id, json.dumps({\r\n            \"status\": \"online\",\r\n            \"server_id\": server_id,\r\n            \"last_seen\": time.time()\r\n        }))\r\n        \r\n        # Notify contacts about status change\r\n        contacts = self.get_user_contacts(user_id)\r\n        for contact_id in contacts:\r\n            self.notify_presence_change(contact_id, user_id, \"online\")\r\n    \r\n    def heartbeat(self, user_id):\r\n        # Update last seen timestamp\r\n        presence = self.get_presence(user_id)\r\n        if presence:\r\n            presence['last_seen'] = time.time()\r\n            self.redis_client.hset(\"user_presence\", user_id, json.dumps(presence))\r\n    \r\n    def cleanup_offline_users(self):\r\n        # Background job to mark users offline after timeout\r\n        current_time = time.time()\r\n        for user_id, presence_data in self.redis_client.hgetall(\"user_presence\").items():\r\n            presence = json.loads(presence_data)\r\n            if current_time - presence['last_seen'] \u003e 60:  # 1 minute timeout\r\n                self.set_offline(user_id)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eMessage Ordering and Delivery\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eMessage Ordering\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUse logical timestamps (Lamport clocks)\u003c/li\u003e\n\u003cli\u003eSequence numbers per chat\u003c/li\u003e\n\u003cli\u003eVector clocks for concurrent updates\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eDelivery Guarantees\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass MessageDelivery:\r\n    def deliver_with_retry(self, user_id, message, max_retries=3):\r\n        for attempt in range(max_retries):\r\n            try:\r\n                if self.is_user_online(user_id):\r\n                    self.send_via_websocket(user_id, message)\r\n                else:\r\n                    self.store_for_offline_delivery(user_id, message)\r\n                \r\n                # Wait for acknowledgment\r\n                if self.wait_for_ack(message['message_id'], timeout=5):\r\n                    return True\r\n                    \r\n            except Exception as e:\r\n                if attempt == max_retries - 1:\r\n                    # Final failure - store in dead letter queue\r\n                    self.dead_letter_queue.store(user_id, message)\r\n                    return False\r\n                \r\n                # Exponential backoff\r\n                time.sleep(2 ** attempt)\r\n        \r\n        return False\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eScaling Considerations\u003c/h2\u003e\n\u003ch3\u003eDatabase Sharding\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eShard by Chat ID\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef get_shard(chat_id):\r\n    return chat_id % NUM_SHARDS\r\n\r\ndef route_message(message):\r\n    shard = get_shard(message['chat_id'])\r\n    return message_databases[shard]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eHot Partition Problem\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eVery active group chats can overwhelm a single shard\u003c/li\u003e\n\u003cli\u003eSolution: Further partition by time ranges\u003c/li\u003e\n\u003cli\u003eMove viral chats to dedicated high-performance shards\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eCaching Strategy\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eMulti-Level Caching\u003c/strong\u003e:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eL1 Cache\u003c/strong\u003e: Recent messages in application memory\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eL2 Cache\u003c/strong\u003e: Redis cluster for chat metadata\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eL3 Cache\u003c/strong\u003e: Chat participant lists\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass MessageCache:\r\n    def get_recent_messages(self, chat_id, limit=50):\r\n        # Try L1 cache first\r\n        cache_key = f\"recent_messages:{chat_id}\"\r\n        messages = self.memory_cache.get(cache_key)\r\n        \r\n        if not messages:\r\n            # Try L2 cache (Redis)\r\n            messages = self.redis_cache.get(cache_key)\r\n            \r\n            if not messages:\r\n                # Fetch from database\r\n                messages = self.database.get_messages(chat_id, limit)\r\n                \r\n                # Cache in both levels\r\n                self.redis_cache.set(cache_key, messages, ttl=300)\r\n            \r\n            self.memory_cache.set(cache_key, messages, ttl=60)\r\n        \r\n        return messages\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eGeographic Distribution\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eMulti-Region Architecture\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWebSocket gateways in each region\u003c/li\u003e\n\u003cli\u003eMessage routing based on user location\u003c/li\u003e\n\u003cli\u003eCross-region message replication\u003c/li\u003e\n\u003cli\u003eRegional presence services with global sync\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eChat System Design Quiz\u003c/h2\u003e\n\u003cp\u003eTest your understanding of real-time chat system design with the interactive quiz that appears after each part of this series.\u003c/p\u003e\n\u003ch2\u003eSecurity and Privacy\u003c/h2\u003e\n\u003ch3\u003eMessage Security\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eEnd-to-end encryption (client-side)\u003c/li\u003e\n\u003cli\u003eMessage integrity verification\u003c/li\u003e\n\u003cli\u003eForward secrecy for key rotation\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePrivacy Protection\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMessage retention policies\u003c/li\u003e\n\u003cli\u003eUser data anonymization\u003c/li\u003e\n\u003cli\u003eGDPR compliance for data deletion\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAbuse Prevention\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eRate limiting for spam prevention\u003c/li\u003e\n\u003cli\u003eContent moderation pipelines\u003c/li\u003e\n\u003cli\u003eUser reporting mechanisms\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eKey Takeaways\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eReal-time Architecture\u003c/strong\u003e: WebSockets enable bidirectional communication\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMessage Ordering\u003c/strong\u003e: Critical for user experience, requires careful design\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePresence Management\u003c/strong\u003e: Efficient tracking reduces system overhead\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFanout Strategies\u003c/strong\u003e: Choose between push/pull based on group size\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGraceful Degradation\u003c/strong\u003e: System should handle failures without data loss\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eWhat's Next?\u003c/h2\u003e\n\u003cp\u003eIn Part 4, we'll design a social media feed system like Twitter, which introduces challenges around content ranking, timeline generation, and handling viral content.\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"18:T5446,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eDesign a Social Media Feed (Twitter)\u003c/h1\u003e\n\u003cp\u003eIn this part, we'll design a social media feed system like Twitter. This problem introduces complex challenges around content ranking, timeline generation, viral content handling, and personalized content delivery.\u003c/p\u003e\n\u003ch2\u003e1. Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eActors\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eUser\u003c/strong\u003e: Posts and consumes content\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eContent Creator\u003c/strong\u003e: Influential users with many followers\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eContent Moderator\u003c/strong\u003e: Reviews flagged content\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSystem\u003c/strong\u003e: Manages recommendations and trending\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUse Cases\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eUser\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePost tweets (text, images, videos)\u003c/li\u003e\n\u003cli\u003eFollow/unfollow other users\u003c/li\u003e\n\u003cli\u003eView personalized timeline\u003c/li\u003e\n\u003cli\u003eLike, retweet, and comment on posts\u003c/li\u003e\n\u003cli\u003eSearch for tweets and users\u003c/li\u003e\n\u003cli\u003eView trending topics\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eContent Creator\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePublish content to large audiences\u003c/li\u003e\n\u003cli\u003eView analytics and engagement metrics\u003c/li\u003e\n\u003cli\u003ePromote content\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eContent Moderator\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReview reported content\u003c/li\u003e\n\u003cli\u003eTake action on policy violations\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eFunctional Requirements\u003c/h3\u003e\n\u003cp\u003e✅ \u003cstrong\u003eIn Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePost tweets (280 characters, media support)\u003c/li\u003e\n\u003cli\u003eFollow/unfollow users\u003c/li\u003e\n\u003cli\u003eHome timeline (personalized feed)\u003c/li\u003e\n\u003cli\u003eUser timeline (user's own tweets)\u003c/li\u003e\n\u003cli\u003eLike, retweet, reply functionality\u003c/li\u003e\n\u003cli\u003eTrending topics and hashtags\u003c/li\u003e\n\u003cli\u003eSearch functionality\u003c/li\u003e\n\u003cli\u003eBasic analytics\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOut of Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDirect messaging (covered in Part 3)\u003c/li\u003e\n\u003cli\u003eLive streaming\u003c/li\u003e\n\u003cli\u003eAdvanced recommendation algorithms\u003c/li\u003e\n\u003cli\u003eAdvertisement system\u003c/li\u003e\n\u003cli\u003eAdvanced analytics dashboard\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e2. Non-Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eScalability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSupport 500 million users\u003c/li\u003e\n\u003cli\u003eHandle 300 million tweets per day\u003c/li\u003e\n\u003cli\u003eSupport 100 million daily active users\u003c/li\u003e\n\u003cli\u003eHandle traffic spikes during viral events\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAvailability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e99.9% uptime for timeline generation\u003c/li\u003e\n\u003cli\u003e99.99% uptime for tweet reading\u003c/li\u003e\n\u003cli\u003eGraceful degradation during peak traffic\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePerformance\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eTimeline generation: \u0026#x3C;200ms\u003c/li\u003e\n\u003cli\u003eTweet posting: \u0026#x3C;100ms\u003c/li\u003e\n\u003cli\u003eSearch results: \u0026#x3C;300ms\u003c/li\u003e\n\u003cli\u003eHandle 300K tweets/second during peak\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eData Consistency\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eEventual consistency for timeline updates\u003c/li\u003e\n\u003cli\u003eStrong consistency for user actions (follow/unfollow)\u003c/li\u003e\n\u003cli\u003eTweet immutability after posting\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e3. Estimations\u003c/h2\u003e\n\u003ch3\u003eUser Metrics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTotal Users\u003c/strong\u003e: 500 million\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDaily Active Users\u003c/strong\u003e: 100 million\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAverage tweets per user per day\u003c/strong\u003e: 3\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAverage follows per user\u003c/strong\u003e: 200\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eHeavy users (celebrities)\u003c/strong\u003e: 1% with 1M+ followers\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eTweet Volume\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTweets per day\u003c/strong\u003e: 300 million\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTweets per second\u003c/strong\u003e: 3,472 average\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePeak TPS\u003c/strong\u003e: 17,360 (5x average)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTweet fanout ratio\u003c/strong\u003e: 1:200 (average followers)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eStorage Estimations\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003ePer Tweet Storage\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTweet ID: 8 bytes\u003c/li\u003e\n\u003cli\u003eUser ID: 8 bytes\u003c/li\u003e\n\u003cli\u003eContent: 300 bytes (average with metadata)\u003c/li\u003e\n\u003cli\u003eMedia URLs: 100 bytes\u003c/li\u003e\n\u003cli\u003eTimestamps: 16 bytes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTotal per tweet\u003c/strong\u003e: ~450 bytes\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eStorage Growth\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePer Day\u003c/strong\u003e: 300M × 450 bytes = 135 GB/day\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePer Year\u003c/strong\u003e: 135 GB × 365 = 49 TB/year\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePer 5 Years\u003c/strong\u003e: 245 TB\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eTimeline Cache Storage\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCache top 1000 tweets per user\u003c/li\u003e\n\u003cli\u003e100M users × 1000 tweets × 450 bytes = 45 TB cache\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e4. Design Goals\u003c/h2\u003e\n\u003ch3\u003ePerformance Requirements\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTimeline Generation\u003c/strong\u003e: \u0026#x3C;200ms for cached timelines\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTweet Publishing\u003c/strong\u003e: \u0026#x3C;100ms response time\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSearch\u003c/strong\u003e: \u0026#x3C;300ms for result delivery\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eViral Content\u003c/strong\u003e: Handle 100K retweets/minute\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eArchitecture Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eEvent-Driven\u003c/strong\u003e: Tweet fanout and timeline updates\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCQRS\u003c/strong\u003e: Separate read and write models\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCache-Heavy\u003c/strong\u003e: Aggressive caching for read performance\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUsage Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eRead Heavy\u003c/strong\u003e: 300:1 read to write ratio\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eReal-time\u003c/strong\u003e: Immediate timeline updates\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSpike Traffic\u003c/strong\u003e: Viral content creates traffic spikes\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e5. High-Level Design\u003c/h2\u003e\n\u003ch3\u003eBuilding Blocks\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e[Client] → [Load Balancer] → [API Gateway] → [Tweet Service]\r\n                                    ↓           ↓\r\n                            [Timeline Service] [User Service]\r\n                                    ↓           ↓\r\n                            [Fanout Service] → [Cache Layer]\r\n                                    ↓           ↓\r\n                            [Message Queue] → [Database Cluster]\r\n                                    ↓           ↓\r\n                            [Search Service] [Media Service]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCore Components\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eAPI Gateway\u003c/strong\u003e: Routes requests and handles authentication\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTweet Service\u003c/strong\u003e: Handles tweet creation and retrieval\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTimeline Service\u003c/strong\u003e: Generates and serves user timelines\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFanout Service\u003c/strong\u003e: Distributes tweets to followers\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUser Service\u003c/strong\u003e: Manages user profiles and relationships\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSearch Service\u003c/strong\u003e: Provides tweet and user search\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCache Layer\u003c/strong\u003e: Multi-tier caching for performance\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eAPI Design\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003ePost Tweet\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003ePOST /api/v1/tweets\r\nAuthorization: Bearer {token}\r\n{\r\n  \"content\": \"Hello world! #myFirstTweet\",\r\n  \"media_urls\": [\"https://cdn.example.com/image1.jpg\"],\r\n  \"reply_to\": null\r\n}\r\n\r\nResponse:\r\n{\r\n  \"tweet_id\": \"1234567890\",\r\n  \"user_id\": \"user_123\",\r\n  \"content\": \"Hello world! #myFirstTweet\",\r\n  \"created_at\": \"2024-06-17T10:00:00Z\",\r\n  \"engagement\": {\r\n    \"likes\": 0,\r\n    \"retweets\": 0,\r\n    \"replies\": 0\r\n  }\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eGet Timeline\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003eGET /api/v1/timeline?type=home\u0026#x26;limit=20\u0026#x26;cursor=tweet_123\r\n\r\nResponse:\r\n{\r\n  \"tweets\": [\r\n    {\r\n      \"tweet_id\": \"1234567890\",\r\n      \"user\": {\r\n        \"user_id\": \"user_456\",\r\n        \"username\": \"@johndoe\",\r\n        \"display_name\": \"John Doe\",\r\n        \"avatar_url\": \"https://cdn.example.com/avatar.jpg\"\r\n      },\r\n      \"content\": \"Great weather today!\",\r\n      \"created_at\": \"2024-06-17T10:00:00Z\",\r\n      \"engagement\": {\r\n        \"likes\": 42,\r\n        \"retweets\": 15,\r\n        \"replies\": 8\r\n      },\r\n      \"media\": []\r\n    }\r\n  ],\r\n  \"next_cursor\": \"tweet_456\",\r\n  \"has_more\": true\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eFollow User\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003ePOST /api/v1/users/{user_id}/follow\r\n\r\nResponse:\r\n{\r\n  \"following\": true,\r\n  \"follower_count\": 1543,\r\n  \"following_count\": 287\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eDatabase Schema\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eUsers Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE users (\r\n    user_id BIGINT PRIMARY KEY,\r\n    username VARCHAR(50) UNIQUE NOT NULL,\r\n    display_name VARCHAR(100),\r\n    bio TEXT,\r\n    avatar_url VARCHAR(500),\r\n    verified BOOLEAN DEFAULT FALSE,\r\n    follower_count INT DEFAULT 0,\r\n    following_count INT DEFAULT 0,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eTweets Table\u003c/strong\u003e (Partitioned by created_at):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE tweets (\r\n    tweet_id BIGINT PRIMARY KEY,\r\n    user_id BIGINT NOT NULL,\r\n    content TEXT NOT NULL,\r\n    reply_to BIGINT,\r\n    retweet_of BIGINT,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    like_count INT DEFAULT 0,\r\n    retweet_count INT DEFAULT 0,\r\n    reply_count INT DEFAULT 0,\r\n    \r\n    INDEX idx_user_time (user_id, created_at),\r\n    INDEX idx_reply_to (reply_to),\r\n    FOREIGN KEY (user_id) REFERENCES users(user_id)\r\n) PARTITION BY RANGE (UNIX_TIMESTAMP(created_at));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eFollows Table\u003c/strong\u003e (Sharded by follower_id):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE follows (\r\n    follower_id BIGINT,\r\n    following_id BIGINT,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    \r\n    PRIMARY KEY (follower_id, following_id),\r\n    INDEX idx_following (following_id, follower_id)\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eTimeline Cache Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE user_timelines (\r\n    user_id BIGINT,\r\n    tweet_id BIGINT,\r\n    score DECIMAL(10,2), -- for ranking\r\n    created_at TIMESTAMP,\r\n    \r\n    PRIMARY KEY (user_id, score, tweet_id),\r\n    INDEX idx_user_time (user_id, created_at)\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eTimeline Generation Strategies\u003c/h2\u003e\n\u003ch3\u003ePush Model (Write-Heavy)\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eTweet Fanout on Write\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass PushTimelineService:\r\n    def fanout_tweet(self, tweet, user_id):\r\n        # Get all followers\r\n        followers = self.user_service.get_followers(user_id)\r\n        \r\n        # Add tweet to each follower's timeline\r\n        for follower_id in followers:\r\n            self.timeline_cache.add_to_timeline(follower_id, tweet)\r\n            \r\n            # Limit timeline size (keep only latest 1000 tweets)\r\n            self.timeline_cache.trim_timeline(follower_id, max_size=1000)\r\n    \r\n    def get_timeline(self, user_id, limit=20):\r\n        # Timeline is pre-computed, just read from cache\r\n        return self.timeline_cache.get_timeline(user_id, limit)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eAdvantages\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFast timeline reads (pre-computed)\u003c/li\u003e\n\u003cli\u003eReal-time timeline updates\u003c/li\u003e\n\u003cli\u003eSimple implementation\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eDisadvantages\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eExpensive for users with many followers\u003c/li\u003e\n\u003cli\u003eStorage overhead (duplicate tweets)\u003c/li\u003e\n\u003cli\u003eCelebrity problem (1M+ followers)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePull Model (Read-Heavy)\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eTimeline Generation on Read\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass PullTimelineService:\r\n    def get_timeline(self, user_id, limit=20):\r\n        # Get users that this user follows\r\n        following = self.user_service.get_following(user_id)\r\n        \r\n        # Get recent tweets from each followed user\r\n        all_tweets = []\r\n        for followed_user_id in following:\r\n            tweets = self.tweet_service.get_user_tweets(\r\n                followed_user_id, \r\n                limit=100\r\n            )\r\n            all_tweets.extend(tweets)\r\n        \r\n        # Sort by timestamp and return top tweets\r\n        sorted_tweets = sorted(all_tweets, key=lambda x: x.created_at, reverse=True)\r\n        return sorted_tweets[:limit]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eAdvantages\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNo fanout cost for popular users\u003c/li\u003e\n\u003cli\u003eNo storage duplication\u003c/li\u003e\n\u003cli\u003eConsistent view of latest data\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eDisadvantages\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSlow timeline generation\u003c/li\u003e\n\u003cli\u003eDatabase load on read\u003c/li\u003e\n\u003cli\u003eDifficult to rank by engagement\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eHybrid Model (Recommended)\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eSmart Fanout Strategy\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass HybridTimelineService:\r\n    def __init__(self):\r\n        self.celebrity_threshold = 1000000  # 1M followers\r\n        \r\n    def fanout_tweet(self, tweet, user_id):\r\n        follower_count = self.user_service.get_follower_count(user_id)\r\n        \r\n        if follower_count \u003e self.celebrity_threshold:\r\n            # Celebrity: don't fanout, use pull on read\r\n            self.celebrity_tweets_cache.add(user_id, tweet)\r\n        else:\r\n            # Regular user: fanout to all followers\r\n            followers = self.user_service.get_followers(user_id)\r\n            for follower_id in followers:\r\n                self.timeline_cache.add_to_timeline(follower_id, tweet)\r\n    \r\n    def get_timeline(self, user_id, limit=20):\r\n        # Get pre-computed timeline\r\n        timeline_tweets = self.timeline_cache.get_timeline(user_id, limit)\r\n        \r\n        # Get tweets from celebrities this user follows\r\n        celebrity_following = self.user_service.get_celebrity_following(user_id)\r\n        celebrity_tweets = []\r\n        \r\n        for celebrity_id in celebrity_following:\r\n            tweets = self.celebrity_tweets_cache.get_recent_tweets(celebrity_id, 10)\r\n            celebrity_tweets.extend(tweets)\r\n        \r\n        # Merge and sort all tweets\r\n        all_tweets = timeline_tweets + celebrity_tweets\r\n        sorted_tweets = sorted(all_tweets, key=lambda x: x.created_at, reverse=True)\r\n        \r\n        return sorted_tweets[:limit]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eDetailed Design Deep Dive\u003c/h2\u003e\n\u003ch3\u003eFanout Service Architecture\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eAsync Fanout Processing\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass FanoutService:\r\n    def __init__(self):\r\n        self.message_queue = MessageQueue()\r\n        self.batch_size = 1000\r\n        \r\n    def queue_fanout(self, tweet):\r\n        # Queue fanout job for async processing\r\n        fanout_job = {\r\n            \"tweet_id\": tweet.id,\r\n            \"user_id\": tweet.user_id,\r\n            \"timestamp\": tweet.created_at\r\n        }\r\n        self.message_queue.publish(\"fanout_queue\", fanout_job)\r\n    \r\n    def process_fanout_batch(self, jobs):\r\n        # Process multiple fanout jobs in batch\r\n        for job in jobs:\r\n            followers = self.get_followers_batch(job.user_id)\r\n            \r\n            # Batch insert into timeline cache\r\n            timeline_entries = []\r\n            for follower_id in followers:\r\n                timeline_entries.append({\r\n                    \"user_id\": follower_id,\r\n                    \"tweet_id\": job.tweet_id,\r\n                    \"score\": self.calculate_score(job),\r\n                    \"created_at\": job.timestamp\r\n                })\r\n            \r\n            self.timeline_cache.batch_insert(timeline_entries)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCaching Strategy\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eMulti-Layer Cache Architecture\u003c/strong\u003e:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eL1 Cache\u003c/strong\u003e: Application-level cache (Recent timelines)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eL2 Cache\u003c/strong\u003e: Redis cluster (User timelines, tweet data)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eL3 Cache\u003c/strong\u003e: CDN (Media files, static content)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass CacheManager:\r\n    def __init__(self):\r\n        self.l1_cache = LRUCache(max_size=10000)  # In-memory\r\n        self.l2_cache = RedisCluster()\r\n        self.l3_cache = CDN()\r\n    \r\n    def get_timeline(self, user_id, limit=20):\r\n        cache_key = f\"timeline:{user_id}:{limit}\"\r\n        \r\n        # Try L1 cache first\r\n        timeline = self.l1_cache.get(cache_key)\r\n        if timeline:\r\n            return timeline\r\n            \r\n        # Try L2 cache (Redis)\r\n        timeline = self.l2_cache.get(cache_key)\r\n        if timeline:\r\n            self.l1_cache.set(cache_key, timeline, ttl=60)\r\n            return timeline\r\n            \r\n        # Generate timeline and cache\r\n        timeline = self.timeline_service.generate_timeline(user_id, limit)\r\n        \r\n        self.l2_cache.set(cache_key, timeline, ttl=300)\r\n        self.l1_cache.set(cache_key, timeline, ttl=60)\r\n        \r\n        return timeline\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eSearch Service\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eElasticsearch Integration\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass SearchService:\r\n    def __init__(self):\r\n        self.elasticsearch = Elasticsearch()\r\n        \r\n    def index_tweet(self, tweet):\r\n        doc = {\r\n            \"tweet_id\": tweet.id,\r\n            \"user_id\": tweet.user_id,\r\n            \"username\": tweet.user.username,\r\n            \"content\": tweet.content,\r\n            \"hashtags\": self.extract_hashtags(tweet.content),\r\n            \"mentions\": self.extract_mentions(tweet.content),\r\n            \"created_at\": tweet.created_at,\r\n            \"engagement_score\": self.calculate_engagement_score(tweet)\r\n        }\r\n        \r\n        self.elasticsearch.index(\r\n            index=\"tweets\",\r\n            id=tweet.id,\r\n            body=doc\r\n        )\r\n    \r\n    def search_tweets(self, query, limit=20, offset=0):\r\n        search_body = {\r\n            \"query\": {\r\n                \"bool\": {\r\n                    \"should\": [\r\n                        {\"match\": {\"content\": {\"query\": query, \"boost\": 2}}},\r\n                        {\"match\": {\"hashtags\": {\"query\": query, \"boost\": 3}}},\r\n                        {\"match\": {\"username\": {\"query\": query, \"boost\": 1.5}}}\r\n                    ]\r\n                }\r\n            },\r\n            \"sort\": [\r\n                {\"engagement_score\": {\"order\": \"desc\"}},\r\n                {\"created_at\": {\"order\": \"desc\"}}\r\n            ],\r\n            \"size\": limit,\r\n            \"from\": offset\r\n        }\r\n        \r\n        return self.elasticsearch.search(index=\"tweets\", body=search_body)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eTrending Topics\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eReal-time Trend Detection\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass TrendingService:\r\n    def __init__(self):\r\n        self.redis = Redis()\r\n        self.trend_window = 3600  # 1 hour window\r\n        \r\n    def update_hashtag_count(self, hashtag):\r\n        current_hour = int(time.time() // self.trend_window)\r\n        key = f\"hashtag_count:{current_hour}:{hashtag}\"\r\n        \r\n        # Increment count for current hour\r\n        self.redis.incr(key)\r\n        self.redis.expire(key, self.trend_window * 2)  # Keep 2 hours\r\n        \r\n        # Update global trending scores\r\n        self.update_trending_score(hashtag)\r\n    \r\n    def get_trending_topics(self, limit=10):\r\n        # Get top hashtags by score\r\n        return self.redis.zrevrange(\"trending_hashtags\", 0, limit-1, withscores=True)\r\n    \r\n    def calculate_trend_score(self, hashtag, current_count, historical_avg):\r\n        # Simple trending algorithm\r\n        if historical_avg == 0:\r\n            return current_count\r\n        \r\n        trend_ratio = current_count / historical_avg\r\n        velocity_score = trend_ratio * math.log(current_count + 1)\r\n        \r\n        return velocity_score\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eScaling Considerations\u003c/h2\u003e\n\u003ch3\u003eDatabase Sharding\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eTweets Sharding Strategy\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef get_tweet_shard(tweet_id):\r\n    # Shard by tweet_id for even distribution\r\n    return tweet_id % NUM_TWEET_SHARDS\r\n\r\ndef get_user_shard(user_id):\r\n    # Shard by user_id for user-related data\r\n    return user_id % NUM_USER_SHARDS\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eTimeline Sharding\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef get_timeline_shard(user_id):\r\n    # Shard user timelines by user_id\r\n    return user_id % NUM_TIMELINE_SHARDS\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eHandling Viral Content\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eCircuit Breaker for Fanout\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass ViralContentHandler:\r\n    def __init__(self):\r\n        self.fanout_threshold = 100000  # 100K followers\r\n        self.circuit_breaker = CircuitBreaker()\r\n        \r\n    def handle_viral_tweet(self, tweet, user_id):\r\n        follower_count = self.user_service.get_follower_count(user_id)\r\n        \r\n        if follower_count \u003e self.fanout_threshold:\r\n            # Skip immediate fanout for viral content\r\n            self.queue_delayed_fanout(tweet, delay=60)  # 1 minute delay\r\n            \r\n            # Use pull model for immediate reads\r\n            self.celebrity_cache.add_hot_tweet(user_id, tweet)\r\n        else:\r\n            # Normal fanout\r\n            self.fanout_service.fanout_tweet(tweet, user_id)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eMedia Handling\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eCDN Strategy for Media\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass MediaService:\r\n    def __init__(self):\r\n        self.cdn = CloudFrontCDN()\r\n        self.storage = S3Storage()\r\n        \r\n    def upload_media(self, media_file, user_id):\r\n        # Generate unique filename\r\n        filename = f\"{user_id}/{uuid.uuid4()}.{media_file.extension}\"\r\n        \r\n        # Upload to S3\r\n        s3_url = self.storage.upload(filename, media_file)\r\n        \r\n        # Generate CDN URL\r\n        cdn_url = self.cdn.get_url(filename)\r\n        \r\n        return {\r\n            \"media_id\": str(uuid.uuid4()),\r\n            \"original_url\": s3_url,\r\n            \"cdn_url\": cdn_url,\r\n            \"thumbnail_url\": self.generate_thumbnail(cdn_url)\r\n        }\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSocial Media Feed Design Quiz\u003c/h2\u003e\n\u003cp\u003eTest your understanding of social media feed system design with the interactive quiz that appears after each part of this series.\u003c/p\u003e\n\u003ch2\u003eKey Takeaways\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eHybrid Approach\u003c/strong\u003e: Combine push and pull models based on user characteristics\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAggressive Caching\u003c/strong\u003e: Multi-layer caching is essential for read performance\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAsync Processing\u003c/strong\u003e: Use message queues for fanout and background processing\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eViral Content\u003c/strong\u003e: Design circuit breakers and fallback mechanisms\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSearch Integration\u003c/strong\u003e: Elasticsearch enables fast, relevant search results\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eWhat's Next?\u003c/h2\u003e\n\u003cp\u003eIn Part 5, we'll design a video streaming service like YouTube, which introduces challenges around large file storage, content delivery networks, and video processing pipelines.\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"19:T6a24,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eDesign a Video Streaming Service (YouTube)\u003c/h1\u003e\n\u003cp\u003eIn this part, we'll design a video streaming service like YouTube or Netflix. This introduces unique challenges around large file storage, content delivery networks, video processing, and global content distribution.\u003c/p\u003e\n\u003ch2\u003e1. Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eActors\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eContent Creator\u003c/strong\u003e: Uploads and manages videos\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eViewer\u003c/strong\u003e: Watches and interacts with videos\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eContent Moderator\u003c/strong\u003e: Reviews flagged content\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSystem\u003c/strong\u003e: Handles video processing and recommendations\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUse Cases\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eContent Creator\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUpload videos (various formats, up to 4K resolution)\u003c/li\u003e\n\u003cli\u003eAdd metadata (title, description, thumbnails, tags)\u003c/li\u003e\n\u003cli\u003eView analytics (views, engagement, revenue)\u003c/li\u003e\n\u003cli\u003eManage video settings (privacy, monetization)\u003c/li\u003e\n\u003cli\u003eLive streaming capability\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eViewer\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSearch and browse videos\u003c/li\u003e\n\u003cli\u003eWatch videos with adaptive quality\u003c/li\u003e\n\u003cli\u003eLike, comment, share videos\u003c/li\u003e\n\u003cli\u003eSubscribe to channels\u003c/li\u003e\n\u003cli\u003eCreate and manage playlists\u003c/li\u003e\n\u003cli\u003eView personalized recommendations\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eContent Moderator\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReview flagged content\u003c/li\u003e\n\u003cli\u003eApply community guidelines\u003c/li\u003e\n\u003cli\u003eManage copyright claims\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eFunctional Requirements\u003c/h3\u003e\n\u003cp\u003e✅ \u003cstrong\u003eIn Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eVideo upload and storage\u003c/li\u003e\n\u003cli\u003eVideo transcoding (multiple resolutions)\u003c/li\u003e\n\u003cli\u003eVideo playback with adaptive streaming\u003c/li\u003e\n\u003cli\u003eSearch and discovery\u003c/li\u003e\n\u003cli\u003eUser engagement (likes, comments, subscriptions)\u003c/li\u003e\n\u003cli\u003eBasic recommendation system\u003c/li\u003e\n\u003cli\u003eAnalytics and metrics\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOut of Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAdvanced recommendation algorithms (ML-based)\u003c/li\u003e\n\u003cli\u003eMonetization and ad serving\u003c/li\u003e\n\u003cli\u003eLive streaming infrastructure\u003c/li\u003e\n\u003cli\u003eAdvanced content moderation\u003c/li\u003e\n\u003cli\u003eContent creator studio tools\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e2. Non-Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eScalability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSupport 2 billion users globally\u003c/li\u003e\n\u003cli\u003eHandle 500 hours of video uploaded per minute\u003c/li\u003e\n\u003cli\u003eSupport 1 billion hours watched per day\u003c/li\u003e\n\u003cli\u003eHandle traffic spikes during viral events\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAvailability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e99.9% uptime for video playback\u003c/li\u003e\n\u003cli\u003e99.5% uptime for video uploads\u003c/li\u003e\n\u003cli\u003eGlobal content distribution\u003c/li\u003e\n\u003cli\u003eGraceful degradation during failures\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePerformance\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eVideo start time: \u0026#x3C;2 seconds globally\u003c/li\u003e\n\u003cli\u003eUpload processing: \u0026#x3C;30 minutes for 1-hour video\u003c/li\u003e\n\u003cli\u003eSearch results: \u0026#x3C;300ms\u003c/li\u003e\n\u003cli\u003eSupport 4K streaming with \u0026#x3C;1% rebuffering\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eStorage \u0026#x26; Bandwidth\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePetabyte-scale storage requirements\u003c/li\u003e\n\u003cli\u003eMulti-region content replication\u003c/li\u003e\n\u003cli\u003eIntelligent content placement\u003c/li\u003e\n\u003cli\u003eBandwidth optimization\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e3. Estimations\u003c/h2\u003e\n\u003ch3\u003eUser Metrics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTotal Users\u003c/strong\u003e: 2 billion\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDaily Active Users\u003c/strong\u003e: 500 million\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAverage watch time per user\u003c/strong\u003e: 40 minutes/day\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eConcurrent viewers\u003c/strong\u003e: 50 million peak\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eVideo Metrics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eVideos uploaded per day\u003c/strong\u003e: 720,000 (500 hours/min × 60 min/hour × 24 hours)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVideo views per day\u003c/strong\u003e: 5 billion\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAverage video length\u003c/strong\u003e: 10 minutes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVideo upload formats\u003c/strong\u003e: 90% mobile (1080p), 10% professional (4K)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eStorage Estimations\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003ePer Video Storage\u003c/strong\u003e (Multiple Resolutions):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOriginal file: 1 GB (10 min @ 4K)\u003c/li\u003e\n\u003cli\u003e1080p: 400 MB\u003c/li\u003e\n\u003cli\u003e720p: 200 MB\u003c/li\u003e\n\u003cli\u003e480p: 100 MB\u003c/li\u003e\n\u003cli\u003e360p: 50 MB\u003c/li\u003e\n\u003cli\u003eThumbnails: 1 MB\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTotal per video\u003c/strong\u003e: ~1.75 GB\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eStorage Growth\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePer Day\u003c/strong\u003e: 720K videos × 1.75 GB = 1.26 PB/day\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePer Year\u003c/strong\u003e: 1.26 PB × 365 = 460 PB/year\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWith Replication (3x)\u003c/strong\u003e: 1.38 EB/year\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eBandwidth Estimations\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eAverage bitrate\u003c/strong\u003e: 2 Mbps (adaptive streaming)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eConcurrent viewers\u003c/strong\u003e: 50M × 2 Mbps = 100 Tbps\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDaily bandwidth\u003c/strong\u003e: 50M × 2 Mbps × 40 min = 400 TB/day\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e4. Design Goals\u003c/h2\u003e\n\u003ch3\u003ePerformance Requirements\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eVideo Start Time\u003c/strong\u003e: \u0026#x3C;2 seconds globally\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBuffering\u003c/strong\u003e: \u0026#x3C;1% rebuffering ratio\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUpload Speed\u003c/strong\u003e: Support simultaneous uploads\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSearch Latency\u003c/strong\u003e: \u0026#x3C;300ms\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eArchitecture Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eMicroservices\u003c/strong\u003e: Decomposed by functionality\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEvent-Driven\u003c/strong\u003e: Video processing workflows\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCQRS\u003c/strong\u003e: Separate read/write models for metadata\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUsage Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eRead Heavy\u003c/strong\u003e: 100:1 read to write ratio\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLarge Files\u003c/strong\u003e: Multi-GB video files\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGlobal Distribution\u003c/strong\u003e: Viewers worldwide\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBatch Processing\u003c/strong\u003e: Video encoding workflows\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e5. High-Level Design\u003c/h2\u003e\n\u003ch3\u003eBuilding Blocks\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e[Client] → [CDN] → [Load Balancer] → [API Gateway]\r\n                           ↓              ↓\r\n                   [Video Service] → [Upload Service]\r\n                           ↓              ↓\r\n                   [Metadata DB] ← [Video Processing]\r\n                           ↓              ↓\r\n                   [Search Service] → [Blob Storage]\r\n                           ↓              ↓\r\n                   [Analytics] ← [Recommendation Service]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCore Components\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eCDN\u003c/strong\u003e: Global content delivery network\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUpload Service\u003c/strong\u003e: Handles video file uploads\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVideo Processing\u003c/strong\u003e: Transcoding and optimization\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMetadata Service\u003c/strong\u003e: Video information and user data\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSearch Service\u003c/strong\u003e: Video discovery and search\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eStreaming Service\u003c/strong\u003e: Adaptive video delivery\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAnalytics Service\u003c/strong\u003e: View tracking and metrics\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eAPI Design\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eUpload Video\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003ePOST /api/v1/videos/upload\r\nAuthorization: Bearer {token}\r\nContent-Type: multipart/form-data\r\n\r\n{\r\n  \"title\": \"Amazing Travel Video\",\r\n  \"description\": \"My trip to Iceland\",\r\n  \"tags\": [\"travel\", \"iceland\", \"nature\"],\r\n  \"category\": \"travel\",\r\n  \"privacy\": \"public\",\r\n  \"thumbnail\": {file},\r\n  \"video_file\": {file}\r\n}\r\n\r\nResponse:\r\n{\r\n  \"video_id\": \"abc123def456\",\r\n  \"upload_url\": \"https://upload.example.com/abc123def456\",\r\n  \"status\": \"processing\",\r\n  \"estimated_completion\": \"2024-06-17T10:30:00Z\"\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eGet Video\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003eGET /api/v1/videos/{video_id}\r\n\r\nResponse:\r\n{\r\n  \"video_id\": \"abc123def456\",\r\n  \"title\": \"Amazing Travel Video\",\r\n  \"description\": \"My trip to Iceland\",\r\n  \"channel\": {\r\n    \"channel_id\": \"channel_789\",\r\n    \"name\": \"Travel Enthusiast\",\r\n    \"subscriber_count\": 15420\r\n  },\r\n  \"duration\": 600,\r\n  \"views\": 12543,\r\n  \"likes\": 892,\r\n  \"upload_date\": \"2024-06-17T10:00:00Z\",\r\n  \"streaming_urls\": {\r\n    \"4k\": \"https://cdn.example.com/abc123def456/4k.m3u8\",\r\n    \"1080p\": \"https://cdn.example.com/abc123def456/1080p.m3u8\",\r\n    \"720p\": \"https://cdn.example.com/abc123def456/720p.m3u8\",\r\n    \"480p\": \"https://cdn.example.com/abc123def456/480p.m3u8\"\r\n  },\r\n  \"thumbnails\": {\r\n    \"default\": \"https://cdn.example.com/abc123def456/thumb.jpg\",\r\n    \"medium\": \"https://cdn.example.com/abc123def456/thumb_medium.jpg\"\r\n  }\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eSearch Videos\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-http\"\u003eGET /api/v1/search?q=travel iceland\u0026#x26;limit=20\u0026#x26;offset=0\u0026#x26;sort=relevance\r\n\r\nResponse:\r\n{\r\n  \"results\": [\r\n    {\r\n      \"video_id\": \"abc123def456\",\r\n      \"title\": \"Amazing Travel Video\",\r\n      \"thumbnail\": \"https://cdn.example.com/abc123def456/thumb.jpg\",\r\n      \"duration\": 600,\r\n      \"views\": 12543,\r\n      \"channel_name\": \"Travel Enthusiast\",\r\n      \"upload_date\": \"2024-06-17T10:00:00Z\"\r\n    }\r\n  ],\r\n  \"total_results\": 15420,\r\n  \"next_page_token\": \"eyJvZmZzZXQiOjIwfQ==\"\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eDatabase Schema\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eVideos Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE videos (\r\n    video_id VARCHAR(20) PRIMARY KEY,\r\n    channel_id BIGINT NOT NULL,\r\n    title VARCHAR(255) NOT NULL,\r\n    description TEXT,\r\n    duration INT NOT NULL,\r\n    category VARCHAR(50),\r\n    privacy ENUM('public', 'unlisted', 'private') DEFAULT 'public',\r\n    status ENUM('processing', 'ready', 'failed') DEFAULT 'processing',\r\n    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    view_count BIGINT DEFAULT 0,\r\n    like_count INT DEFAULT 0,\r\n    dislike_count INT DEFAULT 0,\r\n    comment_count INT DEFAULT 0,\r\n    \r\n    INDEX idx_channel_date (channel_id, upload_date),\r\n    INDEX idx_category_views (category, view_count),\r\n    FULLTEXT idx_search (title, description)\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eVideo Files Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE video_files (\r\n    video_id VARCHAR(20),\r\n    resolution ENUM('4k', '1080p', '720p', '480p', '360p'),\r\n    file_url VARCHAR(500) NOT NULL,\r\n    file_size BIGINT NOT NULL,\r\n    bitrate INT NOT NULL,\r\n    codec VARCHAR(20) NOT NULL,\r\n    \r\n    PRIMARY KEY (video_id, resolution),\r\n    FOREIGN KEY (video_id) REFERENCES videos(video_id)\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eChannels Table\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE channels (\r\n    channel_id BIGINT PRIMARY KEY,\r\n    user_id BIGINT NOT NULL,\r\n    name VARCHAR(100) NOT NULL,\r\n    description TEXT,\r\n    subscriber_count BIGINT DEFAULT 0,\r\n    video_count INT DEFAULT 0,\r\n    total_views BIGINT DEFAULT 0,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    \r\n    INDEX idx_subscribers (subscriber_count),\r\n    FOREIGN KEY (user_id) REFERENCES users(user_id)\r\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eView Events Table\u003c/strong\u003e (Time-series data):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE TABLE view_events (\r\n    event_id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n    video_id VARCHAR(20) NOT NULL,\r\n    user_id BIGINT,\r\n    session_id VARCHAR(50),\r\n    watched_duration INT NOT NULL,\r\n    total_duration INT NOT NULL,\r\n    quality VARCHAR(10),\r\n    device_type VARCHAR(20),\r\n    geo_location VARCHAR(10),\r\n    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    \r\n    INDEX idx_video_time (video_id, timestamp),\r\n    INDEX idx_user_time (user_id, timestamp)\r\n) PARTITION BY RANGE (UNIX_TIMESTAMP(timestamp));\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eVideo Processing Pipeline\u003c/h2\u003e\n\u003ch3\u003eUpload and Processing Workflow\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass VideoProcessingPipeline:\r\n    def __init__(self):\r\n        self.upload_service = UploadService()\r\n        self.transcoding_service = TranscodingService()\r\n        self.storage_service = StorageService()\r\n        self.metadata_service = MetadataService()\r\n        \r\n    def process_upload(self, video_file, metadata):\r\n        # 1. Generate unique video ID\r\n        video_id = self.generate_video_id()\r\n        \r\n        # 2. Upload original file to staging storage\r\n        staging_url = self.upload_service.upload_to_staging(video_file, video_id)\r\n        \r\n        # 3. Extract video metadata\r\n        video_info = self.extract_video_metadata(staging_url)\r\n        \r\n        # 4. Create database record\r\n        self.metadata_service.create_video_record(video_id, metadata, video_info)\r\n        \r\n        # 5. Queue transcoding jobs\r\n        self.queue_transcoding_jobs(video_id, staging_url, video_info)\r\n        \r\n        return {\"video_id\": video_id, \"status\": \"processing\"}\r\n    \r\n    def queue_transcoding_jobs(self, video_id, source_url, video_info):\r\n        resolutions = self.determine_target_resolutions(video_info)\r\n        \r\n        for resolution in resolutions:\r\n            job = {\r\n                \"video_id\": video_id,\r\n                \"source_url\": source_url,\r\n                \"target_resolution\": resolution,\r\n                \"output_format\": \"mp4\",\r\n                \"codec\": \"h264\"\r\n            }\r\n            \r\n            self.transcoding_queue.publish(job)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eTranscoding Service\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass TranscodingService:\r\n    def __init__(self):\r\n        self.ffmpeg = FFMpegWrapper()\r\n        self.storage = StorageService()\r\n        \r\n    def transcode_video(self, job):\r\n        video_id = job['video_id']\r\n        source_url = job['source_url']\r\n        resolution = job['target_resolution']\r\n        \r\n        try:\r\n            # 1. Download source file\r\n            local_source = self.download_source_file(source_url)\r\n            \r\n            # 2. Transcode to target resolution\r\n            output_file = self.ffmpeg.transcode(\r\n                input_file=local_source,\r\n                resolution=resolution,\r\n                codec=job['codec'],\r\n                bitrate=self.get_target_bitrate(resolution)\r\n            )\r\n            \r\n            # 3. Upload transcoded file to CDN\r\n            cdn_url = self.storage.upload_to_cdn(output_file, video_id, resolution)\r\n            \r\n            # 4. Generate thumbnails\r\n            thumbnails = self.generate_thumbnails(local_source, video_id)\r\n            \r\n            # 5. Update metadata with file URLs\r\n            self.metadata_service.update_video_files(video_id, {\r\n                \"resolution\": resolution,\r\n                \"file_url\": cdn_url,\r\n                \"file_size\": os.path.getsize(output_file),\r\n                \"bitrate\": self.get_target_bitrate(resolution)\r\n            })\r\n            \r\n            # 6. Cleanup temporary files\r\n            self.cleanup_temp_files([local_source, output_file])\r\n            \r\n        except Exception as e:\r\n            self.handle_transcoding_error(video_id, resolution, str(e))\r\n    \r\n    def get_target_bitrate(self, resolution):\r\n        bitrates = {\r\n            \"4k\": 20000,      # 20 Mbps\r\n            \"1080p\": 8000,    # 8 Mbps\r\n            \"720p\": 4000,     # 4 Mbps\r\n            \"480p\": 2000,     # 2 Mbps\r\n            \"360p\": 1000      # 1 Mbps\r\n        }\r\n        return bitrates.get(resolution, 2000)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eContent Delivery and Streaming\u003c/h2\u003e\n\u003ch3\u003eCDN Architecture\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass CDNManager:\r\n    def __init__(self):\r\n        self.primary_regions = [\"us-east\", \"us-west\", \"eu-west\", \"asia-pacific\"]\r\n        self.edge_locations = self.load_edge_locations()\r\n        \r\n    def upload_to_cdn(self, video_file, video_id, resolution):\r\n        # 1. Upload to primary storage\r\n        primary_url = self.upload_to_primary_storage(video_file, video_id, resolution)\r\n        \r\n        # 2. Replicate to major regions\r\n        replication_jobs = []\r\n        for region in self.primary_regions:\r\n            job = {\r\n                \"source_url\": primary_url,\r\n                \"target_region\": region,\r\n                \"video_id\": video_id,\r\n                \"resolution\": resolution\r\n            }\r\n            replication_jobs.append(job)\r\n        \r\n        self.queue_replication_jobs(replication_jobs)\r\n        \r\n        return primary_url\r\n    \r\n    def get_optimal_cdn_url(self, video_id, resolution, user_location):\r\n        # Find nearest CDN edge location\r\n        nearest_edge = self.find_nearest_edge(user_location)\r\n        \r\n        # Check if content is available at edge\r\n        edge_url = f\"https://{nearest_edge}/videos/{video_id}/{resolution}.mp4\"\r\n        \r\n        if self.check_content_availability(edge_url):\r\n            return edge_url\r\n        else:\r\n            # Fallback to regional CDN\r\n            regional_url = self.get_regional_url(video_id, resolution, user_location)\r\n            \r\n            # Trigger cache warming for future requests\r\n            self.trigger_cache_warming(edge_url, regional_url)\r\n            \r\n            return regional_url\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eAdaptive Streaming\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass AdaptiveStreamingService:\r\n    def generate_hls_manifest(self, video_id, available_resolutions):\r\n        \"\"\"Generate HLS master playlist for adaptive streaming\"\"\"\r\n        \r\n        manifest = \"#EXTM3U\\n#EXT-X-VERSION:3\\n\\n\"\r\n        \r\n        for resolution in available_resolutions:\r\n            bandwidth = self.get_bandwidth_for_resolution(resolution)\r\n            resolution_str = self.get_resolution_string(resolution)\r\n            \r\n            manifest += f\"#EXT-X-STREAM-INF:BANDWIDTH={bandwidth},RESOLUTION={resolution_str}\\n\"\r\n            manifest += f\"{resolution}.m3u8\\n\"\r\n        \r\n        return manifest\r\n    \r\n    def generate_resolution_playlist(self, video_id, resolution):\r\n        \"\"\"Generate playlist for specific resolution\"\"\"\r\n        \r\n        # Get video segments for this resolution\r\n        segments = self.get_video_segments(video_id, resolution)\r\n        \r\n        playlist = \"#EXTM3U\\n#EXT-X-VERSION:3\\n#EXT-X-TARGETDURATION:10\\n\\n\"\r\n        \r\n        for segment in segments:\r\n            playlist += f\"#EXTINF:{segment.duration},\\n\"\r\n            playlist += f\"{segment.url}\\n\"\r\n        \r\n        playlist += \"#EXT-X-ENDLIST\\n\"\r\n        \r\n        return playlist\r\n    \r\n    def get_bandwidth_for_resolution(self, resolution):\r\n        bandwidths = {\r\n            \"4k\": 20000000,     # 20 Mbps\r\n            \"1080p\": 8000000,   # 8 Mbps\r\n            \"720p\": 4000000,    # 4 Mbps\r\n            \"480p\": 2000000,    # 2 Mbps\r\n            \"360p\": 1000000     # 1 Mbps\r\n        }\r\n        return bandwidths.get(resolution, 2000000)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSearch and Discovery\u003c/h2\u003e\n\u003ch3\u003eVideo Search Service\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass VideoSearchService:\r\n    def __init__(self):\r\n        self.elasticsearch = Elasticsearch()\r\n        self.search_analytics = SearchAnalytics()\r\n        \r\n    def index_video(self, video):\r\n        \"\"\"Index video for search\"\"\"\r\n        \r\n        doc = {\r\n            \"video_id\": video.video_id,\r\n            \"title\": video.title,\r\n            \"description\": video.description,\r\n            \"tags\": video.tags,\r\n            \"category\": video.category,\r\n            \"channel_name\": video.channel.name,\r\n            \"upload_date\": video.upload_date,\r\n            \"duration\": video.duration,\r\n            \"view_count\": video.view_count,\r\n            \"like_count\": video.like_count,\r\n            \"engagement_score\": self.calculate_engagement_score(video)\r\n        }\r\n        \r\n        self.elasticsearch.index(\r\n            index=\"videos\",\r\n            id=video.video_id,\r\n            body=doc\r\n        )\r\n    \r\n    def search_videos(self, query, filters=None, limit=20, offset=0):\r\n        \"\"\"Search videos with ranking\"\"\"\r\n        \r\n        search_body = {\r\n            \"query\": {\r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                            \"multi_match\": {\r\n                                \"query\": query,\r\n                                \"fields\": [\r\n                                    \"title^3\",\r\n                                    \"description^2\", \r\n                                    \"tags^2\",\r\n                                    \"channel_name^1.5\"\r\n                                ]\r\n                            }\r\n                        }\r\n                    ],\r\n                    \"filter\": self.build_filters(filters)\r\n                }\r\n            },\r\n            \"sort\": [\r\n                {\"_score\": {\"order\": \"desc\"}},\r\n                {\"engagement_score\": {\"order\": \"desc\"}},\r\n                {\"upload_date\": {\"order\": \"desc\"}}\r\n            ],\r\n            \"size\": limit,\r\n            \"from\": offset\r\n        }\r\n        \r\n        results = self.elasticsearch.search(index=\"videos\", body=search_body)\r\n        \r\n        # Log search for analytics\r\n        self.search_analytics.log_search(query, results['hits']['total']['value'])\r\n        \r\n        return self.format_search_results(results)\r\n    \r\n    def calculate_engagement_score(self, video):\r\n        \"\"\"Calculate video engagement score for ranking\"\"\"\r\n        \r\n        age_in_days = (datetime.now() - video.upload_date).days\r\n        age_factor = 1.0 / (age_in_days + 1)\r\n        \r\n        view_score = math.log(video.view_count + 1)\r\n        like_ratio = video.like_count / max(video.view_count, 1)\r\n        \r\n        engagement_score = (view_score * 0.7 + like_ratio * 100 * 0.3) * age_factor\r\n        \r\n        return engagement_score\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eAnalytics and Monitoring\u003c/h2\u003e\n\u003ch3\u003eVideo Analytics\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass VideoAnalyticsService:\r\n    def __init__(self):\r\n        self.time_series_db = InfluxDB()\r\n        self.cache = Redis()\r\n        \r\n    def track_video_view(self, video_id, user_id, watch_data):\r\n        \"\"\"Track video view event\"\"\"\r\n        \r\n        event = {\r\n            \"video_id\": video_id,\r\n            \"user_id\": user_id,\r\n            \"watched_duration\": watch_data['watched_duration'],\r\n            \"total_duration\": watch_data['total_duration'],\r\n            \"completion_rate\": watch_data['watched_duration'] / watch_data['total_duration'],\r\n            \"quality\": watch_data['quality'],\r\n            \"device_type\": watch_data['device_type'],\r\n            \"geo_location\": watch_data['geo_location'],\r\n            \"timestamp\": datetime.utcnow()\r\n        }\r\n        \r\n        # Store in time-series database\r\n        self.time_series_db.write_point(\"video_views\", event)\r\n        \r\n        # Update real-time counters\r\n        self.update_realtime_metrics(video_id, event)\r\n    \r\n    def update_realtime_metrics(self, video_id, event):\r\n        \"\"\"Update real-time view counters\"\"\"\r\n        \r\n        # Increment view count\r\n        self.cache.incr(f\"video_views:{video_id}\")\r\n        \r\n        # Update hourly view count\r\n        hour_key = f\"video_views_hourly:{video_id}:{datetime.utcnow().strftime('%Y%m%d%H')}\"\r\n        self.cache.incr(hour_key)\r\n        self.cache.expire(hour_key, 86400)  # 24 hours\r\n        \r\n        # Track completion rate\r\n        if event['completion_rate'] \u003e 0.8:  # 80% completion\r\n            self.cache.incr(f\"video_completions:{video_id}\")\r\n    \r\n    def get_video_analytics(self, video_id, time_range=\"24h\"):\r\n        \"\"\"Get analytics for a specific video\"\"\"\r\n        \r\n        metrics = {\r\n            \"total_views\": self.cache.get(f\"video_views:{video_id}\") or 0,\r\n            \"hourly_views\": self.get_hourly_views(video_id, time_range),\r\n            \"completion_rate\": self.calculate_completion_rate(video_id),\r\n            \"geographic_distribution\": self.get_geographic_stats(video_id, time_range),\r\n            \"device_breakdown\": self.get_device_stats(video_id, time_range),\r\n            \"quality_distribution\": self.get_quality_stats(video_id, time_range)\r\n        }\r\n        \r\n        return metrics\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eScaling Considerations\u003c/h2\u003e\n\u003ch3\u003eStorage Optimization\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eIntelligent Storage Tiering\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass StorageTierManager:\r\n    def __init__(self):\r\n        self.hot_storage = \"SSD_TIER\"      # Recent, popular content\r\n        self.warm_storage = \"HDD_TIER\"     # Older, moderate popularity\r\n        self.cold_storage = \"GLACIER_TIER\" # Archived content\r\n        \r\n    def determine_storage_tier(self, video_id):\r\n        video_stats = self.get_video_stats(video_id)\r\n        \r\n        # Recent videos (\u0026#x3C; 30 days) → Hot storage\r\n        if video_stats['age_days'] \u0026#x3C; 30:\r\n            return self.hot_storage\r\n            \r\n        # Popular videos (\u003e 1000 views/day) → Hot storage\r\n        if video_stats['daily_views'] \u003e 1000:\r\n            return self.hot_storage\r\n            \r\n        # Moderate popularity → Warm storage\r\n        if video_stats['daily_views'] \u003e 10:\r\n            return self.warm_storage\r\n            \r\n        # Low popularity → Cold storage\r\n        return self.cold_storage\r\n    \r\n    def migrate_storage_tier(self, video_id, target_tier):\r\n        current_urls = self.get_video_file_urls(video_id)\r\n        \r\n        for resolution, url in current_urls.items():\r\n            # Copy to new storage tier\r\n            new_url = self.copy_to_tier(url, target_tier)\r\n            \r\n            # Update database with new URL\r\n            self.update_video_file_url(video_id, resolution, new_url)\r\n            \r\n            # Delete from old tier (after verification)\r\n            self.schedule_deletion(url, delay=\"24h\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eGlobal Distribution\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eEdge Cache Management\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass EdgeCacheManager:\r\n    def __init__(self):\r\n        self.popularity_threshold = 1000  # views per hour\r\n        self.cache_regions = [\"NA\", \"EU\", \"ASIA\", \"SA\", \"AFRICA\"]\r\n        \r\n    def should_cache_at_edge(self, video_id):\r\n        recent_views = self.get_recent_views(video_id, hours=1)\r\n        return recent_views \u003e self.popularity_threshold\r\n    \r\n    def predict_viral_content(self, video_id):\r\n        \"\"\"Predict if content will go viral based on early metrics\"\"\"\r\n        \r\n        # Get first hour metrics\r\n        first_hour_views = self.get_views_in_timeframe(video_id, \"1h\")\r\n        first_hour_engagement = self.get_engagement_rate(video_id, \"1h\")\r\n        \r\n        # Simple viral prediction\r\n        viral_score = first_hour_views * first_hour_engagement\r\n        \r\n        if viral_score \u003e 10000:  # Threshold for viral prediction\r\n            # Pre-cache in all regions\r\n            self.precache_in_all_regions(video_id)\r\n            return True\r\n            \r\n        return False\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eVideo Streaming Design Quiz\u003c/h2\u003e\n\u003cp\u003eTest your understanding of video streaming system design with the interactive quiz that appears after each part of this series.\u003c/p\u003e\n\u003ch2\u003eSecurity and Content Protection\u003c/h2\u003e\n\u003ch3\u003eCopyright Protection\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eContent ID system for automatic detection\u003c/li\u003e\n\u003cli\u003eDMCA takedown process automation\u003c/li\u003e\n\u003cli\u003eWatermarking and fingerprinting\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAccess Control\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eJWT-based authentication\u003c/li\u003e\n\u003cli\u003eCDN token authentication\u003c/li\u003e\n\u003cli\u003eGeographic content restrictions\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eDRM Implementation\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eEncrypted video streams\u003c/li\u003e\n\u003cli\u003eLicense server integration\u003c/li\u003e\n\u003cli\u003eDevice-specific decryption keys\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eKey Takeaways\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eMulti-Resolution Strategy\u003c/strong\u003e: Store videos in multiple qualities for adaptive streaming\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGlobal CDN\u003c/strong\u003e: Essential for low latency worldwide video delivery\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eIntelligent Caching\u003c/strong\u003e: Predict and pre-cache viral content\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eStorage Tiering\u003c/strong\u003e: Optimize costs with hot/warm/cold storage\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAsync Processing\u003c/strong\u003e: Use message queues for video transcoding workflows\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eWhat's Next?\u003c/h2\u003e\n\u003cp\u003eIn Part 6, we'll design a distributed cache system like Redis, which covers fundamental concepts of caching, data consistency, and distributed system coordination.\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"1a:T6ae9,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eDesign a Distributed Cache (Redis)\u003c/h1\u003e\n\u003cp\u003eIn this final part, we'll design a distributed cache system like Redis or Memcached. This introduces fundamental concepts of distributed systems including data consistency, partitioning, replication, and coordination.\u003c/p\u003e\n\u003ch2\u003e1. Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eActors\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eApplication Client\u003c/strong\u003e: Reads and writes cache data\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCache Administrator\u003c/strong\u003e: Monitors and manages cache cluster\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSystem\u003c/strong\u003e: Handles replication and failover\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUse Cases\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eApplication Client\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eStore key-value pairs with TTL\u003c/li\u003e\n\u003cli\u003eRetrieve values by key\u003c/li\u003e\n\u003cli\u003eDelete specific keys\u003c/li\u003e\n\u003cli\u003ePerform atomic operations (increment, append)\u003c/li\u003e\n\u003cli\u003eExecute batch operations\u003c/li\u003e\n\u003cli\u003eSubscribe to key events\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eCache Administrator\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMonitor cluster health and performance\u003c/li\u003e\n\u003cli\u003eAdd/remove nodes from cluster\u003c/li\u003e\n\u003cli\u003eConfigure replication settings\u003c/li\u003e\n\u003cli\u003eManage memory usage and eviction policies\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eSystem Functions\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAutomatic failover and recovery\u003c/li\u003e\n\u003cli\u003eData replication across nodes\u003c/li\u003e\n\u003cli\u003eLoad balancing and sharding\u003c/li\u003e\n\u003cli\u003eMemory management and eviction\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eFunctional Requirements\u003c/h3\u003e\n\u003cp\u003e✅ \u003cstrong\u003eIn Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eBasic operations (GET, SET, DELETE)\u003c/li\u003e\n\u003cli\u003eTTL (Time To Live) support\u003c/li\u003e\n\u003cli\u003eData partitioning across nodes\u003c/li\u003e\n\u003cli\u003eReplication for high availability\u003c/li\u003e\n\u003cli\u003eAtomic operations and transactions\u003c/li\u003e\n\u003cli\u003ePub/Sub messaging\u003c/li\u003e\n\u003cli\u003eMemory management and eviction\u003c/li\u003e\n\u003cli\u003eCluster management\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOut of Scope\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eComplex data structures (sorted sets, streams)\u003c/li\u003e\n\u003cli\u003ePersistence to disk\u003c/li\u003e\n\u003cli\u003eAdvanced scripting (Lua scripts)\u003c/li\u003e\n\u003cli\u003eAdvanced security features\u003c/li\u003e\n\u003cli\u003eCross-datacenter replication\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e2. Non-Functional Requirements\u003c/h2\u003e\n\u003ch3\u003eScalability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSupport thousands of nodes in a cluster\u003c/li\u003e\n\u003cli\u003eHandle millions of operations per second\u003c/li\u003e\n\u003cli\u003eLinear scaling with node addition\u003c/li\u003e\n\u003cli\u003eSupport for multiple data centers\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAvailability\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e99.99% uptime\u003c/li\u003e\n\u003cli\u003eAutomatic failover \u0026#x3C;30 seconds\u003c/li\u003e\n\u003cli\u003eNo single point of failure\u003c/li\u003e\n\u003cli\u003eGraceful degradation during failures\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePerformance\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSub-millisecond latency for cache hits\u003c/li\u003e\n\u003cli\u003eSupport 100K+ ops/sec per node\u003c/li\u003e\n\u003cli\u003eEfficient memory utilization (\u003e90%)\u003c/li\u003e\n\u003cli\u003eMinimal network overhead\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eConsistency\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eStrong consistency within partition\u003c/li\u003e\n\u003cli\u003eEventual consistency across replicas\u003c/li\u003e\n\u003cli\u003eConfigurable consistency levels\u003c/li\u003e\n\u003cli\u003eConflict resolution mechanisms\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e3. Estimations\u003c/h2\u003e\n\u003ch3\u003eUsage Metrics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eCache Cluster Size\u003c/strong\u003e: 100 nodes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMemory per Node\u003c/strong\u003e: 64 GB\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTotal Cache Capacity\u003c/strong\u003e: 6.4 TB\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOperations per Second\u003c/strong\u003e: 10 million\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePerformance Metrics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eAverage Key Size\u003c/strong\u003e: 100 bytes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAverage Value Size\u003c/strong\u003e: 1 KB\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCache Hit Ratio\u003c/strong\u003e: 95%\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNetwork Bandwidth\u003c/strong\u003e: 10 Gbps per node\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eMemory Estimations\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003ePer Node Storage\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAvailable Memory: 64 GB\u003c/li\u003e\n\u003cli\u003eOS and Overhead: 4 GB\u003c/li\u003e\n\u003cli\u003eCache Data: 60 GB\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEffective Storage\u003c/strong\u003e: ~50 million key-value pairs per node\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eCluster Totals\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTotal Effective Storage\u003c/strong\u003e: 5 billion key-value pairs\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMemory Efficiency\u003c/strong\u003e: 90% (accounting for fragmentation)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eReplication Factor\u003c/strong\u003e: 3x for high availability\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e4. Design Goals\u003c/h2\u003e\n\u003ch3\u003ePerformance Requirements\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLatency\u003c/strong\u003e: \u0026#x3C;1ms for local operations\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eThroughput\u003c/strong\u003e: 100K ops/sec per node\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMemory Efficiency\u003c/strong\u003e: \u003e90% utilization\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNetwork Efficiency\u003c/strong\u003e: Minimal cross-node communication\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eArchitecture Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eConsistent Hashing\u003c/strong\u003e: For data partitioning\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMaster-Slave Replication\u003c/strong\u003e: For data consistency\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGossip Protocol\u003c/strong\u003e: For cluster coordination\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUsage Patterns\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eRead Heavy\u003c/strong\u003e: 80% reads, 20% writes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eHot Keys\u003c/strong\u003e: Power-law distribution of key access\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTTL Patterns\u003c/strong\u003e: Mix of short and long-lived data\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e5. High-Level Design\u003c/h2\u003e\n\u003ch3\u003eBuilding Blocks\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e[Client] → [Smart Client/Proxy] → [Cache Node 1] ← [Replica 1A]\r\n                    ↓                     ↓              ↓\r\n                [Cache Node 2] ← [Replica 2A] ← [Coordinator]\r\n                    ↓                     ↓              ↓\r\n                [Cache Node 3] ← [Replica 3A] ← [Gossip Network]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCore Components\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eCache Nodes\u003c/strong\u003e: Store actual key-value data\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCluster Coordinator\u003c/strong\u003e: Manages cluster membership\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSmart Client\u003c/strong\u003e: Routes requests to correct nodes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eReplication Manager\u003c/strong\u003e: Handles data replication\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGossip Protocol\u003c/strong\u003e: Disseminates cluster state\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMemory Manager\u003c/strong\u003e: Handles eviction and garbage collection\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eData Distribution Strategy\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eConsistent Hashing\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass ConsistentHashing:\r\n    def __init__(self, nodes, virtual_nodes=150):\r\n        self.virtual_nodes = virtual_nodes\r\n        self.ring = {}\r\n        self.sorted_keys = []\r\n        \r\n        for node in nodes:\r\n            self.add_node(node)\r\n    \r\n    def hash(self, key):\r\n        return hashlib.md5(key.encode()).hexdigest()\r\n    \r\n    def add_node(self, node):\r\n        for i in range(self.virtual_nodes):\r\n            virtual_key = self.hash(f\"{node}:{i}\")\r\n            self.ring[virtual_key] = node\r\n        \r\n        self.sorted_keys = sorted(self.ring.keys())\r\n    \r\n    def get_node(self, key):\r\n        if not self.ring:\r\n            return None\r\n            \r\n        hash_key = self.hash(key)\r\n        \r\n        # Find the first node clockwise\r\n        for ring_key in self.sorted_keys:\r\n            if hash_key \u0026#x3C;= ring_key:\r\n                return self.ring[ring_key]\r\n        \r\n        # Wrap around to the first node\r\n        return self.ring[self.sorted_keys[0]]\r\n    \r\n    def remove_node(self, node):\r\n        for i in range(self.virtual_nodes):\r\n            virtual_key = self.hash(f\"{node}:{i}\")\r\n            if virtual_key in self.ring:\r\n                del self.ring[virtual_key]\r\n        \r\n        self.sorted_keys = sorted(self.ring.keys())\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eCache Node Implementation\u003c/h2\u003e\n\u003ch3\u003eCore Cache Operations\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass CacheNode:\r\n    def __init__(self, node_id, max_memory=64*1024*1024*1024):  # 64GB\r\n        self.node_id = node_id\r\n        self.max_memory = max_memory\r\n        self.data = {}\r\n        self.ttl_data = {}\r\n        self.access_times = {}\r\n        self.memory_usage = 0\r\n        self.eviction_policy = LRUEvictionPolicy()\r\n        \r\n    def get(self, key):\r\n        # Check if key exists and not expired\r\n        if key not in self.data:\r\n            return None\r\n            \r\n        if self.is_expired(key):\r\n            self.delete(key)\r\n            return None\r\n        \r\n        # Update access time for LRU\r\n        self.access_times[key] = time.time()\r\n        \r\n        return self.data[key]\r\n    \r\n    def set(self, key, value, ttl=None):\r\n        # Check memory constraints\r\n        value_size = self.calculate_size(value)\r\n        \r\n        if key in self.data:\r\n            # Update existing key\r\n            old_size = self.calculate_size(self.data[key])\r\n            self.memory_usage += (value_size - old_size)\r\n        else:\r\n            # New key\r\n            self.memory_usage += value_size + self.calculate_size(key)\r\n        \r\n        # Evict if necessary\r\n        while self.memory_usage \u003e self.max_memory:\r\n            evicted_key = self.eviction_policy.evict(self.data, self.access_times)\r\n            if evicted_key:\r\n                self.delete(evicted_key)\r\n            else:\r\n                break  # No more keys to evict\r\n        \r\n        # Store the data\r\n        self.data[key] = value\r\n        self.access_times[key] = time.time()\r\n        \r\n        # Set TTL if provided\r\n        if ttl:\r\n            self.ttl_data[key] = time.time() + ttl\r\n    \r\n    def delete(self, key):\r\n        if key in self.data:\r\n            value_size = self.calculate_size(self.data[key])\r\n            key_size = self.calculate_size(key)\r\n            \r\n            del self.data[key]\r\n            del self.access_times[key]\r\n            \r\n            if key in self.ttl_data:\r\n                del self.ttl_data[key]\r\n            \r\n            self.memory_usage -= (value_size + key_size)\r\n            return True\r\n        \r\n        return False\r\n    \r\n    def is_expired(self, key):\r\n        if key not in self.ttl_data:\r\n            return False\r\n        \r\n        return time.time() \u003e self.ttl_data[key]\r\n    \r\n    def cleanup_expired_keys(self):\r\n        \"\"\"Background task to clean up expired keys\"\"\"\r\n        current_time = time.time()\r\n        expired_keys = []\r\n        \r\n        for key, expiry_time in self.ttl_data.items():\r\n            if current_time \u003e expiry_time:\r\n                expired_keys.append(key)\r\n        \r\n        for key in expired_keys:\r\n            self.delete(key)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eEviction Policies\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass LRUEvictionPolicy:\r\n    def evict(self, data, access_times):\r\n        if not access_times:\r\n            return None\r\n        \r\n        # Find least recently used key\r\n        lru_key = min(access_times.keys(), key=lambda k: access_times[k])\r\n        return lru_key\r\n\r\nclass LFUEvictionPolicy:\r\n    def __init__(self):\r\n        self.access_counts = {}\r\n    \r\n    def evict(self, data, access_times):\r\n        if not self.access_counts:\r\n            return None\r\n        \r\n        # Find least frequently used key\r\n        lfu_key = min(self.access_counts.keys(), key=lambda k: self.access_counts[k])\r\n        return lfu_key\r\n    \r\n    def on_access(self, key):\r\n        self.access_counts[key] = self.access_counts.get(key, 0) + 1\r\n\r\nclass TTLEvictionPolicy:\r\n    def evict(self, data, access_times, ttl_data):\r\n        # Prioritize expired keys\r\n        current_time = time.time()\r\n        \r\n        for key, expiry_time in ttl_data.items():\r\n            if current_time \u003e expiry_time:\r\n                return key\r\n        \r\n        # If no expired keys, fall back to LRU\r\n        return LRUEvictionPolicy().evict(data, access_times)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eReplication and Consistency\u003c/h2\u003e\n\u003ch3\u003eMaster-Slave Replication\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass ReplicationManager:\r\n    def __init__(self, node_id, replication_factor=3):\r\n        self.node_id = node_id\r\n        self.replication_factor = replication_factor\r\n        self.replicas = set()\r\n        self.masters = set()\r\n        \r\n    def add_replica(self, replica_node):\r\n        self.replicas.add(replica_node)\r\n    \r\n    def replicate_write(self, key, value, ttl=None):\r\n        \"\"\"Replicate write operation to all replicas\"\"\"\r\n        operation = {\r\n            \"type\": \"SET\",\r\n            \"key\": key,\r\n            \"value\": value,\r\n            \"ttl\": ttl,\r\n            \"timestamp\": time.time(),\r\n            \"node_id\": self.node_id\r\n        }\r\n        \r\n        # Synchronous replication to ensure consistency\r\n        successful_replications = 0\r\n        \r\n        for replica in self.replicas:\r\n            try:\r\n                result = replica.apply_operation(operation)\r\n                if result:\r\n                    successful_replications += 1\r\n            except Exception as e:\r\n                # Log replication failure\r\n                self.log_replication_error(replica, operation, str(e))\r\n        \r\n        # Require majority for success (quorum)\r\n        required_replications = (self.replication_factor + 1) // 2\r\n        \r\n        if successful_replications \u003e= required_replications:\r\n            return True\r\n        else:\r\n            # Rollback operation if quorum not reached\r\n            self.rollback_operation(operation)\r\n            return False\r\n    \r\n    def handle_failover(self, failed_node):\r\n        \"\"\"Handle node failure and promote replica\"\"\"\r\n        if failed_node in self.masters:\r\n            # Promote a replica to master\r\n            replica_to_promote = self.select_replica_for_promotion(failed_node)\r\n            if replica_to_promote:\r\n                self.promote_replica_to_master(replica_to_promote, failed_node)\r\n        \r\n        # Update routing tables\r\n        self.update_cluster_topology(failed_node, \"FAILED\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eConflict Resolution\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass ConflictResolver:\r\n    def resolve_write_conflict(self, operations):\r\n        \"\"\"Resolve conflicts using last-write-wins with vector clocks\"\"\"\r\n        \r\n        if len(operations) == 1:\r\n            return operations[0]\r\n        \r\n        # Sort by timestamp (last write wins)\r\n        sorted_ops = sorted(operations, key=lambda op: op['timestamp'])\r\n        latest_operation = sorted_ops[-1]\r\n        \r\n        # For concurrent writes (same timestamp), use node_id as tiebreaker\r\n        concurrent_ops = [op for op in sorted_ops if op['timestamp'] == latest_operation['timestamp']]\r\n        \r\n        if len(concurrent_ops) \u003e 1:\r\n            # Use lexicographic ordering of node_id\r\n            latest_operation = min(concurrent_ops, key=lambda op: op['node_id'])\r\n        \r\n        return latest_operation\r\n    \r\n    def detect_concurrent_writes(self, operation1, operation2):\r\n        \"\"\"Detect if two operations are concurrent using vector clocks\"\"\"\r\n        \r\n        # Simple timestamp-based detection\r\n        time_diff = abs(operation1['timestamp'] - operation2['timestamp'])\r\n        \r\n        # Consider operations concurrent if within 100ms\r\n        return time_diff \u0026#x3C; 0.1\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eCluster Management\u003c/h2\u003e\n\u003ch3\u003eGossip Protocol for Cluster Coordination\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass GossipProtocol:\r\n    def __init__(self, node_id, initial_nodes):\r\n        self.node_id = node_id\r\n        self.cluster_state = {}\r\n        self.heartbeat_interval = 1  # 1 second\r\n        self.failure_detection_timeout = 5  # 5 seconds\r\n        \r\n        # Initialize cluster state\r\n        for node in initial_nodes:\r\n            self.cluster_state[node] = {\r\n                \"status\": \"ALIVE\",\r\n                \"last_seen\": time.time(),\r\n                \"metadata\": {}\r\n            }\r\n    \r\n    def start_gossip(self):\r\n        \"\"\"Start gossip protocol background tasks\"\"\"\r\n        threading.Thread(target=self.gossip_loop, daemon=True).start()\r\n        threading.Thread(target=self.failure_detection_loop, daemon=True).start()\r\n    \r\n    def gossip_loop(self):\r\n        \"\"\"Periodically gossip cluster state with random nodes\"\"\"\r\n        while True:\r\n            try:\r\n                # Select random subset of nodes to gossip with\r\n                alive_nodes = [node for node, state in self.cluster_state.items() \r\n                              if state[\"status\"] == \"ALIVE\" and node != self.node_id]\r\n                \r\n                if alive_nodes:\r\n                    random_nodes = random.sample(alive_nodes, min(3, len(alive_nodes)))\r\n                    \r\n                    for node in random_nodes:\r\n                        self.send_gossip_message(node)\r\n                \r\n                time.sleep(self.heartbeat_interval)\r\n                \r\n            except Exception as e:\r\n                self.log_error(f\"Gossip loop error: {e}\")\r\n    \r\n    def send_gossip_message(self, target_node):\r\n        \"\"\"Send gossip message to target node\"\"\"\r\n        message = {\r\n            \"type\": \"GOSSIP\",\r\n            \"sender\": self.node_id,\r\n            \"cluster_state\": self.cluster_state,\r\n            \"timestamp\": time.time()\r\n        }\r\n        \r\n        try:\r\n            response = self.send_message(target_node, message)\r\n            if response:\r\n                self.merge_cluster_state(response[\"cluster_state\"])\r\n        except Exception as e:\r\n            # Mark node as potentially failed\r\n            self.mark_node_suspect(target_node)\r\n    \r\n    def merge_cluster_state(self, remote_state):\r\n        \"\"\"Merge remote cluster state with local state\"\"\"\r\n        for node, remote_info in remote_state.items():\r\n            if node not in self.cluster_state:\r\n                # New node discovered\r\n                self.cluster_state[node] = remote_info\r\n            else:\r\n                # Update if remote info is newer\r\n                local_info = self.cluster_state[node]\r\n                if remote_info[\"last_seen\"] \u003e local_info[\"last_seen\"]:\r\n                    self.cluster_state[node] = remote_info\r\n    \r\n    def failure_detection_loop(self):\r\n        \"\"\"Detect failed nodes based on heartbeat timeouts\"\"\"\r\n        while True:\r\n            current_time = time.time()\r\n            \r\n            for node, state in self.cluster_state.items():\r\n                if node == self.node_id:\r\n                    continue\r\n                \r\n                time_since_seen = current_time - state[\"last_seen\"]\r\n                \r\n                if (time_since_seen \u003e self.failure_detection_timeout and \r\n                    state[\"status\"] == \"ALIVE\"):\r\n                    \r\n                    self.mark_node_failed(node)\r\n            \r\n            time.sleep(self.heartbeat_interval)\r\n    \r\n    def mark_node_failed(self, node):\r\n        \"\"\"Mark node as failed and trigger failover\"\"\"\r\n        self.cluster_state[node][\"status\"] = \"FAILED\"\r\n        self.cluster_state[node][\"last_seen\"] = time.time()\r\n        \r\n        # Notify cluster about node failure\r\n        self.broadcast_node_failure(node)\r\n        \r\n        # Trigger rebalancing if necessary\r\n        self.trigger_rebalancing(node)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eClient Implementation\u003c/h2\u003e\n\u003ch3\u003eSmart Client with Connection Pooling\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass CacheClient:\r\n    def __init__(self, cluster_nodes, pool_size=10):\r\n        self.cluster_nodes = cluster_nodes\r\n        self.consistent_hash = ConsistentHashing(cluster_nodes)\r\n        self.connection_pools = {}\r\n        \r\n        # Create connection pools for each node\r\n        for node in cluster_nodes:\r\n            self.connection_pools[node] = ConnectionPool(node, pool_size)\r\n    \r\n    def get(self, key):\r\n        \"\"\"Get value for key with automatic retry and failover\"\"\"\r\n        target_node = self.consistent_hash.get_node(key)\r\n        replica_nodes = self.get_replica_nodes(key)\r\n        \r\n        # Try primary node first\r\n        try:\r\n            return self.execute_on_node(target_node, \"GET\", key)\r\n        except NodeUnavailableException:\r\n            # Try replica nodes\r\n            for replica in replica_nodes:\r\n                try:\r\n                    return self.execute_on_node(replica, \"GET\", key)\r\n                except NodeUnavailableException:\r\n                    continue\r\n            \r\n            raise CacheUnavailableException(f\"All nodes unavailable for key: {key}\")\r\n    \r\n    def set(self, key, value, ttl=None):\r\n        \"\"\"Set key-value with replication\"\"\"\r\n        target_node = self.consistent_hash.get_node(key)\r\n        replica_nodes = self.get_replica_nodes(key)\r\n        \r\n        # Write to primary node\r\n        success = self.execute_on_node(target_node, \"SET\", key, value, ttl)\r\n        \r\n        if success:\r\n            # Asynchronously replicate to replicas\r\n            self.async_replicate(replica_nodes, \"SET\", key, value, ttl)\r\n        \r\n        return success\r\n    \r\n    def execute_on_node(self, node, operation, *args):\r\n        \"\"\"Execute operation on specific node\"\"\"\r\n        connection = self.connection_pools[node].get_connection()\r\n        \r\n        try:\r\n            if operation == \"GET\":\r\n                return connection.get(args[0])\r\n            elif operation == \"SET\":\r\n                return connection.set(args[0], args[1], args[2] if len(args) \u003e 2 else None)\r\n            elif operation == \"DELETE\":\r\n                return connection.delete(args[0])\r\n        finally:\r\n            self.connection_pools[node].return_connection(connection)\r\n    \r\n    def get_replica_nodes(self, key):\r\n        \"\"\"Get replica nodes for a given key\"\"\"\r\n        primary_node = self.consistent_hash.get_node(key)\r\n        \r\n        # Get next N nodes in the ring as replicas\r\n        replicas = []\r\n        nodes = list(self.cluster_nodes)\r\n        primary_index = nodes.index(primary_node)\r\n        \r\n        for i in range(1, 4):  # 3 replicas\r\n            replica_index = (primary_index + i) % len(nodes)\r\n            replicas.append(nodes[replica_index])\r\n        \r\n        return replicas\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003ePerformance Monitoring\u003c/h2\u003e\n\u003ch3\u003eMetrics Collection\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass CacheMetrics:\r\n    def __init__(self):\r\n        self.hit_count = 0\r\n        self.miss_count = 0\r\n        self.operation_latencies = []\r\n        self.memory_usage = 0\r\n        self.eviction_count = 0\r\n        \r\n    def record_hit(self):\r\n        self.hit_count += 1\r\n    \r\n    def record_miss(self):\r\n        self.miss_count += 1\r\n    \r\n    def record_latency(self, operation, latency_ms):\r\n        self.operation_latencies.append({\r\n            \"operation\": operation,\r\n            \"latency\": latency_ms,\r\n            \"timestamp\": time.time()\r\n        })\r\n        \r\n        # Keep only last 1000 measurements\r\n        if len(self.operation_latencies) \u003e 1000:\r\n            self.operation_latencies = self.operation_latencies[-1000:]\r\n    \r\n    def get_hit_ratio(self):\r\n        total_requests = self.hit_count + self.miss_count\r\n        if total_requests == 0:\r\n            return 0\r\n        return self.hit_count / total_requests\r\n    \r\n    def get_average_latency(self, operation=None):\r\n        if operation:\r\n            latencies = [l[\"latency\"] for l in self.operation_latencies if l[\"operation\"] == operation]\r\n        else:\r\n            latencies = [l[\"latency\"] for l in self.operation_latencies]\r\n        \r\n        if not latencies:\r\n            return 0\r\n        \r\n        return sum(latencies) / len(latencies)\r\n    \r\n    def get_p99_latency(self, operation=None):\r\n        if operation:\r\n            latencies = [l[\"latency\"] for l in self.operation_latencies if l[\"operation\"] == operation]\r\n        else:\r\n            latencies = [l[\"latency\"] for l in self.operation_latencies]\r\n        \r\n        if not latencies:\r\n            return 0\r\n        \r\n        sorted_latencies = sorted(latencies)\r\n        p99_index = int(0.99 * len(sorted_latencies))\r\n        return sorted_latencies[p99_index]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eDistributed Cache Design Quiz\u003c/h2\u003e\n\u003cp\u003eTest your understanding of distributed cache system design with the interactive quiz that appears after each part of this series.\u003c/p\u003e\n\u003ch2\u003eAdvanced Features\u003c/h2\u003e\n\u003ch3\u003ePub/Sub Implementation\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass PubSubManager:\r\n    def __init__(self):\r\n        self.subscriptions = {}  # channel -\u003e set of subscribers\r\n        self.pattern_subscriptions = {}  # pattern -\u003e set of subscribers\r\n        \r\n    def subscribe(self, client_id, channel):\r\n        if channel not in self.subscriptions:\r\n            self.subscriptions[channel] = set()\r\n        self.subscriptions[channel].add(client_id)\r\n    \r\n    def unsubscribe(self, client_id, channel):\r\n        if channel in self.subscriptions:\r\n            self.subscriptions[channel].discard(client_id)\r\n    \r\n    def publish(self, channel, message):\r\n        # Direct channel subscribers\r\n        if channel in self.subscriptions:\r\n            for subscriber in self.subscriptions[channel]:\r\n                self.send_message_to_client(subscriber, channel, message)\r\n        \r\n        # Pattern subscribers\r\n        for pattern, subscribers in self.pattern_subscriptions.items():\r\n            if self.matches_pattern(channel, pattern):\r\n                for subscriber in subscribers:\r\n                    self.send_message_to_client(subscriber, channel, message)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eMemory Management\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass MemoryManager:\r\n    def __init__(self, max_memory):\r\n        self.max_memory = max_memory\r\n        self.current_usage = 0\r\n        self.fragmentation_threshold = 0.1\r\n        \r\n    def should_evict(self):\r\n        return self.current_usage \u003e self.max_memory * 0.9\r\n    \r\n    def calculate_fragmentation(self):\r\n        # Simplified fragmentation calculation\r\n        allocated_memory = sum(sys.getsizeof(obj) for obj in self.data.values())\r\n        return 1 - (allocated_memory / self.current_usage)\r\n    \r\n    def defragment_memory(self):\r\n        if self.calculate_fragmentation() \u003e self.fragmentation_threshold:\r\n            # Trigger garbage collection\r\n            gc.collect()\r\n            \r\n            # Reorganize data structure if needed\r\n            self.reorganize_data_structures()\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eKey Takeaways\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eConsistent Hashing\u003c/strong\u003e: Essential for distributed data partitioning\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eReplication Strategy\u003c/strong\u003e: Balance consistency, availability, and performance\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFailure Detection\u003c/strong\u003e: Use gossip protocols for robust cluster management\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSmart Clients\u003c/strong\u003e: Implement client-side logic for routing and failover\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMemory Management\u003c/strong\u003e: Efficient eviction policies and memory monitoring\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eSeries Conclusion\u003c/h2\u003e\n\u003cp\u003eCongratulations! You've completed the System Design Mastery series. You've learned to design:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eURL Shortener\u003c/strong\u003e: Read-heavy systems with caching\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eChat System\u003c/strong\u003e: Real-time communication and WebSockets\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSocial Media Feed\u003c/strong\u003e: Content ranking and viral traffic handling\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVideo Streaming\u003c/strong\u003e: Large file storage and global CDN\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDistributed Cache\u003c/strong\u003e: Consistency and distributed coordination\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eFinal Interview Tips\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003ePractice Regularly\u003c/strong\u003e: Work through problems weekly\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eThink Out Loud\u003c/strong\u003e: Communicate your reasoning clearly\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eStart Simple\u003c/strong\u003e: Begin with basic design, then add complexity\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eConsider Trade-offs\u003c/strong\u003e: Discuss pros and cons of each decision\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLearn from Real Systems\u003c/strong\u003e: Study how companies like Google, Facebook, and Netflix solve similar problems\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eContinue Learning\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eStudy real-world system architectures\u003c/li\u003e\n\u003cli\u003eRead engineering blogs from top tech companies\u003c/li\u003e\n\u003cli\u003ePractice with system design interview platforms\u003c/li\u003e\n\u003cli\u003eBuild distributed systems to gain hands-on experience\u003c/li\u003e\n\u003cli\u003eStay current with emerging technologies and patterns\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eYou're now ready to tackle any system design interview with confidence!\u003c/strong\u003e\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"article\",null,{\"className\":\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\",\"children\":[[\"$\",\"header\",null,{\"className\":\"bg-white border-b border-gray-200\",\"children\":[\"$\",\"div\",null,{\"className\":\"medium-container py-12\",\"children\":[[\"$\",\"div\",null,{\"className\":\"max-w-3xl mx-auto text-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-wrap justify-center gap-2 mb-6\",\"children\":[[\"$\",\"span\",\"data-structures\",{\"className\":\"tag\",\"children\":\"data-structures\"}],[\"$\",\"span\",\"hash-tables\",{\"className\":\"tag\",\"children\":\"hash-tables\"}],[\"$\",\"span\",\"algorithms\",{\"className\":\"tag\",\"children\":\"algorithms\"}],[\"$\",\"span\",\"performance\",{\"className\":\"tag\",\"children\":\"performance\"}]]}],[\"$\",\"h1\",null,{\"className\":\"text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight\",\"children\":\"Hash Tables: The Ultimate Guide\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-gray-600 leading-relaxed\",\"children\":\"Comprehensive exploration of hash tables, from core concepts to advanced techniques, enhanced with illustrative graphics.\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center space-x-6 text-gray-500\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center space-x-2\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-user w-5 h-5\",\"children\":[[\"$\",\"path\",\"975kel\",{\"d\":\"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\"}],[\"$\",\"circle\",\"17ys0d\",{\"cx\":\"12\",\"cy\":\"7\",\"r\":\"4\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"font-medium\",\"children\":\"Abstract Algorithms\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center space-x-2\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-calendar w-5 h-5\",\"children\":[[\"$\",\"rect\",\"eu3xkr\",{\"width\":\"18\",\"height\":\"18\",\"x\":\"3\",\"y\":\"4\",\"rx\":\"2\",\"ry\":\"2\"}],[\"$\",\"line\",\"m3sa8f\",{\"x1\":\"16\",\"x2\":\"16\",\"y1\":\"2\",\"y2\":\"6\"}],[\"$\",\"line\",\"18kwsl\",{\"x1\":\"8\",\"x2\":\"8\",\"y1\":\"2\",\"y2\":\"6\"}],[\"$\",\"line\",\"xt86sb\",{\"x1\":\"3\",\"x2\":\"21\",\"y1\":\"10\",\"y2\":\"10\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"about 1 year ago\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center space-x-2\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-clock w-5 h-5\",\"children\":[[\"$\",\"circle\",\"1mglay\",{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}],[\"$\",\"polyline\",\"68esgv\",{\"points\":\"12 6 12 12 16 14\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"4 min read\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center space-x-4 mt-8\",\"children\":[[\"$\",\"button\",null,{\"className\":\"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-share2 w-4 h-4\",\"children\":[[\"$\",\"circle\",\"gq8acd\",{\"cx\":\"18\",\"cy\":\"5\",\"r\":\"3\"}],[\"$\",\"circle\",\"w7nqdw\",{\"cx\":\"6\",\"cy\":\"12\",\"r\":\"3\"}],[\"$\",\"circle\",\"1xt0gg\",{\"cx\":\"18\",\"cy\":\"19\",\"r\":\"3\"}],[\"$\",\"line\",\"47mynk\",{\"x1\":\"8.59\",\"x2\":\"15.42\",\"y1\":\"13.51\",\"y2\":\"17.49\"}],[\"$\",\"line\",\"1n3mei\",{\"x1\":\"15.41\",\"x2\":\"8.59\",\"y1\":\"6.51\",\"y2\":\"10.49\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"Share\"}]]}],[\"$\",\"button\",null,{\"className\":\"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-bookmark w-4 h-4\",\"children\":[[\"$\",\"path\",\"1fy3hk\",{\"d\":\"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"Save\"}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"max-w-4xl mx-auto mt-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"relative aspect-video rounded-xl overflow-hidden shadow-lg\",\"children\":[\"$\",\"$L11\",null,{\"src\":\"/posts/hash-tables-ultimate-guide/assets/overview.png\",\"alt\":\"Hash Tables: The Ultimate Guide\",\"fill\":true,\"className\":\"object-cover\",\"priority\":true}]}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"py-8\",\"children\":[[\"$\",\"$L12\",null,{\"slug\":\"hash-tables-ultimate-guide\"}],[\"$\",\"div\",null,{\"className\":\"max-w-6xl mx-auto px-6 mt-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"bg-white rounded-xl shadow-sm border border-gray-200 p-8\",\"children\":[\"$\",\"$L13\",null,{}]}]}]]}],[\"$\",\"div\",null,{\"className\":\"bg-white border-t border-gray-200\",\"children\":[\"$\",\"$L14\",null,{\"posts\":[{\"slug\":\"system-design-interview\",\"title\":\"System Design Mastery: Complete Guide\",\"date\":\"2024-04-01\",\"excerpt\":\"Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.\",\"content\":\"$15\",\"author\":\"Abstract Algorithms\",\"tags\":[\"system-design\",\"interview\",\"scalability\",\"architecture\"],\"readingTime\":\"6 min read\",\"coverImage\":\"/posts/system-design-interview/assets/intro.png\",\"fixedUrl\":\"$undefined\",\"series\":{\"name\":\"System Design Mastery\",\"order\":1,\"total\":6,\"prev\":null,\"next\":\"/posts/system-design-interview/part-2\"}},{\"slug\":\"system-design-interview/part-2\",\"title\":\"Introduction \u0026 Methodology\",\"date\":\"2024-04-01\",\"excerpt\":\"Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.\",\"content\":\"$16\",\"author\":\"Abstract Algorithms\",\"tags\":[\"system-design\",\"interview\",\"scalability\",\"architecture\"],\"readingTime\":\"7 min read\",\"coverImage\":\"/posts/system-design-interview/assets/intro.png\",\"series\":{\"name\":\"System Design Mastery\",\"order\":2,\"total\":6,\"prev\":\"/posts/system-design-interview\",\"next\":\"/posts/system-design-interview/part-3\",\"parts\":[{\"order\":1,\"slug\":\"system-design-interview\",\"title\":\"Introduction \u0026 Methodology\"},{\"order\":2,\"slug\":\"system-design-interview/part-2\",\"title\":\"Design a URL Shortener (TinyURL)\"},{\"order\":3,\"slug\":\"system-design-interview/part-3\",\"title\":\"Design a Chat System (WhatsApp)\"},{\"order\":4,\"slug\":\"system-design-interview/part-4\",\"title\":\"Design a Social Media Feed (Twitter)\"},{\"order\":5,\"slug\":\"system-design-interview/part-5\",\"title\":\"Design a Video Streaming Service (YouTube)\"},{\"order\":6,\"slug\":\"system-design-interview/part-6\",\"title\":\"Design a Distributed Cache (Redis)\"}]}},{\"slug\":\"system-design-interview/part-3\",\"title\":\"Design a URL Shortener (TinyURL)\",\"date\":\"2024-04-01\",\"excerpt\":\"Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.\",\"content\":\"$17\",\"author\":\"Abstract Algorithms\",\"tags\":[\"system-design\",\"interview\",\"scalability\",\"architecture\"],\"readingTime\":\"9 min read\",\"coverImage\":\"/posts/system-design-interview/assets/intro.png\",\"series\":{\"name\":\"System Design Mastery\",\"order\":3,\"total\":6,\"prev\":\"/posts/system-design-interview/part-2\",\"next\":\"/posts/system-design-interview/part-4\",\"parts\":[{\"order\":1,\"slug\":\"system-design-interview\",\"title\":\"Introduction \u0026 Methodology\"},{\"order\":2,\"slug\":\"system-design-interview/part-2\",\"title\":\"Design a URL Shortener (TinyURL)\"},{\"order\":3,\"slug\":\"system-design-interview/part-3\",\"title\":\"Design a Chat System (WhatsApp)\"},{\"order\":4,\"slug\":\"system-design-interview/part-4\",\"title\":\"Design a Social Media Feed (Twitter)\"},{\"order\":5,\"slug\":\"system-design-interview/part-5\",\"title\":\"Design a Video Streaming Service (YouTube)\"},{\"order\":6,\"slug\":\"system-design-interview/part-6\",\"title\":\"Design a Distributed Cache (Redis)\"}]}},{\"slug\":\"system-design-interview/part-4\",\"title\":\"Design a Chat System (WhatsApp)\",\"date\":\"2024-04-01\",\"excerpt\":\"Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.\",\"content\":\"$18\",\"author\":\"Abstract Algorithms\",\"tags\":[\"system-design\",\"interview\",\"scalability\",\"architecture\"],\"readingTime\":\"10 min read\",\"coverImage\":\"/posts/system-design-interview/assets/intro.png\",\"series\":{\"name\":\"System Design Mastery\",\"order\":4,\"total\":6,\"prev\":\"/posts/system-design-interview/part-3\",\"next\":\"/posts/system-design-interview/part-5\",\"parts\":[{\"order\":1,\"slug\":\"system-design-interview\",\"title\":\"Introduction \u0026 Methodology\"},{\"order\":2,\"slug\":\"system-design-interview/part-2\",\"title\":\"Design a URL Shortener (TinyURL)\"},{\"order\":3,\"slug\":\"system-design-interview/part-3\",\"title\":\"Design a Chat System (WhatsApp)\"},{\"order\":4,\"slug\":\"system-design-interview/part-4\",\"title\":\"Design a Social Media Feed (Twitter)\"},{\"order\":5,\"slug\":\"system-design-interview/part-5\",\"title\":\"Design a Video Streaming Service (YouTube)\"},{\"order\":6,\"slug\":\"system-design-interview/part-6\",\"title\":\"Design a Distributed Cache (Redis)\"}]}},{\"slug\":\"system-design-interview/part-5\",\"title\":\"Design a Social Media Feed (Twitter)\",\"date\":\"2024-04-01\",\"excerpt\":\"Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.\",\"content\":\"$19\",\"author\":\"Abstract Algorithms\",\"tags\":[\"system-design\",\"interview\",\"scalability\",\"architecture\"],\"readingTime\":\"11 min read\",\"coverImage\":\"/posts/system-design-interview/assets/intro.png\",\"series\":{\"name\":\"System Design Mastery\",\"order\":5,\"total\":6,\"prev\":\"/posts/system-design-interview/part-4\",\"next\":\"/posts/system-design-interview/part-6\",\"parts\":[{\"order\":1,\"slug\":\"system-design-interview\",\"title\":\"Introduction \u0026 Methodology\"},{\"order\":2,\"slug\":\"system-design-interview/part-2\",\"title\":\"Design a URL Shortener (TinyURL)\"},{\"order\":3,\"slug\":\"system-design-interview/part-3\",\"title\":\"Design a Chat System (WhatsApp)\"},{\"order\":4,\"slug\":\"system-design-interview/part-4\",\"title\":\"Design a Social Media Feed (Twitter)\"},{\"order\":5,\"slug\":\"system-design-interview/part-5\",\"title\":\"Design a Video Streaming Service (YouTube)\"},{\"order\":6,\"slug\":\"system-design-interview/part-6\",\"title\":\"Design a Distributed Cache (Redis)\"}]}},{\"slug\":\"system-design-interview/part-6\",\"title\":\"Design a Video Streaming Service (YouTube)\",\"date\":\"2024-04-01\",\"excerpt\":\"Master system design interviews with this comprehensive 6-part series covering methodology, top interview questions, and hands-on practice.\",\"content\":\"$1a\",\"author\":\"Abstract Algorithms\",\"tags\":[\"system-design\",\"interview\",\"scalability\",\"architecture\"],\"readingTime\":\"12 min read\",\"coverImage\":\"/posts/system-design-interview/assets/intro.png\",\"series\":{\"name\":\"System Design Mastery\",\"order\":6,\"total\":6,\"prev\":\"/posts/system-design-interview/part-5\",\"next\":null,\"parts\":[{\"order\":1,\"slug\":\"system-design-interview\",\"title\":\"Introduction \u0026 Methodology\"},{\"order\":2,\"slug\":\"system-design-interview/part-2\",\"title\":\"Design a URL Shortener (TinyURL)\"},{\"order\":3,\"slug\":\"system-design-interview/part-3\",\"title\":\"Design a Chat System (WhatsApp)\"},{\"order\":4,\"slug\":\"system-design-interview/part-4\",\"title\":\"Design a Social Media Feed (Twitter)\"},{\"order\":5,\"slug\":\"system-design-interview/part-5\",\"title\":\"Design a Video Streaming Service (YouTube)\"},{\"order\":6,\"slug\":\"system-design-interview/part-6\",\"title\":\"Design a Distributed Cache (Redis)\"}]}}]}]}],[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BlogPosting\\\",\\\"headline\\\":\\\"Hash Tables: The Ultimate Guide\\\",\\\"description\\\":\\\"Comprehensive exploration of hash tables, from core concepts to advanced techniques, enhanced with illustrative graphics.\\\",\\\"datePublished\\\":\\\"2024-04-05\\\",\\\"dateModified\\\":\\\"2024-04-05\\\",\\\"author\\\":{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"Abstract Algorithms\\\"},\\\"publisher\\\":{\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"Abstract Algorithms\\\",\\\"url\\\":\\\"https://abstractalgorithms.github.io\\\"},\\\"url\\\":\\\"https://abstractalgorithms.github.io/posts/hash-tables-ultimate-guide\\\",\\\"mainEntityOfPage\\\":{\\\"@type\\\":\\\"WebPage\\\",\\\"@id\\\":\\\"https://abstractalgorithms.github.io/posts/hash-tables-ultimate-guide\\\"},\\\"image\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"url\\\":\\\"https://abstractalgorithms.github.io/posts/hash-tables-ultimate-guide/assets/overview.png\\\"}}\"}}]]}]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Hash Tables: The Ultimate Guide | Abstract Algorithms\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Comprehensive exploration of hash tables, from core concepts to advanced techniques, enhanced with illustrative graphics.\"}],[\"$\",\"meta\",\"4\",{\"name\":\"author\",\"content\":\"Abstract Algorithms\"}],[\"$\",\"meta\",\"5\",{\"name\":\"keywords\",\"content\":\"algorithms,data structures,system design,software engineering,programming,computer science,performance optimization,big o notation,hash tables,database indexing\"}],[\"$\",\"meta\",\"6\",{\"name\":\"creator\",\"content\":\"Abstract Algorithms\"}],[\"$\",\"meta\",\"7\",{\"name\":\"publisher\",\"content\":\"Abstract Algorithms\"}],[\"$\",\"meta\",\"8\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"9\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:title\",\"content\":\"Hash Tables: The Ultimate Guide\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:description\",\"content\":\"Comprehensive exploration of hash tables, from core concepts to advanced techniques, enhanced with illustrative graphics.\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"13\",{\"property\":\"article:published_time\",\"content\":\"2024-04-05\"}],[\"$\",\"meta\",\"14\",{\"property\":\"article:author\",\"content\":\"Abstract Algorithms\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:title\",\"content\":\"Abstract Algorithms\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:description\",\"content\":\"A comprehensive blog about algorithms, data structures, system design, and software engineering best practices\"}],[\"$\",\"link\",\"18\",{\"rel\":\"icon\",\"href\":\"/favicon.svg\",\"type\":\"image/svg+xml\"}],[\"$\",\"link\",\"19\",{\"rel\":\"icon\",\"href\":\"/icon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"32x32\"}],[\"$\",\"link\",\"20\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.svg\",\"type\":\"image/svg+xml\",\"sizes\":\"180x180\"}],[\"$\",\"meta\",\"21\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script></body></html>